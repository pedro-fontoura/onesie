// Build: February 13 2026 01:45

export const BUNDLE_URL = import.meta.url.split( '/' ).pop();

export const BUNDLE_ID = "2026-0213-0145";

function t(t){return document.getElementById(t)}class e{static get M61(){return window.location.href.includes("nighthawk.home")}static get M75(){return screen.orientation&&screen.orientation.type?screen.orientation.type.includes("landscape"):window.innerWidth>window.innerHeight}static get M130(){return navigator.maxTouchPoints>0}static get M98(){return navigator.userAgentData&&"Android"===navigator.userAgentData.platform||/android/i.test(navigator.userAgent)}static get M50(){const t=window.matchMedia("(display-mode: standalone)").matches,e=!0===window.navigator.standalone;return t||e}static get M185(){return/iPad|iPhone|iPod/.test(navigator.userAgent)||/Mac/.test(navigator.userAgent)&&navigator.maxTouchPoints>1}static M10(t,e,i){Object.defineProperty(t,e,{value:i,writable:!1,enumerable:!0,configurable:!1})}static M20(t,e){if(!Array.isArray(t))return;const i=t.indexOf(e);-1!==i&&t.splice(i,1)}static M21(t){if(!Array.isArray(t))return t;for(let e=t.length-1;e>0;e--){const i=Math.floor(Math.random()*(e+1));[t[e],t[i]]=[t[i],t[e]]}return t}static M37(t){return function(){let e=t+=1831565813;return e=Math.imul(e^e>>>15,1|e),e^=e+Math.imul(e^e>>>7,61|e),((e^e>>>14)>>>0)/4294967296}}static M99(t){let e=0;for(let i=0;i<t.length;i++)e=(e<<5)-e+t.charCodeAt(i),e|=0;return e}static M29(t,e=null,i=!1){let s=new URLSearchParams(window.location.search).get(t);if(null===s)return e;if(i){const t=parseInt(s,10);return isNaN(t)?e:t}return s}static M76(t,e=document.documentElement,i=null){t.startsWith("--")||(t="--"+t);const s=window.getComputedStyle(e).getPropertyValue(t).trim();return""===s?i:s.replace(/^['"]|['"]$/g,"")}static M30(){if(e.M185)return;const t=document.documentElement,i=t.requestFullscreen||t.webkitRequestFullscreen;if(!i)return;const s=e.M98?{navigationUI:"hide"}:{};i.call(t,s).catch(t=>{})}static M31(t){const e=document.querySelector('script[type="importmap"]');if(!e)throw new Error('GetImportMapValue » <script type="importmap"> not found in DOM.');const i=JSON.parse(e.textContent),s=i.imports?.[t];if(void 0===s)throw new Error("GetImportMapValue » Key not found in imports: "+t);return s}static M62(t,e=0){if("string"!=typeof t)return t;let i="";for(let s=0;s<t.length;s++){const n=t.charCodeAt(s);i+=String.fromCharCode(n+e)}return i}static M156(t,e,i){const s=t.style;s.width=e+"px",s.height=i+"px"}static M114(t,e,i,s,n){const r=t.style;r.width=e+"px",r.height=i+"px",r.left=s+"px",r.top=n+"px"}static M207(t){return new Promise(e=>{setTimeout(()=>e(!0),t)})}}class i{static get M186(){return(1+Math.sqrt(5))/2}static get M187(){return 2*Math.PI}static get M157(){return Math.PI/2}static get M77(){return Math.PI/180}static get M63(){return 180/Math.PI}static M158(t){return t*i.M77}static M159(t){return t*i.M63}static M115(t,e){return Math.floor(Math.random()*(e-t+1))+t}static M78(t,e){return t+Math.random()*(e-t)}static M64(t=.5){return Math.random()<t}static M40(t){return function(){let e=t+=1831565813;return e=Math.imul(e^e>>>15,1|e),e^=e+Math.imul(e^e>>>7,61|e),((e^e>>>14)>>>0)/4294967296}}static M218(t,e,i){return t+(e-t)*i}static M208(t,e,i,s,n){return s+(t-e)*(n-s)/(i-e)}static M209(t,e,i){return Math.max(e,Math.min(t,i))}static M131(t,e,i,s){return Math.hypot(i-t,s-e)}static M160(t,e,i=2){if(e<=0)return 0;const s=t/e;return 1-Math.pow(s,i)}}var s="busy",n="success",r="fail",a="state_fill_enemy_row",h="state_player_discard",o="state_player_draw",l="state_capture",c="state_player_capture",u="state_player_sacrifice",d="state_enemy_capture",_="msg#deck:seed",p="msg#ui:update",M="msg#ui:click",f="msg#game:over",m="location:unknown",g="location:player_discard",y="location:player_row",w="location:enemy_row",b=Object.defineProperty,E=class t{static K106=100;static K111=199;static K25=100;static K32=!0;#t=0;#e=0;#i=100;#s=-1;#n=0;#r=0;#a=null;#h=null;#o=!1;#l=0;#c=0;#u=0;#d=0;#_=0;#p=0;#M=!1;#f=[];#m=!0;#g=!1;constructor(i,s,n=!1,r=0,a={}){e.M10(this,"IDX",i),e.M10(this,"ID",s);const{parent:h=null,is_box:o=!1}=a;e.M10(this,"IS_BOX",o),this.#l=r||t.K25,!0===n?this.#a=document.createElement("div"):n instanceof Node&&(this.#a=n),this.#a&&(this.#y(),h instanceof Node&&h.appendChild(this.#a))}#y(){e.M10(this,"ELEMENT",this.#a),this.#a.id=this.ID,this.#a.style.position="absolute",this.#a.style.top="0px",this.#a.style.left="0px",this.#a.style.zIndex=this.#i,this.#a.classList.add("FlexBoxEntity"),this.#a.dataset.smooth=this.#o?"yes":"no",this.#a.addEventListener("transitionend",this.#w.bind(this))}M161(){return this.#a&&(this.#a.remove(),this.#a=null,this.#f=null),this}M79(){return this.#a.offsetWidth,this}M100(){return this.#a}M132(){return this.#n}M116(){return this.#r}M188(){return this.#t}M162(){return this.#e}M114(t,e,i,s){this.#n=0|t,this.#r=0|e,s|=0,i|=0;const n=this.#t!==s||this.#e!==i;return n&&(this.#t=s,this.#e=i),this.#b(n),this}#E(){const t=window.getComputedStyle(this.#a).translate;t&&"none"!==t||(this.#u=0,this.#c=0);const e=t.split(" ");this.#u=parseFloat(e[0])||0,this.#c=parseFloat(e[1])||0}M80(t,e){if(t|=0,e|=0,this.#t===e&&this.#e===t)return this;if(this.#o){const i=this.M3(t,e);this.#v(i)}return this.#t=e,this.#e=t,this.#b(!0),this}M3(t,e){this.#E();const i=t-this.#u,s=e-this.#c;return Math.sqrt(i*i+s*s)/this.#l}M156(t,e){return t|=0,e|=0,this.#n===t&&this.#r===e||(this.#n=t,this.#r=e,this.#b(!1)),this}#b(t=!0){this.#x();const e=this.#a.style;e.width=this.#n+"px",e.height=this.#r+"px",t?(e.translate=this.#e+"px "+this.#t+"px 0px",this.#o&&(e.zIndex=199+this.#s)):e.zIndex=this.#i}#w(t){"translate"===t.propertyName&&(this.#E(),Math.abs(this.#u-this.#e)<1&&Math.abs(this.#c-this.#t)<1&&(this.#a.style.zIndex=this.#i,this.#M&&this.#L()))}M51(){return this.#p>0}M133(){return this.#p>0}M134(){return this.#p>0}#L(){t.K32;const e=this.#f.length;for(let t=0;t<e;t++)"function"!=typeof this.#f[t]||this.#f[t](this);this.#f.length=0}M117(t=!0){return this.#o=!!t,this.#a.dataset.smooth=this.#o?"yes":"no",this}M135(){return this.#o}M118(){return new Promise(t=>this.M81(()=>t(this)))}M81(t){return"function"!=typeof t?this:this.#M?(this.#f.push(t),this):void 0}M13(){this.#f.length=0}M22(t=!0){return this.#M=!!t,this}Error(t,e,...i){this.constructor.name,i.length>0&&i.forEach((t,e)=>{})}M119(){return this.#s}M120(t=-1){return this.#s=t,this}M189(t,e=-1){return null!==this.#h?(this.Error("SetBox","Already set",this.#h,t),this):(this.#h=t,e>=0&&(this.#s=e),this)}M136(){return this.#h=null,this.#s=-1,this}M190(){return this.#h}M219(t){return this.#h===t}M191(){return null!==this.#h}#v(t){return!Number.isFinite(t)||t<0?(this.Error("SetTranslationTime","Bad number",t),this):this.#a?(this.#a.style.transitionDuration=t+"ms",this):this}M41(e=0){return this.#l=e||t.K25,this}M220(t){return t|=0,this.#i===t||(this.#i=t,this.#a.style.zIndex=t),this}M137(t){return!Number.isFinite(t)||t<0?(this.Error("SetBaseZ","Bad number",t),this):(t|=0,this.#i<t&&(this.#i=t),this.#a.style.zIndex=t,this)}#x(){this.#d=this.#t+(this.#r>>1),this.#_=this.#e+(this.#n>>1)}M65(){return this.#d}M52(){return this.#_}M7(t,e){const i=t-this.#e,s=e-this.#t;return Math.sqrt(i*i+s*s)/this.#l}M121(){return this.#m}M138(){return!this.#m}M101(t=!0){return t=!!t,this.#m===t||(this.#m=t,this.M24(t)),this}M53(){return this.#m=!this.#m,this.M24(this.#m),this}M102(){return this.#g}M82(t=!0){return t=!!t,this.#g===t||(this.#g=t,this.M32(t)),this}M45(){return this.#g=!this.#g,this.M32(this.#g),this}},v=1/0,x=class extends E{static K118=11;static K107=12;static K108=3;static K112=1;static K119=2;static K109=4;static K100=5;static K110=6;static K113=7;#k=11;#C=!0;#I=[];#T=null;#N=null;#S=null;#A=v;#R=0;#D=0;#P=0;#O=0;#K=!1;#F=0;#B=0;#V=!1;#z=0;#j=0;#H=E.K106;#U=null;#G=null;#q=null;#$=null;#W=!1;#Y=0;#X=!1;constructor(t,e,i,s,n,r=!1,a={}){const{max_count:h=v,sorting:o=null,tuck:l=!1,uniform:c=!1,parent:u=null,velocity_px_ms:d=0,reverse_z:_=!1}=a;super(t,e,r,d,{is_box:!0,parent:u}),this.#A=h,this.M83(_),this.#k=i,11!==i&&12!==i&&this.Error("FlexBox","Bad orientation",i),this.#C=11===this.#k,"function"==typeof o&&(this.#T=o);const p=Number.isFinite(this.#A)?this.#A:64;this.#U=new Int32Array(p),this.#G=new Int32Array(p),s=s||4,this.#S=this.#J(s),3!==(n=n||3)&&1!==n&&2!==n&&this.Error("FlexBox","Bad align",n),this.#N=this.#J(n),this.#V=c,l>0&&this.M163(l),this.ELEMENT&&this.ELEMENT.classList.add("FlexBox")}M161(){super.M161(),this.#I=null,this.#N=null,this.#S=null,this.#T=null}#Q(t,e){if(t.length<e){const i=t.length<<1;t=new Int32Array(i>e?i:e)}return t}M229(t,e=!0){if(!(t instanceof E))return this.Error("Add","Not a FlexBoxEntity",t),this;if(this.#I.includes(t))return this.Error("Add","Already here",t),this;if(this.M195())return this.Error("Add","I am full",t),this;t.M191()&&t.M190().M194(t),e?this.#I.push(t):this.#I.unshift(t);const i=this.#I.length;let s=!e&&i>1;return t.M189(this,e?this.#I.length-1:0),this.#Q(this.#U,i),this.#Q(this.#G,i),null!==this.#T&&(this.#I.sort(this.#T),s=!0),s&&this.#Z(),this.#V?(0!==this.#z&&0!=this.#j||(this.#z=t.M132(),this.#j=t.M116(),this.#W>0&&this.#tt()),this.#F+=this.#z,this.#B+=this.#j):(this.#F+=t.M132(),this.#B+=t.M116()),this.#K=!0,this.M14(),this}M192(t){return this.M229(t,!1)}M193(t){return this.M229(t,!0)}M194(t){return t instanceof E?this.#I.includes(t)?(t.M136(),t.M13(),e.M20(this.#I,t),this.#Z(),this.#V?(this.#F-=this.#z,this.#B-=this.#j):(this.#F-=t.M132(),this.#B-=t.M116()),this.#K=!0,this.M14(),this):(this.Error("Remove","Not here",t.ID),this):(this.Error("Remove","Not a FlexBoxEntity",t),this)}M156(t,e){t|=0,e|=0,super.M156(t,e),this.#R=t,this.#D=e}M114(t,e,i,s,n=!0){return t|=0,e|=0,i|=0,s|=0,super.M114(t,e,i,s),this.#R=t,this.#D=e,this.#O=i,this.#P=s,n&&this.M14(),this}M42(t,e,i=-1){return this.#z=0|t,this.#j=0|e,this.#W>0&&this.#tt(),this.#V=!0,this.#K=!1,i>=0&&(this.#H=i),this.M23(),this}M83(t=!0){this.#X=!!t,this.M14()}M43(t=-1){t>=0&&(this.#H=0|t)}M23(){let t=0,e=0;const i=this.#I.length;if(i>0){if(this.#V){if(0===this.#z||0===this.#j){const t=this.#I[0];this.#z=t.M132(),this.#j=t.M116(),this.#W>0&&this.#tt()}t=i*this.#z,e=i*this.#j}else for(let s,n=0;n<i;n++)s=this.#I[n],t+=s.M132(),e+=s.M116();(isNaN(t)||isNaN(e))&&this.Error("UpdateEntitiesSize","total width/height is NaN"),(t<0||e<0)&&this.Error("UpdateEntitiesSize","total width/height is negative",t,e)}return this.#F=t,this.#B=e,this.#K=!0,this}#et(t=-1){if(-1===t&&(t=this.#I.length),0===t)return this;this.#K||this.M23();const e=this.#C;let i=e?this.#F:this.#B,s=this.#W&&t>1;if(s){const n=e?this.#R:this.#D;s=i>n,s&&(this.#it(t,n,i),i-=(t-1)*this.#Y)}return e?(this.#q=this.#S(!0,!0,i,t),this.#$=this.#N(!1,!1,this.#B,t)):(this.#$=this.#S(!0,!1,i,t),this.#q=this.#N(!1,!0,this.#F,t)),s&&this.#st(e,t),t}#it(t,e,i){this.#C?this.#z:this.#j;const s=(i-e)/(t-1);this.#Y=s}#st(t,e){const i=t?this.#q:this.#$;for(let t=1;t<e;t++)i[t]-=t*this.#Y}M163(t=!0){this.#W=!!t,this.#W&&this.M14()}M139(t){return this.#V||0===t?t<0||t>1?(this.Error("SetTuck","Tuck must be [ 0 .. 1 ]",t),this):(this.#W=t,this.#tt(),void(this.#I.length>1&&this.M14())):(this.Error("SetTuck","Cannot tuck non-uniform entities"),this)}#tt(){if(!this.#V)return void(this.#Y=0);const t=this.#C?this.#z:this.#j;this.#Y=t*this.#W|0}M80(t,e){super.M80(t,e),this.#O=t,this.#P=e}M14(t=!0){const e=this.#I.length;if(0===e)return this;t&&this.#et(e);const i=this.#H;for(let t=0;t<e;t++){const s=this.#I[t];this.#X?s.M220(i+(e-t)):s.M220(i+t),s.M80(this.#q[t],this.#$[t]),s.IS_BOX&&s.M14(!0)}return this}#nt(t,e=-1){if(e<0&&(e=t.M119()),this.#X){const i=this.#I.length;t.M220(this.#H+(i-e))}else t.M220(this.#H+e);return t.M80(this.#q[e],this.#$[e]),this}#J(t){switch(t){case 3:return this.#rt.bind(this);case 1:return this.#at.bind(this);case 2:return this.#ht.bind(this);case 4:return this.#ot.bind(this);case 5:return this.#lt.bind(this);case 6:return this.#ct.bind(this);case 7:return this.#ut.bind(this)}}#dt(t,e,i){const s=(t?this.#U:this.#G).subarray(0,i),n=e?this.#O:this.#P;var r=e?this.#z:this.#j;if(t&&this.#V)for(var a=0;a<i;++a)s[a]=n+a*r;else{var h=n;for(a=0;a<i;++a){if(t&&a>0){if(!this.#V){const t=this.#I[a-1];r=e?t.M132():t.M116()}h+=r}s[a]=h}}return s}#at(t,e,i,s){return this.#dt(t,e,s)}#rt(t,e,i,s){const n=this.#dt(t,e,s),r=e?this.#R:this.#D,a=r-i>>1;var h=e?this.#z:this.#j;if(!t&&this.#V){const t=r-h>>1;for(var o=0;o<s;++o)n[o]+=t}else for(o=0;o<s;++o)if(t)n[o]+=a;else{if(!this.#V){const t=this.#I[o];h=e?t.M132():t.M116()}n[o]+=r-h>>1}return n}#ht(t,e,i,s){const n=this.#dt(t,e,s),r=e?this.#R:this.#D,a=Math.round(r-i);var h=e?this.#z:this.#j;if(!t&&this.#V){const t=r-h;for(var o=0;o<s;++o)n[o]+=t}else for(o=0;o<s;++o)if(t)n[o]+=a;else{if(!this.#V){const t=this.#I[o];h=e?t.M132():t.M116()}n[o]+=r-h}return n}#ut(t,e,i,s){const n=this.#dt(t,e,s),r=(e?this.#R:this.#D)>>1;var a=e?this.#z:this.#j;const h=n[0];for(var o=0;o<s;++o){if(!this.#V){const t=this.#I[o];a=e?t.M132():t.M116()}n[o]=h+r-(a>>1)}return n}#lt(t,e,i,s){if(s<2)return this.#at(t,e,i,s);const n=this.#dt(t,e,s),r=e?this.#R:this.#D,a=Math.round((r-i)/(s-1));for(var h=1;h<s;++h)n[h]+=h*a;return n}#ot(t,e,i,s){const n=this.#dt(t,e,s),r=e?this.#R:this.#D,a=Math.round((r-i)/(s+1));for(let t=0;t<s;++t)n[t]+=(t+1)*a;return n}#ct(t,e,i,s){if(s<2)return this.#rt(t,e,i,s);const n=this.#dt(t,e,s),r=((e?this.#R:this.#D)-i)/s,a=r>>1;for(let t=0;t<s;++t)n[t]+=a+t*r|0;return n}M84(t){return!Number.isFinite(t)||t<=0?(this.Error("SetMaxCount","Bad number",t),this):(this.#A=0|t,this)}M85(){return this.#A}M195(){return this.#I.length>=this.#A}M103(t){return"function"!=typeof t||(this.#T=t),this}M104(t){return this.#S=this.#J(t||4),this}M221(t){return"function"!=typeof t&&(t=this.#T),"function"!=typeof t||(this.#I.sort(t),this.#Z(),this.M14()),this}#Z(t=-1){if(t<0&&(t=this.#I.length),!(t<0))for(let e=0;e<t;++e)this.#I[e].M120(e)}M164(){const t=this.#I.length;return t<=1||(M21(this.#I),this.#Z(t),this.M14()),this}M165(){return 0===this.#I.length}M140(t){return this.#I.includes(t)}M141(){return this.#I.length}M166(t){if("function"!=typeof t)return this;const e=this.#I.length;for(let i,s=0;s<e;s++)i=this.#I[s],t(i);return this}M167(){return this.#I.length>0?this.#I[0]:null}M105(){if(this.#I.length<=0)return null;const t=this.#I[0];return this.M194(t),t}M168(){const t=this.#I.length;return t>0?this.#I[t-1]:null}M106(){const t=this.#I.length;if(t<=0)return null;const e=this.#I[t-1];return this.M194(e),e}M86(t){return t<0||t>=this.#I.length?(this.Error("GetEntityAt","Bad idx",t),null):this.#I[t]}M196(){return[...this.#I]}M87(t){return"function"!=typeof t?null:this.#I.filter(t)}M210(){const t=this.#I.length;if(0===t)return this;for(let e=0;e<t;e++){const t=this.#I[e];t.M136(),t.M13()}return this.#I.length=0,this.#F=0,this.#B=0,this.#K=!0,this}#_t(t=0){const e=this.#I.length+t;return e>this.#A?(this.Error("#PrepareBatchAdd","Total exceeds max_count",e),this):(e>0&&(this.#U=this.#Q(this.#U,e),this.#G=this.#Q(this.#G,e)),this)}M142(t,e=!0,i=0){const s=t.length;if(0===s)return this;if(this.M195())return this.Error("BatchAdd","I am full"),this;const n=this.M141()+s;if(n>this.M85())return this.Error("BatchAdd","Not enough space"),this;for(let e=0;e<s;e++){const i=t[e];if(!(i instanceof E))return this.Error("BatchAdd","Not a FlexBoxEntity",i),this;if(this.#I.includes(i))return this.Error("BatchAdd","Already here",i),this}const r=[...this.#I],a=r.length;this.#_t(s);for(let i=0;i<s;i++){const s=t[i];s.M191()&&s.M190().M194(s),s.M189(this),e?this.#I.push(s):this.#I.unshift(s);const n=this.#V?this.#z:s.M132(),r=this.#V?this.#j:s.M116();this.#F+=n,this.#B+=r}this.#K=!0,null!==this.#T&&this.#I.sort(this.#T),this.#Z(n),this.#et(n);for(let t=0;t<a;t++){const e=r[t];this.#nt(e)}if(0===i)for(let e=0;e<s;e++){const i=t[e];this.#nt(i)}else{let e=i;i<=1&&(e=this.M4(t[0])*i);let n=0;for(let i=0;i<s;i++){const s=t[i];setTimeout(()=>{this.#nt(s)},n),n+=e}}return this}M88(t=null,i=0){const s=null===t?[...this.#I]:t,n=s.length;if(0===n)return this;for(let t=0;t<n;t++){const e=s[t];if(!(e instanceof E))return this.Error("BatchRemove","Not a FlexBoxEntity",e),this;if(!this.#I.includes(e))return this.Error("BatchRemove","Not here",e),this}for(let t=n-1;t>=0;t--){const i=s[t];e.M20(this.#I,i),i.M136(),i.M13();const n=this.#V?this.#z:i.M132(),r=this.#V?this.#j:i.M116();this.#F-=n,this.#B-=r}this.#K=!0;const r=this.#I,a=r.length;if(this.#Z(a),this.#et(a),0===i)this.M14(!1);else{let t=i;i<=1&&(t=this.M4(r[0])*i);let e=t;for(let i=0;i<a;i++){const s=r[i];setTimeout(()=>this.#nt(s),e),e+=t}}return this}M4(t){if(!t.M219(this))return this.Error("GetEntityTranslationTime","Not here",t),0;const e=t.M119();return e<0||e>=this.#I.length?(this.Error("GetEntityTranslationTime","Bad index",t),0):t.M3(this.#q[e],this.#$[e])}M5(t){return t.EstimateTravelTime(this.M52(),this.M65())}M169(t=""){for(let t=0;t<this.#I.length;++t)this.#I[t];return!0}},L={smooth:!0,touch_down_events:!1,visible:!1,selected:!1,velocity_px_ms:1,flip_time:500,face_up:!0,flip_axis:"y"},k=class t extends E{static K106=110;#pt=null;#Mt=null;#ft=null;#mt=L.face_up;constructor(t){super(t,"Card_"+t,!0),this.#gt(t),e.M10(this,"BODY",this.#pt),e.M10(this,"FACE",this.#Mt),e.M10(this,"BACK",this.#ft),this.M211()}M161(){super.M161()}M211(e={}){for(const t in L){const i=e[t]??L[t];e[t]=i}this.M191()&&this.M190().M194(this),this.M13(),this.M117(e.smooth),this.M22(e.touch_down_events),this.M41(e.velocity_px_ms),this.M101(e.visible),this.M82(e.selected),this.M220(t.K106),this.M89(e.flip_time),this.M122(e.face_up),this.M90(e.flip_axis)}#gt(e){this.ELEMENT.classList.add("Card"),this.#pt=document.createElement("div"),this.#pt.classList.add("CardBody"),this.#pt.classList.add("Clickable"),this.#pt.dataset.idx=e,this.#pt.card=this,this.#pt.dataset.face=this.#mt?"up":"no",this.#pt.dataset.visible=this.M121()?"yes":"no",this.#Mt=document.createElement("div"),this.#Mt.classList.add("CardFace"),this.#ft=document.createElement("div"),this.#ft.classList.add("CardBack"),this.#pt.appendChild(this.#Mt),this.#pt.appendChild(this.#ft),this.ELEMENT.appendChild(this.#pt),this.M137(t.K106)}M15(){return this.#pt}M122(t=!0){return this.#mt=!!t,this.#pt.dataset.face=this.#mt?"up":"down",this.OnFlip&&this.OnFlip(t),this}M143(){return this.#mt}M107(){return!this.#mt}M24(t){return this.#pt.dataset.visible=t?"yes":"no",this}M32(t){return this.#pt.dataset.selected=t?"yes":"no",this}M89(t){return!Number.isFinite(t)||t<0?(this.Error("SetFlipTime","Bad number",t),this):(this.#pt.style.transitionDuration=t+"ms",this)}M90(t="x"){if("string"!=typeof t||1!==t.length)return this.Error("SetFlipAxis","Bad axis",t),this;if("x"!==(t=t.toLowerCase())&&"y"!==t)return this.Error("SetFlipAxis","Bad axis",t),this;const e="x"===t?"1":"0",i="y"===t?"1":"0";return this.#pt.style.setProperty("--ROT_X",e),this.#pt.style.setProperty("--ROT_Y",i),this}M222(){return this.#mt=!this.#mt,this.#pt.dataset.face=this.#mt?"up":"down",this.OnFlip&&this.OnFlip(this),this}};((t,e)=>{for(var i in e)b(t,i,{get:e[i],enumerable:!0})})({},{K55:()=>P,K56:()=>K,K86:()=>O,K70:()=>U,K71:()=>tt,K72:()=>D,K87:()=>A,K88:()=>R,K26:()=>J,K27:()=>X,K96:()=>q,K89:()=>$,K73:()=>G,K90:()=>Y,K74:()=>Q,K75:()=>W,K47:()=>Z,K57:()=>T,K58:()=>N,K76:()=>C,K28:()=>S,K77:()=>I,K114:()=>j,K78:()=>F,K33:()=>B,K59:()=>z,K79:()=>H,K60:()=>V});var C=0,I=6,T=10,N=14,S=15,A=63,R=15,D=15,P=1<<T,O=2<<T,K={[P]:"Black",[O]:"Red"},F=1<<I,B=2<<I,V=3<<I,z=4<<I,j=[F,B,V,z].sort(),H={[F]:"Clubs",[B]:"Diamonds",[z]:"Hearts",[V]:"Spades"},U=1<<N,G=0,q=1,$=11,W=12,Y=13,X=Math.min($,W,Y),J=Math.max($,W,Y),Q={[q]:"Ace",[$]:"Jack",[W]:"Queen",[Y]:"King"},Z={[q]:"A",[$]:"J",[W]:"Q",[Y]:"K"},tt={name:"Joker",suit:"joker",symbol:"JKR",rank:G,flag:U},et=class t extends k{static K96=1;#yt=!1;#wt=!1;#bt=!1;#Et=null;constructor(i,s){super(i),e.M10(this,"DNA",s);const n=s&A,r=s&R<<I,a=s&D<<T;this.#bt=n===q,e.M10(this,"RANK",this.#bt?t.K96:n),e.M10(this,"SUIT",r),e.M10(this,"COLOR",a),this.#yt=0!==(s&U),this.#wt=!this.#yt&&this.RANK>=X&&this.RANK<=J,this.#vt(),this.#xt()}M144(){return"("+this.IDX+") "+this.M91()+" of "+this.M92()}#vt(){const t=this.M91().toLowerCase(),e=this.M92().toLowerCase(),i=this.M213()?"red":"black",s=this.BODY;s.dataset.rank=t,s.dataset.suit=e,s.dataset.color=i,this.#yt?s.dataset.joker="yes":this.#wt&&(s.dataset.royal="yes")}#xt(){const t=this.M55().toUpperCase(),e=this.M92();this.FACE.innerHTML="";const i=document.createElement("p");i.innerText=t,this.#Et=i,this.#wt&&this.M54(this.RANK),this.FACE.appendChild(this.#Et);{const t=this.#Lt(e.toLowerCase());this.FACE.appendChild(t)}}M54(t){const e=document.createElement("span");e.innerText=t,this.#Et.appendChild(e)}#Lt(t){this.M213();const e=document.createElementNS("http://www.w3.org/2000/svg","svg");return e.setAttribute("class","SuitIcon"),e.innerHTML=`<use href="#suit-${t}"/>`,e}M156(t,e){super.M156(t,e),this.FACE.style.fontSize=Math.round(.4*t)+"px"}static async M123(t){try{const e=M31("flex-box/"),i=await fetch(e+t),s=await i.text(),n=document.getElementById("card-sprite-sheet");n&&n.remove();const r=document.createElement("div");r.id="card-sprite-sheet",r.style.display="none",r.innerHTML=s,document.body.appendChild(r)}catch(t){}}M170(){return this.#yt}M171(){return this.#wt}M212(){return this.#bt}M145(){return!this.#yt&&!this.#wt}M213(){return this.COLOR===O}M172(){return this.COLOR===P}M197(){return this.RANK===$}M173(){return this.RANK===W}M198(){return this.RANK===Y}M199(){return this.RANK%2==0}M214(){return this.RANK%2!=0}M200(t){return this.SUIT===t}M91(){return this.#yt?tt.name:this.#bt?Q[q]:Q[this.RANK]||this.RANK.toString()}M92(){return this.#yt?tt.suit:H[this.SUIT]||"Unknown"}M55(){return this.#yt?tt.symbol:this.#bt?Z[q]:Z[this.RANK]||this.M91()}M66(){return K[this.COLOR]||"Unknown"}},it=1/0,st=!0,nt=!0,rt=class extends x{#mt=nt;#kt=st;constructor(t,e,i,s,n,r,a={}){const{max_cards:h=it,flip_after:o=st,face_up:l=nt,sorting:c=null,tuck:u=!1,uniform:d=!0,parent:_=null,reverse_z:p=!1}=a;super(t,e,i,s,n,r,{max_count:h,sorting:c,tuck:u,uniform:d,parent:_,reverse_z:p}),this.M43(et.K106),this.ELEMENT&&this.ELEMENT.classList.add("BoxOfCards"),this.M122(l),this.M67(o)}#Ct(t,e){t.M122(e)}M229(t,e=!0){return t instanceof et?(super.M229(t,e),this.#kt?t.M81(this.#Ct.bind(this,t,this.#mt)):t.M122(this.#mt),this):(this.Error("Add","Not a Card instance",t),this)}M192(t){return this.M229(t,!1)}M193(t){return this.M229(t,!0)}M140(t){return t instanceof et?super.M140(t):(this.Error("Includes","Not a Card instance",t),this)}M142(t,e=!0,i=0){const s=t.length;if(0===s)return this;for(let e=0;e<s;e++){const i=t[e];if(!(i instanceof et))return this.Error("BatchAdd","Not a Card instance",i),this}if(this.M141()+s>this.M85())return this.Error("BatchAdd","I am full"),this;super.M142(t,e,i);for(let e=0;e<s;e++){const i=t[e];this.#kt?i.M81(this.#Ct.bind(this,i,this.#mt)):i.M122(this.#mt)}return this}M194(t){return t instanceof et?(super.M194(t),this):(this.Error("Remove","Not a Card instance",t),this)}M88(t=null,e=0){const i=null===t?[...this.GetEntities()]:t,s=i.length;if(0===s)return this;for(let t=0;t<s;t++){const e=i[t];if(!(e instanceof et))return this.Error("Remove","Not a Card instance",e),this}return super.M88(t,e),this}M124(t){return super.M86(t)}M122(t=!0){return this.#mt=!!t,this}M67(t=!0){return this.#kt=!!t,this}};function at(t,e){return t.IDX-e.IDX}var ht=class{#It=[];#Tt=[];#Nt=[];#St=null;#At=0;#Rt=[];constructor(t={},e={}){const{jokers:i=0,exclude_ranks:s=[],exclude_cards:n=[],suits:r=j,seed:a=0}=t;this.#At=a,this.#Dt(r,s,n,i),this.#St={smooth:e.smooth??!0,touch_down_events:e.touch_down_events??!0,velocity_px_ms:e.velocity_px_ms??100,flip_time:e.flip_time??500,face_up:e.face_up??!0,visible:e.visible??!0,flip_axis:e.flip_axis??"y"},this.M211()}#Pt(t,e,i){return(t&A)===e&&(t&R<<I)===i}#Dt(t,e,i,s){for(const s of t){const t=s===B||s===z?O:P;for(let n=1;n<=13;n++){if(e.includes(n))continue;if(i.some(t=>this.#Pt(n|s,t.rank,t.suit)))continue;const r=n|s|t,a=new et(this.#It.length,r);this.#It.push(a)}}for(let t=0;t<s;t++){const e=U|(t%2==0?P:O),i=new et(this.#It.length,e);this.#It.push(i)}}M93(t){let e=0;for(const i of t)for(let t=0;t<this.#It.length;++t){const s=this.#It[t];if(this.#Pt(s.DNA,i.rank,i.suit)){e+=1,this.#It.splice(t,1),this.#Rt.push(s);break}}this.#Ot()}M68(t){}#Ot(){this.#Nt=[],this.#Tt=this.#It.map((t,e)=>e)}M211(t={}){this.#Ot();const e=new Set;this.#It.forEach(t=>{const i=t.M190();i&&e.add(i)}),e.forEach(t=>t.M210());const i=this.#St;for(const e in t)i.hasOwnProperty(e)&&(i[e]=t[e]);for(const t of this.#It)t.M211(i);return this}M223(t=null,e=0){if(null===t)return this;const i=this.M175(),s=e>0;return this.M166(t=>{t.M101(s),t.M117(s),t.M89(0),t.M122(!1)}),t.M142(i,!0,e>0?e:0),this.M166(t=>{t.M89(this.#St.flip_time),t.M117(this.#St.smooth)}),this}M164(t=0){let i=Math.random;0!==(t=t||this.#At)&&(t="string"==typeof t?M99(t):t,i=e.M37(t));const s=this.#Tt;for(let t=s.length-1;t>0;t--){const e=Math.floor(i()*(t+1));[s[t],s[e]]=[s[e],s[t]]}return this}M174(t=0){return this.#At="string"==typeof t?M99(t):0|t,this.#At}M224(){if(0===this.#Tt.length)return null;const t=this.#Tt.pop();return this.#Nt.push(t),this.#It[t]}M175(){const t=[];return this.#Tt.forEach(e=>{t.push(this.#It[e])}),this.#Nt=this.#Tt,this.#Tt=[],t}M146(){const t=this.#Tt[this.#Tt.length-1];return this.M176(t)}M176(t){return this.#It[t]}M56(t){if("function"!=typeof t)return[];const e=[];for(let i=this.#Tt.length-1;i>=0;i--){const s=this.#Tt[i],n=this.#It[s];t(n)&&(this.#Tt.splice(i,1),this.#Nt.push(s),e.push(n))}return e}M69(t,e){t|=0,e|=0,this.#It.forEach(i=>i.M156(t,e))}M177(){return this.#It.length}M33(){return this.#Tt.length}M166(t){return"function"!=typeof t||this.#It.forEach((e,i)=>t(e,i)),this}M34(t,e){const i=t.SUIT,s=e.SUIT;return i<s?-1:i>s?1:Math.sign(t.RANK-e.RANK)}},ot="off",lt=class extends rt{static K61=ot;static K62="top";static K34="right";static K29="bottom";static K48="left";#Kt=null;#Ft=!1;#Bt=0;#Vt=null;constructor(t,i,s={}){const{max_cards:n=1/0,counter_position:r=ot,pop_effect:a=!1,face_up:h=!0,parent:o=null}=s;super(t,i,x.K118,x.K113,x.K108,!0,{max_cards:n,parent:o}),this.#zt(),this.#jt(),this.M25(r),this.M70(a),this.M122(h),e.M10(this,"COUNTER",this.#Kt)}#zt(){const t=this.ELEMENT;t.classList.add("PileOfCards");const e=document.createElement("span");e.classList.add("PileCounter"),e.innerText="0",t.appendChild(e),this.#Kt=e}M229(t,e=!0){return super.M229(t,e),this.#Ht(t,e),this}#Ht(t,e=!0){t.M135()?(this.#Bt++,t.M81(()=>{this.#Bt--,this.#jt(),this.#Ut(e?t:null),e||this.#Vt===t||t.M101(!1)})):(this.#Ut(e?t:null),e||this.#Vt===t||t.M101(!1),this.#jt())}#Ut(t=null){const e=this.M141();if(0===e)return void(this.#Vt=null);const i=this.#Vt;if(null===t)for(let i=e-1-this.#Bt;i>=0;--i){const e=this.M86(i);if(!e.M133()){t=e;break}}i!==t&&(i&&i.M101(!1),this.#Vt=t,t.M101(!0))}M142(t,e=!0){super.M142(t,e);const i=t.length;let s;for(let e=0;e<i;e++)s=t[e],s.M101(!1);return this.#jt(),this.#Ut(e?s:null),this}M194(t){return super.M194(t),this.#Gt(t),this}#Gt(t,e=!0){t.M101(!0),t.M133()&&this.#Bt--,e&&(this.#Vt===t&&(this.#Vt=null,this.#Ut(null)),this.#jt())}M88(t=null,e=0){const i=this.#Vt,s=null===t?[...this.GetEntities()]:t,n=s.length;if(0===n)return this;super.M88(t,e);for(let t=0;t<n;t++){const e=s[t];this.#Gt(e,!1)}return s.includes(i)&&this.#Ut(),this.#jt(),this}M210(){return super.M210(),this.#Vt=null,this.#Bt=0,this.#jt(),this}M147(t){return this.M229(t,!0)}M94(t){return this.M229(t,!1)}M95(){const t=this.M168();return t&&this.M194(t),t}M46(){const t=this.M167();return t&&this.M194(t),t}M188(){return this.M168()}M125(){return this.M167()}M164(){const t=this.M141();if(t>0&&this.#qt(),t<=1)return;const e=this.#Vt;super.M164();const i=this.M86(t-1);return e!==i&&(e.M101(!1),i.M101(!0),this.#Vt=i),this}M25(t){return this.ELEMENT.dataset.counter=t,this}M70(t){return this.#Ft=!!t,this}#jt(){const t=this.M141()-this.#Bt;this.#Kt.innerText=t,this.#Ft&&this.#qt()}#qt(){const t=this.#Kt;t.classList.remove("PopEffect"),this.M79(),t.classList.add("PopEffect")}debug(){const t=this.M141();for(let e=0;e<t;++e)this.M86(e)}M178(){const t=this.M141();return 0===t?null:this.M86(t-1)}M108(){return 0===this.M141()?null:this.M86(0)}},ct=class{#$t;#Wt=[];#Yt;#Xt={};#Jt=null;#Qt="";constructor(t,e,i){this.#$t=t+"_",this.#Yt=e,this.#Qt=i??""}M126(t,e){this.#Wt.push({id:t,schema:e}),e.forEach(t=>{const e=localStorage.getItem(this.#$t+t.id);null!==e?this.#Xt[t.id]=this.#Zt(e):(this.#Xt[t.id]=t.default,this.M225(t.id,t.default))})}#Zt(t){return"true"===t||"false"!==t&&(isNaN(t)||""===t?t:Number(t))}M201(){for(const{id:e,schema:i}of this.#Wt)this.#te(t(e),i)}#te(t,e){if(!t)throw new Error("SettingsManager::RenderTo » No parent");this.#Jt=t;const i=e.map(t=>this.#ee(t));this.#Jt.innerHTML=i.join(""),this.#Jt.querySelectorAll("INPUT").forEach(t=>{this.#ie(t).classList.contains("AppSettingNotImplemented")||t.classList.add("Clickable")}),this.#Jt.querySelectorAll("LABEL").forEach(t=>{this.#ie(t).classList.contains("AppSettingNotImplemented")||t.classList.add("Clickable")}),this.#se()}#ie(t){let e=t.parentElement;do{if("DIV"===e.tagName&&e.classList.contains("AppSettingsRow"))return e;e=e.parentElement}while(null!==e);return e}#ee(t){const e=this.#Xt[t.id];let i="";"radio"===t.type?i=t.options.map((i,s)=>`\n                <label>\n                    <input type='radio' name='${t.id}' value='${s}' ${e===s?"checked":""}>\n                    ${i}\n                </label>\n            `).join(""):"range"===t.type?i=`\n                <input type='range' id='${t.id}' \n                    min='${t.min}' max='${t.max}' step='${t.step}' \n                    value='${e}'>\n            `:"checkbox"===t.type?i=`\n                <input type='checkbox' id='${t.id}' ${e?"checked":""}>\n            `:"text"===t.type&&(i=`\n                <input type='text' id='${t.id}' \n                    value='${e}'>\n            `);let s="AppSettingsRow";return t.not_implemented&&(s+=" AppSettingNotImplemented"),`\n            <div class='${s}' data-setting-id='${t.id}'>\n                <p class='AppSettingsMainLabel'>${t.label}</p>\n                <div class='AppSettingsInputWrapper'>${i}</div>\n            </div>\n        `}#se(){this.#Jt.addEventListener("input",t=>{t.stopPropagation(),t.preventDefault();const e=t.target,i=e.name||e.id;let s="checkbox"===e.type?e.checked:e.value;isNaN(s)||"range"!==e.type||(s=Number(s)),this.M57(i,s)}),this.#Jt.addEventListener(this.#Qt,t=>{"INPUT"===t.target.tagName&&(t.is_onesie_ui=!0),"LABEL"===t.target.tagName&&(t.is_onesie_ui=!0)})}M57(t,e){this.#Xt[t]=e,this.M225(t,e),this.#Yt&&this.#Yt(t,e)}M225(t,e){localStorage.setItem(this.#$t+t,e)}M230(t){return this.#Xt[t]}},ut="https://",dt="rqhvlh0vwdwv",_t=window.visualViewport,pt="AppRotate",Mt="AppError",ft="AppErrorInfo",mt="AppViewport",gt="PageHidden",yt="Hidden",wt=pt.toLowerCase(),bt=Mt.toLowerCase(),Et="Home".toLowerCase(),vt="Play".toLowerCase(),xt=class s{static K91=1;static K97=2;static K116=3;#ne=null;#re=null;#ae=new Map;#he=s.K91;#oe=null;#le=null;#ce=null;#ue=null;#de=null;#_e=null;#pe=null;#Me=null;#fe=null;#me=null;#ge=null;#Qt="";#ye=!0;#we=null;#be=null;constructor(t={}){this.#Qt=e.M130?"touchstart":"click",this.#Ee(t);const i=t.start_page||Et;requestAnimationFrame(()=>this.M149(i))}#Ee(t){if(this.#ne=document.getElementById(mt),null===this.#ne)throw new Error("App » Element not found: #"+mt);this.#ve();const e=this.#ae.get(wt);if(!e)throw new Error("App » Element not found: #"+pt);e.classList.add(pt);const i=this.#ae.get(bt);if(!i)throw new Error("App » Element not found: #"+Mt);if(i.classList.add(Mt),this.#le=document.getElementById(ft),!this.#le)throw new Error("App » Element not found: #"+ft);this.#xe(t),this.#Le(),this.#ke(),this.#Ce(),this.#Ie(t),this.#Te(t),this.#he=t.page_mode??1,this.#Ne(),this.#Me=t.on_resize||this.#Me||null,this.#fe=t.on_click||this.#fe||null,this.#me=t.on_page||this.#me||null}#xe(t){const e=new k("Onesie");e.M101(!0),e.M122(!1),e.M117(!1),this.#_e=e;const i=this.#ae.get(Et);if(i.appendChild(e.ELEMENT),i.classList.add("Clickable"),t.blank_card)return;const s=t.game_name||"Some Card Game",n=t.game_designer||"Some Great Designer",r=t.game_build||("undefined"!=typeof BUNDLE_ID?BUNDLE_ID:"0000-0000-0000"),a="p";if(!t.blank_back){const t=document.createElement(a);t.classList.add("h1"),t.innerHTML="ONESIE",e.BACK.appendChild(t);const i=document.createElement(a);i.classList.add("h2"),i.innerHTML="1p card games",e.BACK.appendChild(i);const s=document.createElement(a);s.classList.add("h3"),s.innerHTML="build:<br><span>"+r+"</span>",e.BACK.appendChild(s)}if(!t.blank_face){const t=document.createElement(a);t.classList.add("h1"),t.innerHTML=s;const i=document.createElement(a);i.classList.add("h2"),i.innerHTML="<small>designed by:</small><br>"+n;const h=document.createElement(a);h.classList.add("h2"),h.innerHTML="<small>coded by:</small><br>Pedro Fontoura";const o=document.createElement(a);o.classList.add("h3"),o.innerHTML="build:<br><span>"+r+"</span>";const l=document.createElement(a);l.classList.add("h3"),l.innerHTML="♦ a solitaire card game ♦";for(const s of[t,l,i,h])e.FACE.appendChild(s)}}#ve(){document.querySelectorAll("#"+mt+" > section").forEach(t=>{this.#ae.set(t.id.toLowerCase(),t),t.classList.add(gt)})}#Ce(){window.addEventListener("resize",()=>this.#Ne()),window.addEventListener("contextmenu",t=>{if(t.preventDefault(),t.stopPropagation(),"touchstart"===this.#Qt)return;const e=new MouseEvent(this.#Qt,{view:window,bubbles:!0,cancelable:!0,clientX:t.clientX,clientY:t.clientY});t.target.dispatchEvent(e)},{passive:!1}),window.addEventListener("unhandledrejection",t=>{if(t.preventDefault(),t.stopPropagation(),t.reason.stack){const e=[this.#Se(t.reason.stack)].join("<br>");this.#Ae("Rejected",e)}else this.#Ae("Rejected",t.reason.message)}),window.addEventListener("error",t=>{t.preventDefault(),t.stopPropagation();const e=[t.error.message,t.error.fileName,t.error.lineNumber,this.#Se(t.error.stack)].join("<br>");this.#Ae("Error",e)}),this.#ue.addEventListener(this.#Qt,t=>{this.#Re(),t.stopPropagation(),this.#de.classList.toggle(yt)}),Array.from(this.#de.children).forEach(t=>{const e=this.#De(t);this.#ae.get(e)?t.addEventListener(this.#Qt,t=>{this.#Re(),t.stopPropagation(),this.#Pe(t)}):t.remove()}),this.#_e.M15().addEventListener(this.#Qt,t=>{this.#Re(),t.stopPropagation(),this.#_e.M143()?this.M149(vt):this.#_e.M222()}),this.M179(Et).addEventListener(this.#Qt,t=>{this.#Re(),t.stopPropagation(),this.#_e.M222()}),window.addEventListener(this.#Qt,t=>{t.stopPropagation(),this.#Oe(t)})}#Re(){e.M61||e.M130&&e.M30()}#Pe(t){const e=this.#De(t.target);this.#ae.get(e)&&this.M149(e)}#Oe(t){if(t.is_onesie_ui)return;let e=0,i=0;if("touchstart"===this.#Qt){const s=t.touches[0];e=s.clientX,i=s.clientY}else e=t.clientX,i=t.clientY;if(this.#fe){if(!this.#ye)return;this.#fe(t.target,0|e,0|i)}}#Le(){this.#ce=document.getElementById("AppSideMenu"),this.#ue=document.getElementById("AppSideMenuMain"),this.#de=document.getElementById("AppSideMenuGroup"),this.#de.classList.add(yt),e.M130&&this.#ce.classList.add("TopSpacing")}#Se(t){return"string"==typeof t?t.split("at ").join("<br>&bull; "):"Stack: "+t}#Ae(t,e){null!==this.#le&&(this.#le.innerHTML+="<h3>"+t+"</h3>"+e,this.M149(bt))}#Ne(){const t=_t.width,e=_t.height;if(this.#Ke(),this.#_e){const i=.75*Math.min(t,e)|0,s=.7*i|0;this.#_e.M156(s,i),this.#_e.M80(t-s>>1,e-i>>1)}this.#Me&&this.#Me(t,e,this.#ce.offsetWidth)}get M215(){return _t.width}get M202(){return _t.height}#Ke(){3!==this.#he&&((Math.sign(_t.width-_t.height)>=0?1:2)!==this.#he?this.#re!==wt&&(this.#oe=this.#re,this.M149(wt)):null!==this.#oe&&(this.M149(this.#oe),this.#oe=null))}async#ke(){await this.M127("./assets/app_icons.svg","icons-sprite-sheet")}async M127(t,e){try{const i=await fetch(t),s=await i.text(),n=document.getElementById(e);n&&n.remove();const r=(new DOMParser).parseFromString(s,"image/svg+xml").querySelector("svg");r&&(r.id=e,r.style.display="none",document.body.insertAdjacentElement("afterbegin",r))}catch(t){}}async M148(t){try{const e=await fetch(t);return e.ok?await e.json():null}catch(t){return null}}#De(t){const e=t.querySelector("use");if(e)return(e.getAttribute("href")||e.getAttribute("xlink:href")).split("-").pop().toLowerCase()}get M109(){return this.#ce.offsetWidth}get M226(){return this.#_e}M149(t,e=!1){const i=this.#re===t;t=t.toLowerCase();const s=this.#ae.get(t);if(!s)throw new Error("App » No such page: "+t);t===vt&&this.#ye,this.#re&&this.#ae.get(this.#re).classList.add(gt),s.classList.remove(gt),this.#re=t,t===Et?this.#ce.classList.add(yt):this.#ce.classList.remove(yt);const n=this.#_e;n&&n.M122(!1),this.#me&&!e&&this.#me(t,i)}M128(t){return this.#re===t}M179(t){const e=this.#ae.get(t);if(!e)throw new Error("App » No such page: "+t);return e}M71(){const t=window.matchMedia("(display-mode: standalone)").matches,e=!0===window.navigator.standalone;return t||e}M150(t=!0){(t=!!t)&&this.#ye?this.#de.classList.remove(yt):this.#de.classList.add(yt)}M44(t,e){t.classList.add("Clickable"),t.addEventListener(this.#Qt,i=>{i.preventDefault(),i.stopPropagation(),e(t)})}get M231(){const t=new Date,i=`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}-${String(t.getHours()).padStart(2,"0")}-${String(t.getMinutes()).padStart(2,"0")}`;return e.M99("Onesie"+i)}async M96(t=!0){const i=await this.#Fe();if("Wrpq}Qjt7qxvn"===e.M62(i,9))return this.#ye=!0,!0;let s=!1;return window.top===window.self&&"ynm{x6oxw}x~{j7pr}q~k7rx"===e.M62(window.location.hostname,9)&&(s=e.M29("key",0,!0)===this.M231),this.#ye=s,!s&&t&&this.#Be(),s}#Be(){const t=ut+e.M62("ynm{x6oxw}x~{j7pr}q~k7rx8xwn|rn8HyjpnFyuj",-9);self.location.replace(t)}#Fe=async()=>(await fetch(window.location.href,{method:"HEAD"})).headers.get("server");async M58(t,i=!0){const s=ut+e.M62("etm2gsyrxivetm2hiz3z6",-4)+"/"+e.M62(dt,-3)+"/"+e.M62(t,-5)+"/"+(i?"up":"down");if(!e.M61)try{const t=await fetch(s),e=await t.json();e.data&&e.data}catch(t){}}#Ie(e={}){const i=e.settings||{};"function"==typeof i.on_change&&(this.#ge=i.on_change),this.#pe=new ct(i.prefix??"GAME",this.#Ve.bind(this),this.#Qt),t("GameSettings")&&this.#pe.M126("GameSettings",i.schema||[]),t("GeneralSettings")&&this.#pe.M126("GeneralSettings",[{id:"deck_seed",label:"Deck seed",type:"text",default:"",not_implemented:!0},{id:"cards_theme",label:"Cards theme",type:"radio",options:["Normal","Vintage","Modern"],default:0,not_implemented:!0},{id:"cards_axis",label:"Cards flip axis",type:"radio",options:["Random","X","Y"],default:0,not_implemented:!0},{id:"cards_speed",label:"Cards speed",type:"range",min:1,max:5,step:1,default:3},{id:"cards_flip",label:"Cards flip time",type:"range",min:1,max:5,step:1,default:3}]),this.#pe.M201()}#Te(i){const s=t("Stats");if(!s)return;const n=document.createElement("dl"),r=document.createElement("dt");r.innerHTML="Global stats";const a=document.createElement("dd");a.innerHTML="Wins: <span id='stats_wins'>#</span>";const h=document.createElement("dd");h.innerHTML="Losses: <span id='stats_losses'>#</span>",n.appendChild(r),n.appendChild(a),n.appendChild(h),s.appendChild(n),"function"==typeof Counter&&(this.#we=new Counter({debug:!0,timeout:8e3,workspace:e.M62(dt,-3)}),"string"==typeof i.counter&&this.M110(i.counter,"get"))}async M110(t,i="get"){if(!["get","up","down"].includes(i))return;const s=e.M62(t,-5);if(!e.M61&&null!==this.#we)try{const t=await this.#we[i](s);"200"===t.code&&s.endsWith("-play")&&this.#ze(t)}catch(t){}}#ze(e){t("stats_wins")&&(t("stats_wins").innerHTML=e.data.up_count),t("stats_losses")&&(t("stats_losses").innerHTML=e.data.down_count)}M111(t,e=!1){const i=this.#pe.M230(t);return e?"cards_speed"===t?this.#je(i):"cards_flip"===t?this.#He(i):i:i}#Ve(t,e){switch(t){case"cards_theme":return void this.#Ue(e);case"cards_flip":if(null!==this.#be)return void this.#Ge(e);break;case"cards_speed":if(null!==this.#be)return void this.#qe(e)}null!==this.#ge&&this.#ge(t,e)}#Ue(t){const e="./assets/"+"theme-#.svg".replace("#",t);this.M127(e,"card-sprite-sheet")}#je(t){return i.M208(t||3,1,5,.25,2)}#qe(t){if(null===this.#be)return;const e=this.#je(t);this.#be.M166(t=>t.M41(e))}#He(t){return i.M208(t||3,1,5,100,1100)}#Ge(t){if(null===this.#be)return;const e=this.#He(t);this.#be.M166(t=>t.M89(e))}M180(t){this.#be=t??null,this.#qe(this.#pe.M230("cards_speed")),this.#Ge(this.#pe.M230("cards_flip")),this.#Ue(this.#pe.M230("cards_theme"))}},Lt="fsm_data_changed",kt=class{#$e=()=>{};V45=!0;V42=new Map;V23=null;V32={};V28=[];V29=[];constructor(t,e=[]){if(this.#$e=t,e.length>0)for(const t of e)this.V28.push(t)}M47(t){this.#We(t)}M59(t){if(null!==t&&!this.V42.has(t))throw new Error("FSM::AssertStateId » Unknown id: "+t)}M60(t){if(!this.V32.hasOwnProperty(t))throw new Error("FSM::AssertDataKey » Unknown key: "+t)}M72(t,e,i=null){this.M59(t),this.M59(e),null!==t&&t!==this.V23.ID||this.#We(e,i)}#We(t,e=null){if(this.V23&&this.V23.M227(),this.V23=this.V42.get(t),!this.V23)throw new Error("FSM::#TransitionTo » No state! Key:",t);return this.V23.M216(e),!0}M48(t){if(null!==t)return this.M59(t),this.V23.ID===t}M73(t,e={}){this.M59(t);for(const[t,i]of Object.entries(e))this.M60(t),i!==this.V32[t]&&(this.V32[t]=i,this.#Ye(t,i));return this.M48(t)}#Ye(t,e){this.V28.includes(t)&&this.#Xe(Lt,{key:t,value:e})}M74(t,e){if(this.M59(t),"string"==typeof e)return this.M60(e),this.V32[e];const i={};for(const t of e)this.M60(t),this.V32[t],i[t]=this.V32[t];return i}M151(){const t=this.V32;for(const[e,i]of Object.entries(t));}M203(t=null,e,i){t&&this.M59(t),this.#Xe(e,i)}#Xe(t,e){this.#$e(t,e)}M129(t){this.M59(t),this.V23&&(this.V23.Sleep(),this.V29.push(this.V23)),this.V23=this.V42.get(t),this.V23.M216()}M152(){const t=this.V29;if(0===t.length)throw new Error("FSM::PopState » Stack is empty");this.V23.M227(),this.V23=t.pop(),this.V23.WakeUp()}},Ct=class{constructor(t,i){e.M10(this,"ID",t),e.M10(this,"CONTROLLER",i)}M216(t){}M227(){}M181(t,e){return!1}M97(t,e){return!1}M112(t,e){return!1}M203(...t){return this.CONTROLLER.M203(this.ID,...t)}M182(...t){return this.CONTROLLER.M74(this.ID,...t)}M183(...t){return this.CONTROLLER.M73(this.ID,...t)}M72(...t){return this.CONTROLLER.M72(this.ID,...t)}},It=class extends Ct{constructor(t){super(t)}},Tt=class extends Ct{constructor(t,e){super(t,e)}M216(){this.M203(f,!0);const t=this.CONTROLLER.M28(this.ID);this.M203(p,{key:"game_over",value:!0,center:t})}},Nt=class extends Ct{constructor(t,e){super(t,e)}M216(){this.M203(f,!1)}},St=class extends Ct{constructor(t,e){super(t,e)}async M216(){const t=this.CONTROLLER.M26(this.ID);if(0===t)return void(0===this.CONTROLLER.M36(this.ID)?this.M72(n):this.M72(h));const e=this.CONTROLLER.M36(this.ID);let i=Math.min(t,4-e);for(;i-- >0;)await this.CONTROLLER.M49(this.ID);this.M72(h)}},At=class extends Ct{constructor(t,e){super(t,e)}M216(){if(0===this.CONTROLLER.M27(this.ID))return void this.M72(o);const t=this.CONTROLLER.M8(this.ID);this.M203(p,{key:"player_discard",value:!0,center:t})}M97(t,e){return e===y?(t.M45(),!0):e===g&&(this.#Je(),!0)}M181(t,e){return e===g?(this.#Je(),!0):e===y&&(this.CONTROLLER.M6(this.ID),!0)}async#Je(){const t=this.CONTROLLER.M1(this.ID);t>0&&await this.CONTROLLER.M2(this.ID),this.M72(o,t)}},Rt=class extends Ct{constructor(t,e){super(t,e)}async M216(t){this.M203(p,{key:"player_discard",value:!1,center:null});const e=4-this.CONTROLLER.M27(this.ID);e>0&&(this.CONTROLLER.M16(this.ID)<e&&await this.CONTROLLER.M35(this.ID),await this.CONTROLLER.M38(this.ID,e)),this.M72(l)}},Dt=class extends Ct{constructor(t,e){super(t,e)}M216(){const t=this.CONTROLLER.M28(this.ID);this.M203(p,{key:"enemy_row",value:!0,center:t})}M97(t,e){if(e===y)return t.M45(),!0;if(e===w){const e=this.#Qe(t);if(null!==e)return this.M203(p,{key:"enemy_row",value:!1}),this.M72(e,t),!0}return!1}#Qe(t){const e=this.CONTROLLER.M17(this.ID),[i,s]=this.#Ze(e),n=t.SUIT,r=t.RANK;return i===n&&s>=r?c:1===e.length?(this.CONTROLLER.M9(this.ID,t),d):2===e.length?u:null}#Ze(t){if(0===t.length)return[null,0];let e=null,i=0,s=0,n=0,r=!0;for(const a of t)if(a.M170())n+=1;else if(null===e&&(e=a.SUIT),a.SUIT===e){const t=a.M212()?14:a.RANK;i+=t,t>s&&(s=t)}else r=!1;return r?(n>0&&(i+=n*s),[e,i]):[null,0]}},Pt=class extends Ct{constructor(t,e){super(t,e)}async M216(t){const e=this.CONTROLLER.M17(this.ID);e.push(t);for(const t of e)t.M82(!1),t.M122(!1),this.CONTROLLER.M12(this.ID,t);await t.M118(),(t.M212()||t.M171())&&this.CONTROLLER.M11(this.ID),this.M72(a)}},Ot=class extends Ct{constructor(t,e){super(t,e)}async M216(t){const e=this.CONTROLLER.M17(this.ID);for(const t of e)if(t.M82(!1),t.M122(!1),await this.CONTROLLER.M18(this.ID,t),this.#ti(t))return this.#ei(t);t.M122(!1),await this.CONTROLLER.M39(this.ID,t),this.M72(a)}#ti(t){return t.M171()||t.M212()}#ei(t){t.M122(!0),this.M72(r)}},Kt=class extends Ct{constructor(t,e){super(t,e)}async M216(t){const e=this.CONTROLLER.M17(this.ID).pop();return e.M82(!1),await this.CONTROLLER.M18(this.ID,t),this.#ti(t)?this.#ei(t):(e.M122(!1),await this.CONTROLLER.M18(this.ID,e),this.#ti(e)?this.#ei(e):void this.M72(a))}#ti(t){return t.M171()||t.M212()}#ei(t){t.M122(!0),this.M72(r)}},Ft=class extends kt{static K49=Lt;#be=null;#ii=0;#si=null;#ni=null;#ri=null;#ai=null;#hi=null;#oi=null;#li=null;#ci=null;#ui=0;#di=null;#_i={position:new Array(2),status:0};#pi=null;constructor(t={}){const{on_message_request:e,V28:i=[],parent_node:n=window.document.body}=t;super(e,i),this.#pi=n,this.#Mi();for(const t of i)this.V32.hasOwnProperty(t);this.#fi(),this.M47(s),E.K32=!1,et.K96=14,this.#mi()}#Mi(){}#fi(){const t=[[s,It],[n,Tt],[r,Nt],[a,St],[h,At],[o,Rt],[l,Dt],[c,Pt],[u,Ot],[d,Kt]];for(const[e,i]of t)this.V42.set(e,new i(e,this))}M73(t,e){return super.M73(t,e),this.#gi(),this.V23.ID===t}#gi(){}async M181(t,e,i){let s=!1;this.V45||(s=await this.#yi(t)),this.#_i.position[0]=e,this.#_i.position[1]=i,this.#_i.status=s,this.M203(null,M,this.#_i)}async#yi(t){if(!t.classList.contains("Clickable"))return!1;if(t.classList.contains("CardBody")){const e=parseInt(t.dataset.idx),i=this.#be.M176(e),s=this.#wi(i);return this.V23.M97(i,s)}const e=this.#bi(t);return await this.V23.M181(t,e)}#wi(t){const e=t.M190();return e===this.#ai?y:e===this.#ri?w:e===this.#oi?g:m}#bi(t){return t===this.#oi.ELEMENT?g:t===this.#ai.ELEMENT?y:m}M217(s={}){const n=e.M29("seed",Date.now()%1e6,!0);this.M203(null,_,n),this.#be.M211(s).M164(n).M223(this.#si),this.V45||(this.#Ei(),this.#vi());const r=i.M64()?"x":"y";this.#be.M166(t=>{const e=t.BODY.style;e.transition="none",t.M90(r),t.M79(),e.transition=""});const h=t("AppErrorHistory");h&&(h.innerHTML=""),this.#ui=0,this.#li.innerHTML=16,this.#ci.innerHTML=0,this.#xi(()=>{this.V45=!1,this.M47(a)})}async#xi(t){const i=this.#si,s=i.M87(t=>t.M170()||2<=t.RANK&&t.RANK<=4);s.forEach(t=>{t.M117(!1),t.M79()}),i.M88(s),this.#hi.M142(s);const n=[];for(let t=1;t<=4;++t){const t=this.#si.M95();n.push(t),this.#ri.M229(t)}await Promise.all(n.map(t=>t.M118())),await e.M207(500),n.filter(t=>t.M171()||t.M212()).forEach(t=>{t.M122(!1),this.#si.M94(t)}),await e.M207(64),s.forEach(t=>{t.M117(!0),t.M79()});const r=[];for(let t=1;t<=4;++t){const t=this.#hi.M95();r.push(t),this.#ai.M229(t)}t()}#Li(t,e,i,s,n){let r=(i-s-n)/4|0,a=r/.7|0;return 4*a+2*s>e&&(a=(e-2*s)/4|0,r=.7*a|0),[r,a]}M153(t,i,s=0){const n=Math.min(t,i),r=.05*n,a=s||.1*n,[h,o]=this.#Li(t,i,n,r,a),l=4*h,c=4*o,u=(Math.min(18,Math.round(.1*h)),t-l-a>>1),d=t<i?.25*(i-c>>1):0,_=i-c-3*d>>1,p=.8*o|0,M=.66*p|0;this.#be.M69(M,p);const f=.9*o|0;let m=_;return this.#si.M42(M,p),this.#si.M114(h,f,u,m),e.M114(this.#li,h,f,u+1.5*h,m),this.#ni.M42(M,p),this.#ni.M114(h,f,u+3*h,m),m+=o+d,this.#ri.M42(M,p),this.#ri.M114(l,f,u,m),m+=o+d,this.#ai.M42(M,p),this.#ai.M114(l,f,u,m),m+=o+d,this.#hi.M42(M,p),this.#hi.M114(h,f,u,m),e.M114(this.#ci,h,f,u+1.5*h,m),this.#oi.M42(M,p),this.#oi.M114(h,f,u+3*h,m),this}M184(){return this.#be}M26(t){return this.M59(t),this.#si.M141()}M16(t){return this.M59(t),this.#hi.M141()}M27(t){return this.M59(t),this.#ai.M141()}M8(t){this.M59(t);const e=this.#oi;return[e.M52(),e.M65()]}M28(t){this.M59(t);const e=this.#ri;return[e.M52(),e.M65()]}M17(t){return this.M59(t),this.#ai.M87(t=>t.M102())}M9(t,e){return this.M59(t),e===this.#ri.M168()}M35(t){this.M59(t);const i=this.#oi.M196();return this.#oi.M210(),e.M21(i),this.#hi.M142(i,!1),i[0].M118()}M36(t){return this.M59(t),this.#ri.M141()}M11(t){this.M59(t),this.#ui+=1,this.#li.innerHTML=16-this.#ui,this.#ci.innerHTML=this.#ui}M49(t){this.M59(t);const e=this.#si.M95();return this.#ri.M229(e,!1),e.M118()}M1(t){return this.M59(t),this.#ai.M196().filter(t=>t.M102()).length}M2(t){this.M59(t);const e=this.#ai.M196().filter(t=>t.M102());return 0===e.length?Promise.resolve():(this.#ai.M88(e),e.forEach(t=>{t.M82(!1),t.M122(!1),this.#oi.M229(t)}),e[0].M118())}M38(t,e){this.M59(t);const i=[];for(;e-- >0;){const t=this.#hi.M95();i.push(t)}return this.#ai.M142(i),i[0].M118()}M6(t,e){this.M59(t),this.#ai.M166(t=>t.M45())}M18(t,e){return this.M59(t),this.#ni.M147(e),e.M118()}M39(t,e){return this.M59(t),this.#si.M94(e),e.M118()}M12(t,e){return this.M59(t),this.#oi.M147(e),e.M118()}#Ei(){}#vi(){super.M73(null,{})}#ki(t,e,i=200){const s=t.length;if(0===s)return null;const n=t[0];if(i<=0)return e===this.#ni?e.M142(t,!0):e===this.#ri?e.M142(t,!1):e.M142(t),n;for(let n=0;n<s;++n)setTimeout(()=>{const i=t.pop();e===this.#ni?e.M147(i):e===this.#ri?e.M94(i):e.M229(i)},n*i);return n}#mi(){this.#Ci(),this.#Ii()}#Ci(){this.#be=new ht({jokers:2},{visible:!1,touch_down_events:!0,smooth:!0,flip_axis:i.M64(.5)?"x":"y"}),this.#be.M166(t=>{this.#pi.appendChild(t.ELEMENT),t.M170()?t.FACE.innerHTML="&#9733;":t.M212()&&t.M54(14)}),this.#ii=this.#be.M177()}#Ii(){const e=this.#be.M177(),i=this.#pi;let s=0;this.#si=new lt(s++,"EnemyDrawPile",{max_cards:e,flip_after:!1,face_up:!1,parent:i,counter_position:lt.K34,pop_effect:!0}),this.#si.ELEMENT.classList.add("DrawPile"),this.#hi=new lt(s++,"EnemyDrawPile",{max_cards:e,flip_after:!1,face_up:!1,parent:i,counter_position:lt.K34,pop_effect:!0}),this.#hi.ELEMENT.classList.add("DrawPile"),this.#ni=new lt(s++,"EnemyDiscardPile",{max_cards:e,flip_after:!1,face_up:!1,parent:i,counter_position:lt.K48,pop_effect:!0}),this.#ni.ELEMENT.classList.add("DiscardPile"),this.#oi=new lt(s++,"PlayerDiscardPile",{max_cards:e,flip_after:!1,face_up:!1,parent:i,counter_position:lt.K48,pop_effect:!0}),this.#oi.ELEMENT.classList.add("DiscardPile"),this.#oi.ELEMENT.classList.add("Clickable"),this.#ri=new rt(s++,"EnemyRow",rt.K118,rt.K108,rt.K108,!0,{max_cards:4,flip_after:!0,face_up:!0,parent:i}),this.#ri.ELEMENT.classList.add("EnemyRow"),this.#ai=new rt(s++,"PlayerRow",rt.K118,rt.K108,rt.K108,!0,{max_cards:4,flip_after:!0,face_up:!0,sorting:at,parent:i}),this.#ai.ELEMENT.classList.add("PlayerRow"),this.#ai.ELEMENT.classList.add("Clickable"),this.#di=t("InGameInfo"),this.#li=document.createElement("div"),this.#li.classList.add("EnemyCounter"),this.#ci=document.createElement("div"),this.#ci.classList.add("PlayerCounter"),i.appendChild(this.#li),i.appendChild(this.#ci)}};import Bt from"stampit";import stampit from"stampit";var Vt=stampit({props:{M113:!1,M228:null,M19:NaN},methods:{setImage(t){this.resetImage(),this.M113=!0;let e=null;"string"==typeof t?(e=new Image,e.onload=()=>{this.M228=e,this.M19=e.width/e.height},e.onerror=()=>{this.resetImage()},e.src=t):(t instanceof HTMLImageElement||t instanceof Image)&&(this.M228=t,this.M19=t.width/t.height)},getImage(){return this.M228&&this.M228.complete?this.M228:null},getImageAspectRatio(){return this.M228&&this.M228.complete?this.M19:NaN},resetImage(){this.M228=null,this.M19=NaN,this.M113=!1}}});import zt from"stampit";import{ARRAY_TYPE as jt}from"glMatrix";import{fromValues as Ht,create as Ut}from"vec2";var vec2={fromValues:Ht,create:Ut},Gt=zt({methods:{validateVector(t,e=null){const i=t||e;if(!i)return vec2.create();if(!(Array.isArray(i)||i instanceof jt))throw new Error("Vector input must be an Array or glMatrix ARRAY_TYPE.");if(2!==i.length)throw new Error("Vector input must have exactly 2 elements.");if(!Number.isFinite(i[0])||!Number.isFinite(i[1]))throw new Error("Vector array must contain only numeric values.");return vec2.fromValues(i[0],i[1])}}});import{add as qt,create as $t,scaleAndAdd as Wt,zero as Yt,copy as Xt}from"vec2";import Jt from"stampit";import Qt from"stampit";var Zt=Qt({methods:{makeReadOnly:function(t){if("object"!=typeof t||null===t||Array.isArray(t))return;const e={};Object.entries(t).forEach(([t,i])=>{Object.prototype.hasOwnProperty.call(this,t),e[t]={configurable:!1,writable:!1,value:i,enumerable:!0}}),Object.defineProperties(this,e)}}}),te={add:qt,create:$t,scaleAndAdd:Wt,zero:Yt,copy:Xt},ee="#FFFFFF",ie=!0,se=2*Math.PI,ne=Bt({props:{M204:null},init({radius:t=3,color:e=ee,opacity:i=1,fill:s=ie,user_data:n=null}){if(!Number.isFinite(t)||t<=0)throw new Error("'radius' must be a positive number.");if(!Number.isFinite(i)||i<0||i>1)throw new Error("'opacity' must be a number between 0.0 and 1.0.");if("string"!=typeof e||e.length<3)throw new Error("'color' must be a valid string format ( e.g., '#FFF' or 'red' ).");this.radius=t,this.color=e,this.opacity=i,this.fill=s,this.user_data=n},methods:{render(t){if(t.save(),t.globalAlpha=this.opacity,this.M113){const e=this.getImageAspectRatio();if(Number.isFinite(e)){const i=this.getImage(),s=this.position[0],n=this.position[1],r=(i.width,i.height,this.M19,2*this.radius),a=r*e;t.drawImage(i,s-a/2,n-r/2,a,r)}}else t.beginPath(),t.arc(...this.position,this.radius,0,se),this.fill?(t.fillStyle=this.color,t.fill()):(t.strokeStyle=this.color,t.stroke());t.restore()},resetRender(){this.resetImage(),this.fill=ie}}}),re=Bt({init({position:t,velocity:e}){this.position=this.validateVector(t),this.velocity=this.validateVector(e),this.acceleration=te.create()},methods:{applyForce(t){te.add(this.acceleration,this.acceleration,t)},updatePhysics(t=1){te.scaleAndAdd(this.velocity,this.velocity,this.acceleration,t),te.scaleAndAdd(this.position,this.position,this.velocity,t),te.zero(this.acceleration)},resetPhysics(){te.zero(this.position),te.zero(this.velocity),te.zero(this.acceleration)}}}),ae=Bt({props:{age:0,alive:!1},init({life:t=120}){if(!Number.isFinite(t)||t<=0)throw new Error("'life' must be a positive number.");this.life=t},methods:{updateLife(t=1){return this.age+=t,this.alive=this.age<this.life,this.alive},resetLife(){this.age=0,this.alive=!1}}}),he=Bt({methods:{config(t={}){if(this.opacity=(t.opacity??this.opacity)||1,this.radius=(t.radius??this.radius)||3,this.color=(t.color??this.color)||ee,this.life=(t.life??this.life)||120,this.fill=t.fill??ie,t.position&&te.copy(this.position,this.validateVector(t.position)),t.velocity&&te.copy(this.velocity,this.validateVector(t.velocity)),!Number.isFinite(this.radius)||this.radius<=0)throw new Error("'radius' must be a positive number.");if(!Number.isFinite(this.opacity)||this.opacity<0||this.opacity>1)throw new Error("'opacity' must be a number between 0.0 and 1.0.");if(!Number.isFinite(this.life)||this.life<=0)throw new Error("'life' must be a positive number.")}}}),oe=Bt().compose(Gt,Vt,ne,re,ae,he,Bt({methods:{reset(){this.resetRender(),this.resetPhysics(),this.resetLife()}}})),le=Jt({init({object_stamp:t,pool_size:e=1e3}){if("function"!=typeof t)throw new Error("'object_stamp' must be a constructor function ( a stamp or factory ).");if(!Number.isInteger(e)||e<=0)throw new Error("'pool_size' must be a positive integer.");this.makeReadOnly({pool_size:e,object_stamp:t})}}),ce=Jt({init(t,{instance:e}){const i=new Array(this.pool_size);let s=0;const n=new WeakMap;for(let t=0;t<this.pool_size;t++){const e=this.object_stamp();e.reset(),i[t]=e}e._setIndex=function(t,e){n.set(t,e)},e.get=function(){if(s>=this.pool_size)return null;const t=i[s];return n.set(t,s),s++,t},e.free=function(t){const e=n.get(t);if(void 0===e||e>=s)return!1;s--;const r=i[s];return i[s]=t,i[e]=r,t!==r&&n.set(r,e),t.reset(),n.delete(t),!0},e.getActiveCount=function(){return s},e._getPoolArray=function(){return i}}}),ue=Jt({methods:{M166:function(t){const e=this._getPoolArray();let i=0;for(;i<this.getActiveCount();){const s=e[i];this._setIndex(s,i),!1!==t(s)?i++:this.free(s)}},M205:function(t){this._getPoolArray().forEach(e=>t(e))}}}),de=Jt().compose(Zt,le,ce,ue);import{fromValues as _e,copy as pe,random as Me,create as fe}from"vec2";var me={fromValues:_e,copy:pe,random:Me,create:fe},ge=me.create(),ye="hfwi2hfuyzwj2uqf~",we="hfwi2hfuyzwj2{nxnyx",CardCapture=class{#Ti=null;#Ni=!1;#Si=null;#pi=null;#ye=!1;#Ai=me.create();#Ri=null;#Di=0;#Pi=null;#Oi=null;#Ki=null;#Fi=null;#Bi=0;#Vi=0;#zi={count:0,center:null,status:!1,particle:null};#ji={count:0,center:null,status:!1,particle:null};#Hi={count:0,center:null,status:!1,particle:null};constructor(t){this.#Ti=new xt({game_name:"CARD CAPTURE",game_designer:"Lucas Gentry",game_build:t,start_page:e.M29("page",Et),page_mode:xt.K116,on_resize:this.M153.bind(this),on_click:this.M181.bind(this),on_page:this.M206.bind(this),counter:ye,settings:{prefix:"capture",schema:[]}}),this.#Ti.M110(we,"up"),this.#pi=this.#Ti.M179(vt),this.#Di=this.#Ti.M109,this.#ye=this.#Ti.M96(),this.#Ui(),this.#Gi(),this.#qi(),this.#Ti.M180(this.#Si.M184())}M153(t,e,i){this.#Si.M153(t,e,i),this.#Pi.width=t,this.#Pi.height=e,this.#Oi.width=t,this.#Oi.height=e,this.#Di=i}M181(t,i,s){this.#Ni&&(e.M61||this.#ye)&&this.#Si.M181(t,i,s)}M206(t,e){const i=this.#Ni;this.#Ni=t===vt,this.#Ni&&(this.#Ti.M150(),i||window.requestAnimationFrame(this.#$i.bind(this)),e&&this.#Wi())}M154(e,i){if("string"!=typeof e)throw new Error("! "+e+" = "+typeof e);switch(e){default:return;case Ft.K49:let e=i.value;Number.isFinite(e)&&!Number.isInteger(e)&&(e=Math.round(e)),this.#Yi(i.key,e);break;case p:let s=i.value;Number.isFinite(s)&&!Number.isInteger(s)&&(s=Math.round(s)),this.#Yi(i.key,s,i.center);break;case _:const n=t("deck_seed");n&&(n.value=i);const r=t("error_seed");r&&(r.innerHTML=i);break;case"msg#user:error":break;case M:this.#Xi(i.position,i.status);break;case f:this.#Ti.M110(ye,i?"up":"down"),this.#Bi=i?1:-1}}#Wi(){this.#Ti.M150(!1),this.#Bi=0,this.#zi.status=!1,this.#ji.status=!1,this.#Hi.status=!1;const t={velocity_px_ms:this.#Ti.M111("cards_speed",!0),flip_time:this.#Ti.M111("cards_flip",!0)};this.#Si.M217(t),this.#Ti.M110(we,"down")}#Gi(){this.#Si=new Ft({on_message_request:(t,e)=>this.M154(t,e),V28:[],parent_node:this.#Ti.M179(vt)}),this.#Si.M153(this.#Ti.M215,this.#Ti.M202)}#qi(){const t=document.createElement("canvas");t.id="canvas_clicks",t.width=window.innerWidth,t.height=window.innerHeight,t.style.zIndex=200,this.#pi.appendChild(t);const e=document.createElement("canvas");e.id="canvas_particles",e.width=window.innerWidth,e.height=window.innerHeight,e.style.zIndex=100,this.#pi.appendChild(e),this.#Fi=t.getContext("2d"),this.#Ki=e.getContext("2d"),this.#Oi=t,this.#Pi=e,this.#Ri=de({object_stamp:oe,pool_size:1e4}),this.#Ri.M205(t=>{t.user_data={click:!0}})}#$i(t){if(this.#Ni){if(this.#Vi,this.#Vi=t,this.#zi.status)if(0===this.#zi.count){this.#zi.count=70;const t=this.#Ji(this.#zi.center,0);this.#zi.particle=t}else this.#zi.count-=1;if(this.#ji.status)if(0===this.#ji.count){this.#ji.count=70;const t=this.#Ji(this.#ji.center,1);this.#ji.particle=t}else this.#ji.count-=1;if(this.#Hi.status)if(0===this.#Hi.count){this.#Hi.count=10;const t=this.#Ji(this.#Hi.center,2);this.#Hi.particle=t}else this.#Hi.count-=1;this.#Ri.M166(t=>{if(!t.updateLife())return t.user_data.click=!0,!1}),this.#Fi.clearRect(0,0,window.innerWidth,window.innerHeight),this.#Ki.clearRect(0,0,window.innerWidth,window.innerHeight),this.#Ri.M166(t=>{t.opacity=i.M160(t.age,t.life,5),t.updatePhysics();const e=t.user_data.click;e?t.radius*=1.05:t.radius+=1,t.render(e?this.#Fi:this.#Ki)}),0!==this.#Bi&&this.M155(this.#Ki,1===this.#Bi?"SUCCESS":"YOU LOST",this.#Di),window.requestAnimationFrame(this.#$i.bind(this))}}#Qi(){const t=window.visualViewport.width,e=window.visualViewport.height,i=Math.min(t,e),s=.03*i;let n=Math.floor((i-s-this.#Di-s)/4),r=Math.floor(n/.7);4*r>e&&(r=.9*Math.floor(e/4),n=Math.floor(.7*r));const a=(t-4*n-this.#Di)/2,h=Math.floor((e-4*r)/2);be(this.#Ki,a,h,n,r,4,4)}#Xi(t,e){if(e)return;const i=this.#Ri.get();i&&(i.config({position:t,velocity:ge,color:e?"lime":"darkorange",life:e?60:30,radius:10,opacity:1,fill:!e}),i.user_data.click=!0)}#Ji(t,e){const s=this.#Ri.get();if(!s)return;const n=2===e?"hsl("+i.M115(40,60)+", 100%, 50%)":"white";return s.config({position:t,velocity:2===e?me.random(this.#Ai,i.M78(1,3)):ge,color:n,life:60*(1!==e?2.2:3.3),radius:1,opacity:1,fill:2===e}),s.user_data.click=!1,s}#Ui(){}#Yi(e,i,s=null){if("player_discard"===e)return this.#zi.status=i,void(i?(this.#zi.center=s,this.#zi.count=0):this.#zi.particle.life=0);if("enemy_row"===e)return this.#ji.status=i,void(i?(this.#ji.center=s,this.#ji.count=0):this.#ji.particle.life=0);if("game_over"===e)return this.#Hi.status=i,void(i?(this.#Hi.center=s,this.#Hi.count=0):this.#Hi.particle.life=0);const n=t(e);n&&(n.innerHTML=i)}M155(t,e="",i=0){const s=t.canvas.width-i,n=t.canvas.height,r=Math.floor(.18*s);t.font="bold "+r+"px card-game",t.fillStyle="rgba( 100, 149, 237, 0.50 )",t.textAlign="center",t.textBaseline="middle",t.fillText(e,s/2,n/2)}},be=(t,e,i,s,n,r,a)=>{const h=r*s,o=a*n;t.strokeStyle="orange",t.beginPath();for(let n=0;n<=r;n++){const r=e+n*s;t.moveTo(r,i),t.lineTo(r,i+o)}for(let s=0;s<=a;s++){const r=i+s*n;t.moveTo(e,r),t.lineTo(e+h,r)}t.stroke()};export{CardCapture};
//# sourceMappingURL=bundle.min.js.map