// Build: February 13 2026 00:41

export const BUNDLE_URL = import.meta.url.split( '/' ).pop();

export const BUNDLE_ID = "2026-0213-0041";

function t(t){return document.getElementById(t)}class e{static get M60(){return window.location.href.includes("nighthawk.home")}static get M74(){return screen.orientation&&screen.orientation.type?screen.orientation.type.includes("landscape"):window.innerWidth>window.innerHeight}static get M129(){return navigator.maxTouchPoints>0}static get M97(){return navigator.userAgentData&&"Android"===navigator.userAgentData.platform||/android/i.test(navigator.userAgent)}static get M49(){const t=window.matchMedia("(display-mode: standalone)").matches,e=!0===window.navigator.standalone;return t||e}static get M184(){return/iPad|iPhone|iPod/.test(navigator.userAgent)||/Mac/.test(navigator.userAgent)&&navigator.maxTouchPoints>1}static M10(t,e,i){Object.defineProperty(t,e,{value:i,writable:!1,enumerable:!0,configurable:!1})}static M19(t,e){if(!Array.isArray(t))return;const i=t.indexOf(e);-1!==i&&t.splice(i,1)}static M20(t){if(!Array.isArray(t))return t;for(let e=t.length-1;e>0;e--){const i=Math.floor(Math.random()*(e+1));[t[e],t[i]]=[t[i],t[e]]}return t}static M36(t){return function(){let e=t+=1831565813;return e=Math.imul(e^e>>>15,1|e),e^=e+Math.imul(e^e>>>7,61|e),((e^e>>>14)>>>0)/4294967296}}static M98(t){let e=0;for(let i=0;i<t.length;i++)e=(e<<5)-e+t.charCodeAt(i),e|=0;return e}static M28(t,e=null,i=!1){let s=new URLSearchParams(window.location.search).get(t);if(null===s)return e;if(i){const t=parseInt(s,10);return isNaN(t)?e:t}return s}static M75(t,e=document.documentElement,i=null){t.startsWith("--")||(t="--"+t);const s=window.getComputedStyle(e).getPropertyValue(t).trim();return""===s?i:s.replace(/^['"]|['"]$/g,"")}static M29(){if(e.M184)return;const t=document.documentElement,i=t.requestFullscreen||t.webkitRequestFullscreen;if(!i)return;const s=e.M97?{navigationUI:"hide"}:{};i.call(t,s).catch(t=>{})}static M30(t){const e=document.querySelector('script[type="importmap"]');if(!e)throw new Error('GetImportMapValue » <script type="importmap"> not found in DOM.');const i=JSON.parse(e.textContent),s=i.imports?.[t];if(void 0===s)throw new Error("GetImportMapValue » Key not found in imports: "+t);return s}static M61(t,e=0){if("string"!=typeof t)return t;let i="";for(let s=0;s<t.length;s++){const n=t.charCodeAt(s);i+=String.fromCharCode(n+e)}return i}static M155(t,e,i){const s=t.style;s.width=e+"px",s.height=i+"px"}static M113(t,e,i,s,n){const r=t.style;r.width=e+"px",r.height=i+"px",r.left=s+"px",r.top=n+"px"}static M206(t){return new Promise(e=>{setTimeout(()=>e(!0),t)})}}class i{static get M185(){return(1+Math.sqrt(5))/2}static get M186(){return 2*Math.PI}static get M156(){return Math.PI/2}static get M76(){return Math.PI/180}static get M62(){return 180/Math.PI}static M157(t){return t*i.M76}static M158(t){return t*i.M62}static M114(t,e){return Math.floor(Math.random()*(e-t+1))+t}static M77(t,e){return t+Math.random()*(e-t)}static M63(t=.5){return Math.random()<t}static M39(t){return function(){let e=t+=1831565813;return e=Math.imul(e^e>>>15,1|e),e^=e+Math.imul(e^e>>>7,61|e),((e^e>>>14)>>>0)/4294967296}}static M217(t,e,i){return t+(e-t)*i}static M207(t,e,i,s,n){return s+(t-e)*(n-s)/(i-e)}static M208(t,e,i){return Math.max(e,Math.min(t,i))}static M130(t,e,i,s){return Math.hypot(i-t,s-e)}static M159(t,e,i=2){if(e<=0)return 0;const s=t/e;return 1-Math.pow(s,i)}}var s="busy",n="success",r="fail",a="state_fill_enemy_row",h="state_player_discard",o="state_player_draw",l="state_capture",c="state_player_capture",u="state_player_sacrifice",d="state_enemy_capture",_="msg#deck:seed",p="msg#ui:update",M="msg#ui:click",f="msg#game:over",m="location:unknown",g="location:player_discard",y="location:player_row",w="location:enemy_row",b=Object.defineProperty,E=class t{static K105=100;static K110=199;static K25=100;static K32=!0;#t=0;#e=0;#i=100;#s=-1;#n=0;#r=0;#a=null;#h=null;#o=!1;#l=0;#c=0;#u=0;#d=0;#_=0;#p=0;#M=!1;#f=[];#m=!0;#g=!1;constructor(i,s,n=!1,r=0,a={}){e.M10(this,"IDX",i),e.M10(this,"ID",s);const{parent:h=null,is_box:o=!1}=a;e.M10(this,"IS_BOX",o),this.#l=r||t.K25,!0===n?this.#a=document.createElement("div"):n instanceof Node&&(this.#a=n),this.#a&&(this.#y(),h instanceof Node&&h.appendChild(this.#a))}#y(){e.M10(this,"ELEMENT",this.#a),this.#a.id=this.ID,this.#a.style.position="absolute",this.#a.style.top="0px",this.#a.style.left="0px",this.#a.style.zIndex=this.#i,this.#a.classList.add("FlexBoxEntity"),this.#a.dataset.smooth=this.#o?"yes":"no",this.#a.addEventListener("transitionend",this.#w.bind(this))}M160(){return this.#a&&(this.#a.remove(),this.#a=null,this.#f=null),this}M78(){return this.#a.offsetWidth,this}M99(){return this.#a}M131(){return this.#n}M115(){return this.#r}M187(){return this.#t}M161(){return this.#e}M113(t,e,i,s){this.#n=0|t,this.#r=0|e,s|=0,i|=0;const n=this.#t!==s||this.#e!==i;return n&&(this.#t=s,this.#e=i),this.#b(n),this}#E(){const t=window.getComputedStyle(this.#a).translate;t&&"none"!==t||(this.#u=0,this.#c=0);const e=t.split(" ");this.#u=parseFloat(e[0])||0,this.#c=parseFloat(e[1])||0}M79(t,e){if(t|=0,e|=0,this.#t===e&&this.#e===t)return this;if(this.#o){const i=this.M3(t,e);this.#v(i)}return this.#t=e,this.#e=t,this.#b(!0),this}M3(t,e){this.#E();const i=t-this.#u,s=e-this.#c;return Math.sqrt(i*i+s*s)/this.#l}M155(t,e){return t|=0,e|=0,this.#n===t&&this.#r===e||(this.#n=t,this.#r=e,this.#b(!1)),this}#b(t=!0){this.#x();const e=this.#a.style;e.width=this.#n+"px",e.height=this.#r+"px",t?(e.translate=this.#e+"px "+this.#t+"px 0px",this.#o&&(e.zIndex=199+this.#s)):e.zIndex=this.#i}#w(t){"translate"===t.propertyName&&(this.#E(),Math.abs(this.#u-this.#e)<1&&Math.abs(this.#c-this.#t)<1&&(this.#a.style.zIndex=this.#i,this.#M&&this.#L()))}M50(){return this.#p>0}M132(){return this.#p>0}M133(){return this.#p>0}#L(){t.K32;const e=this.#f.length;for(let t=0;t<e;t++)"function"!=typeof this.#f[t]||this.#f[t](this);this.#f.length=0}M116(t=!0){return this.#o=!!t,this.#a.dataset.smooth=this.#o?"yes":"no",this}M134(){return this.#o}M117(){return new Promise(t=>this.M80(()=>t(this)))}M80(t){return"function"!=typeof t?this:this.#M?(this.#f.push(t),this):void 0}M12(){this.#f.length=0}M21(t=!0){return this.#M=!!t,this}Error(t,e,...i){this.constructor.name,i.length>0&&i.forEach((t,e)=>{})}M118(){return this.#s}M119(t=-1){return this.#s=t,this}M188(t,e=-1){return null!==this.#h?(this.Error("SetBox","Already set",this.#h,t),this):(this.#h=t,e>=0&&(this.#s=e),this)}M135(){return this.#h=null,this.#s=-1,this}M189(){return this.#h}M218(t){return this.#h===t}M190(){return null!==this.#h}#v(t){return!Number.isFinite(t)||t<0?(this.Error("SetTranslationTime","Bad number",t),this):this.#a?(this.#a.style.transitionDuration=t+"ms",this):this}M40(e=0){return this.#l=e||t.K25,this}M219(t){return t|=0,this.#i===t||(this.#i=t,this.#a.style.zIndex=t),this}M136(t){return!Number.isFinite(t)||t<0?(this.Error("SetBaseZ","Bad number",t),this):(t|=0,this.#i<t&&(this.#i=t),this.#a.style.zIndex=t,this)}#x(){this.#d=this.#t+(this.#r>>1),this.#_=this.#e+(this.#n>>1)}M64(){return this.#d}M51(){return this.#_}M7(t,e){const i=t-this.#e,s=e-this.#t;return Math.sqrt(i*i+s*s)/this.#l}M120(){return this.#m}M137(){return!this.#m}M100(t=!0){return t=!!t,this.#m===t||(this.#m=t,this.M23(t)),this}M52(){return this.#m=!this.#m,this.M23(this.#m),this}M101(){return this.#g}M81(t=!0){return t=!!t,this.#g===t||(this.#g=t,this.M31(t)),this}M44(){return this.#g=!this.#g,this.M31(this.#g),this}},v=1/0,x=class extends E{static K117=11;static K106=12;static K107=3;static K111=1;static K118=2;static K108=4;static K99=5;static K109=6;static K112=7;#k=11;#C=!0;#I=[];#T=null;#N=null;#S=null;#A=v;#D=0;#R=0;#P=0;#O=0;#K=!1;#F=0;#B=0;#V=!1;#z=0;#j=0;#U=E.K105;#G=null;#H=null;#q=null;#$=null;#W=!1;#Y=0;#X=!1;constructor(t,e,i,s,n,r=!1,a={}){const{max_count:h=v,sorting:o=null,tuck:l=!1,uniform:c=!1,parent:u=null,velocity_px_ms:d=0,reverse_z:_=!1}=a;super(t,e,r,d,{is_box:!0,parent:u}),this.#A=h,this.M82(_),this.#k=i,11!==i&&12!==i&&this.Error("FlexBox","Bad orientation",i),this.#C=11===this.#k,"function"==typeof o&&(this.#T=o);const p=Number.isFinite(this.#A)?this.#A:64;this.#G=new Int32Array(p),this.#H=new Int32Array(p),s=s||4,this.#S=this.#J(s),3!==(n=n||3)&&1!==n&&2!==n&&this.Error("FlexBox","Bad align",n),this.#N=this.#J(n),this.#V=c,l>0&&this.M162(l),this.ELEMENT&&this.ELEMENT.classList.add("FlexBox")}M160(){super.M160(),this.#I=null,this.#N=null,this.#S=null,this.#T=null}#Q(t,e){if(t.length<e){const i=t.length<<1;t=new Int32Array(i>e?i:e)}return t}M228(t,e=!0){if(!(t instanceof E))return this.Error("Add","Not a FlexBoxEntity",t),this;if(this.#I.includes(t))return this.Error("Add","Already here",t),this;if(this.M194())return this.Error("Add","I am full",t),this;t.M190()&&t.M189().M193(t),e?this.#I.push(t):this.#I.unshift(t);const i=this.#I.length;let s=!e&&i>1;return t.M188(this,e?this.#I.length-1:0),this.#Q(this.#G,i),this.#Q(this.#H,i),null!==this.#T&&(this.#I.sort(this.#T),s=!0),s&&this.#Z(),this.#V?(0!==this.#z&&0!=this.#j||(this.#z=t.M131(),this.#j=t.M115(),this.#W>0&&this.#tt()),this.#F+=this.#z,this.#B+=this.#j):(this.#F+=t.M131(),this.#B+=t.M115()),this.#K=!0,this.M13(),this}M191(t){return this.M228(t,!1)}M192(t){return this.M228(t,!0)}M193(t){return t instanceof E?this.#I.includes(t)?(t.M135(),t.M12(),e.M19(this.#I,t),this.#Z(),this.#V?(this.#F-=this.#z,this.#B-=this.#j):(this.#F-=t.M131(),this.#B-=t.M115()),this.#K=!0,this.M13(),this):(this.Error("Remove","Not here",t.ID),this):(this.Error("Remove","Not a FlexBoxEntity",t),this)}M155(t,e){t|=0,e|=0,super.M155(t,e),this.#D=t,this.#R=e}M113(t,e,i,s,n=!0){return t|=0,e|=0,i|=0,s|=0,super.M113(t,e,i,s),this.#D=t,this.#R=e,this.#O=i,this.#P=s,n&&this.M13(),this}M41(t,e,i=-1){return this.#z=0|t,this.#j=0|e,this.#W>0&&this.#tt(),this.#V=!0,this.#K=!1,i>=0&&(this.#U=i),this.M22(),this}M82(t=!0){this.#X=!!t,this.M13()}M42(t=-1){t>=0&&(this.#U=0|t)}M22(){let t=0,e=0;const i=this.#I.length;if(i>0){if(this.#V){if(0===this.#z||0===this.#j){const t=this.#I[0];this.#z=t.M131(),this.#j=t.M115(),this.#W>0&&this.#tt()}t=i*this.#z,e=i*this.#j}else for(let s,n=0;n<i;n++)s=this.#I[n],t+=s.M131(),e+=s.M115();(isNaN(t)||isNaN(e))&&this.Error("UpdateEntitiesSize","total width/height is NaN"),(t<0||e<0)&&this.Error("UpdateEntitiesSize","total width/height is negative",t,e)}return this.#F=t,this.#B=e,this.#K=!0,this}#et(t=-1){if(-1===t&&(t=this.#I.length),0===t)return this;this.#K||this.M22();const e=this.#C;let i=e?this.#F:this.#B,s=this.#W&&t>1;if(s){const n=e?this.#D:this.#R;s=i>n,s&&(this.#it(t,n,i),i-=(t-1)*this.#Y)}return e?(this.#q=this.#S(!0,!0,i,t),this.#$=this.#N(!1,!1,this.#B,t)):(this.#$=this.#S(!0,!1,i,t),this.#q=this.#N(!1,!0,this.#F,t)),s&&this.#st(e,t),t}#it(t,e,i){this.#C?this.#z:this.#j;const s=(i-e)/(t-1);this.#Y=s}#st(t,e){const i=t?this.#q:this.#$;for(let t=1;t<e;t++)i[t]-=t*this.#Y}M162(t=!0){this.#W=!!t,this.#W&&this.M13()}M138(t){return this.#V||0===t?t<0||t>1?(this.Error("SetTuck","Tuck must be [ 0 .. 1 ]",t),this):(this.#W=t,this.#tt(),void(this.#I.length>1&&this.M13())):(this.Error("SetTuck","Cannot tuck non-uniform entities"),this)}#tt(){if(!this.#V)return void(this.#Y=0);const t=this.#C?this.#z:this.#j;this.#Y=t*this.#W|0}M79(t,e){super.M79(t,e),this.#O=t,this.#P=e}M13(t=!0){const e=this.#I.length;if(0===e)return this;t&&this.#et(e);const i=this.#U;for(let t=0;t<e;t++){const s=this.#I[t];this.#X?s.M219(i+(e-t)):s.M219(i+t),s.M79(this.#q[t],this.#$[t]),s.IS_BOX&&s.M13(!0)}return this}#nt(t,e=-1){if(e<0&&(e=t.M118()),this.#X){const i=this.#I.length;t.M219(this.#U+(i-e))}else t.M219(this.#U+e);return t.M79(this.#q[e],this.#$[e]),this}#J(t){switch(t){case 3:return this.#rt.bind(this);case 1:return this.#at.bind(this);case 2:return this.#ht.bind(this);case 4:return this.#ot.bind(this);case 5:return this.#lt.bind(this);case 6:return this.#ct.bind(this);case 7:return this.#ut.bind(this)}}#dt(t,e,i){const s=(t?this.#G:this.#H).subarray(0,i),n=e?this.#O:this.#P;var r=e?this.#z:this.#j;if(t&&this.#V)for(var a=0;a<i;++a)s[a]=n+a*r;else{var h=n;for(a=0;a<i;++a){if(t&&a>0){if(!this.#V){const t=this.#I[a-1];r=e?t.M131():t.M115()}h+=r}s[a]=h}}return s}#at(t,e,i,s){return this.#dt(t,e,s)}#rt(t,e,i,s){const n=this.#dt(t,e,s),r=e?this.#D:this.#R,a=r-i>>1;var h=e?this.#z:this.#j;if(!t&&this.#V){const t=r-h>>1;for(var o=0;o<s;++o)n[o]+=t}else for(o=0;o<s;++o)if(t)n[o]+=a;else{if(!this.#V){const t=this.#I[o];h=e?t.M131():t.M115()}n[o]+=r-h>>1}return n}#ht(t,e,i,s){const n=this.#dt(t,e,s),r=e?this.#D:this.#R,a=Math.round(r-i);var h=e?this.#z:this.#j;if(!t&&this.#V){const t=r-h;for(var o=0;o<s;++o)n[o]+=t}else for(o=0;o<s;++o)if(t)n[o]+=a;else{if(!this.#V){const t=this.#I[o];h=e?t.M131():t.M115()}n[o]+=r-h}return n}#ut(t,e,i,s){const n=this.#dt(t,e,s),r=(e?this.#D:this.#R)>>1;var a=e?this.#z:this.#j;const h=n[0];for(var o=0;o<s;++o){if(!this.#V){const t=this.#I[o];a=e?t.M131():t.M115()}n[o]=h+r-(a>>1)}return n}#lt(t,e,i,s){if(s<2)return this.#at(t,e,i,s);const n=this.#dt(t,e,s),r=e?this.#D:this.#R,a=Math.round((r-i)/(s-1));for(var h=1;h<s;++h)n[h]+=h*a;return n}#ot(t,e,i,s){const n=this.#dt(t,e,s),r=e?this.#D:this.#R,a=Math.round((r-i)/(s+1));for(let t=0;t<s;++t)n[t]+=(t+1)*a;return n}#ct(t,e,i,s){if(s<2)return this.#rt(t,e,i,s);const n=this.#dt(t,e,s),r=((e?this.#D:this.#R)-i)/s,a=r>>1;for(let t=0;t<s;++t)n[t]+=a+t*r|0;return n}M83(t){return!Number.isFinite(t)||t<=0?(this.Error("SetMaxCount","Bad number",t),this):(this.#A=0|t,this)}M84(){return this.#A}M194(){return this.#I.length>=this.#A}M102(t){return"function"!=typeof t||(this.#T=t),this}M103(t){return this.#S=this.#J(t||4),this}M220(t){return"function"!=typeof t&&(t=this.#T),"function"!=typeof t||(this.#I.sort(t),this.#Z(),this.M13()),this}#Z(t=-1){if(t<0&&(t=this.#I.length),!(t<0))for(let e=0;e<t;++e)this.#I[e].M119(e)}M163(){const t=this.#I.length;return t<=1||(M20(this.#I),this.#Z(t),this.M13()),this}M164(){return 0===this.#I.length}M139(t){return this.#I.includes(t)}M140(){return this.#I.length}M165(t){if("function"!=typeof t)return this;const e=this.#I.length;for(let i,s=0;s<e;s++)i=this.#I[s],t(i);return this}M166(){return this.#I.length>0?this.#I[0]:null}M104(){if(this.#I.length<=0)return null;const t=this.#I[0];return this.M193(t),t}M167(){const t=this.#I.length;return t>0?this.#I[t-1]:null}M105(){const t=this.#I.length;if(t<=0)return null;const e=this.#I[t-1];return this.M193(e),e}M85(t){return t<0||t>=this.#I.length?(this.Error("GetEntityAt","Bad idx",t),null):this.#I[t]}M195(){return[...this.#I]}M86(t){return"function"!=typeof t?null:this.#I.filter(t)}M209(){const t=this.#I.length;if(0===t)return this;for(let e=0;e<t;e++){const t=this.#I[e];t.M135(),t.M12()}return this.#I.length=0,this.#F=0,this.#B=0,this.#K=!0,this}#_t(t=0){const e=this.#I.length+t;return e>this.#A?(this.Error("#PrepareBatchAdd","Total exceeds max_count",e),this):(e>0&&(this.#G=this.#Q(this.#G,e),this.#H=this.#Q(this.#H,e)),this)}M141(t,e=!0,i=0){const s=t.length;if(0===s)return this;if(this.M194())return this.Error("BatchAdd","I am full"),this;const n=this.M140()+s;if(n>this.M84())return this.Error("BatchAdd","Not enough space"),this;for(let e=0;e<s;e++){const i=t[e];if(!(i instanceof E))return this.Error("BatchAdd","Not a FlexBoxEntity",i),this;if(this.#I.includes(i))return this.Error("BatchAdd","Already here",i),this}const r=[...this.#I],a=r.length;this.#_t(s);for(let i=0;i<s;i++){const s=t[i];s.M190()&&s.M189().M193(s),s.M188(this),e?this.#I.push(s):this.#I.unshift(s);const n=this.#V?this.#z:s.M131(),r=this.#V?this.#j:s.M115();this.#F+=n,this.#B+=r}this.#K=!0,null!==this.#T&&this.#I.sort(this.#T),this.#Z(n),this.#et(n);for(let t=0;t<a;t++){const e=r[t];this.#nt(e)}if(0===i)for(let e=0;e<s;e++){const i=t[e];this.#nt(i)}else{let e=i;i<=1&&(e=this.M4(t[0])*i);let n=0;for(let i=0;i<s;i++){const s=t[i];setTimeout(()=>{this.#nt(s)},n),n+=e}}return this}M87(t=null,i=0){const s=null===t?[...this.#I]:t,n=s.length;if(0===n)return this;for(let t=0;t<n;t++){const e=s[t];if(!(e instanceof E))return this.Error("BatchRemove","Not a FlexBoxEntity",e),this;if(!this.#I.includes(e))return this.Error("BatchRemove","Not here",e),this}for(let t=n-1;t>=0;t--){const i=s[t];e.M19(this.#I,i),i.M135(),i.M12();const n=this.#V?this.#z:i.M131(),r=this.#V?this.#j:i.M115();this.#F-=n,this.#B-=r}this.#K=!0;const r=this.#I,a=r.length;if(this.#Z(a),this.#et(a),0===i)this.M13(!1);else{let t=i;i<=1&&(t=this.M4(r[0])*i);let e=t;for(let i=0;i<a;i++){const s=r[i];setTimeout(()=>this.#nt(s),e),e+=t}}return this}M4(t){if(!t.M218(this))return this.Error("GetEntityTranslationTime","Not here",t),0;const e=t.M118();return e<0||e>=this.#I.length?(this.Error("GetEntityTranslationTime","Bad index",t),0):t.M3(this.#q[e],this.#$[e])}M5(t){return t.EstimateTravelTime(this.M51(),this.M64())}M168(t=""){for(let t=0;t<this.#I.length;++t)this.#I[t];return!0}},L={smooth:!0,touch_down_events:!1,visible:!1,selected:!1,velocity_px_ms:1,flip_time:500,face_up:!0,flip_axis:"y"},k=class t extends E{static K105=110;#pt=null;#Mt=null;#ft=null;#mt=L.face_up;constructor(t){super(t,"Card_"+t,!0),this.#gt(t),e.M10(this,"BODY",this.#pt),e.M10(this,"FACE",this.#Mt),e.M10(this,"BACK",this.#ft),this.M210()}M160(){super.M160()}M210(e={}){for(const t in L){const i=e[t]??L[t];e[t]=i}this.M190()&&this.M189().M193(this),this.M12(),this.M116(e.smooth),this.M21(e.touch_down_events),this.M40(e.velocity_px_ms),this.M100(e.visible),this.M81(e.selected),this.M219(t.K105),this.M88(e.flip_time),this.M121(e.face_up),this.M89(e.flip_axis)}#gt(e){this.ELEMENT.classList.add("Card"),this.#pt=document.createElement("div"),this.#pt.classList.add("CardBody"),this.#pt.classList.add("Clickable"),this.#pt.dataset.idx=e,this.#pt.card=this,this.#pt.dataset.face=this.#mt?"up":"no",this.#pt.dataset.visible=this.M120()?"yes":"no",this.#Mt=document.createElement("div"),this.#Mt.classList.add("CardFace"),this.#ft=document.createElement("div"),this.#ft.classList.add("CardBack"),this.#pt.appendChild(this.#Mt),this.#pt.appendChild(this.#ft),this.ELEMENT.appendChild(this.#pt),this.M136(t.K105)}M14(){return this.#pt}M121(t=!0){return this.#mt=!!t,this.#pt.dataset.face=this.#mt?"up":"down",this.OnFlip&&this.OnFlip(t),this}M142(){return this.#mt}M106(){return!this.#mt}M23(t){return this.#pt.dataset.visible=t?"yes":"no",this}M31(t){return this.#pt.dataset.selected=t?"yes":"no",this}M88(t){return!Number.isFinite(t)||t<0?(this.Error("SetFlipTime","Bad number",t),this):(this.#pt.style.transitionDuration=t+"ms",this)}M89(t="x"){if("string"!=typeof t||1!==t.length)return this.Error("SetFlipAxis","Bad axis",t),this;if("x"!==(t=t.toLowerCase())&&"y"!==t)return this.Error("SetFlipAxis","Bad axis",t),this;const e="x"===t?"1":"0",i="y"===t?"1":"0";return this.#pt.style.setProperty("--ROT_X",e),this.#pt.style.setProperty("--ROT_Y",i),this}M221(){return this.#mt=!this.#mt,this.#pt.dataset.face=this.#mt?"up":"down",this.OnFlip&&this.OnFlip(this),this}};((t,e)=>{for(var i in e)b(t,i,{get:e[i],enumerable:!0})})({},{K54:()=>P,K55:()=>K,K85:()=>O,K69:()=>G,K70:()=>tt,K71:()=>R,K86:()=>A,K87:()=>D,K26:()=>J,K27:()=>X,K95:()=>q,K88:()=>$,K72:()=>H,K89:()=>Y,K73:()=>Q,K74:()=>W,K46:()=>Z,K56:()=>T,K57:()=>N,K75:()=>C,K28:()=>S,K76:()=>I,K113:()=>j,K77:()=>F,K33:()=>B,K58:()=>z,K78:()=>U,K59:()=>V});var C=0,I=6,T=10,N=14,S=15,A=63,D=15,R=15,P=1<<T,O=2<<T,K={[P]:"Black",[O]:"Red"},F=1<<I,B=2<<I,V=3<<I,z=4<<I,j=[F,B,V,z].sort(),U={[F]:"Clubs",[B]:"Diamonds",[z]:"Hearts",[V]:"Spades"},G=1<<N,H=0,q=1,$=11,W=12,Y=13,X=Math.min($,W,Y),J=Math.max($,W,Y),Q={[q]:"Ace",[$]:"Jack",[W]:"Queen",[Y]:"King"},Z={[q]:"A",[$]:"J",[W]:"Q",[Y]:"K"},tt={name:"Joker",suit:"joker",symbol:"JKR",rank:H,flag:G},et=class t extends k{static K95=1;#yt=!1;#wt=!1;#bt=!1;#Et=null;constructor(i,s){super(i),e.M10(this,"DNA",s);const n=s&A,r=s&D<<I,a=s&R<<T;this.#bt=n===q,e.M10(this,"RANK",this.#bt?t.K95:n),e.M10(this,"SUIT",r),e.M10(this,"COLOR",a),this.#yt=0!==(s&G),this.#wt=!this.#yt&&this.RANK>=X&&this.RANK<=J,this.#vt(),this.#xt()}M143(){return"("+this.IDX+") "+this.M90()+" of "+this.M91()}#vt(){const t=this.M90().toLowerCase(),e=this.M91().toLowerCase(),i=this.M212()?"red":"black",s=this.BODY;s.dataset.rank=t,s.dataset.suit=e,s.dataset.color=i,this.#yt?s.dataset.joker="yes":this.#wt&&(s.dataset.royal="yes")}#xt(){const t=this.M54().toUpperCase(),e=this.M91();this.FACE.innerHTML="";const i=document.createElement("p");i.innerText=t,this.#Et=i,this.#wt&&this.M53(this.RANK),this.FACE.appendChild(this.#Et);{const t=this.#Lt(e.toLowerCase());this.FACE.appendChild(t)}}M53(t){const e=document.createElement("span");e.innerText=t,this.#Et.appendChild(e)}#Lt(t){this.M212();const e=document.createElementNS("http://www.w3.org/2000/svg","svg");return e.setAttribute("class","SuitIcon"),e.innerHTML=`<use href="#suit-${t}"/>`,e}M155(t,e){super.M155(t,e),this.FACE.style.fontSize=Math.round(.4*t)+"px"}static async M122(t){try{const e=M30("flex-box/"),i=await fetch(e+t),s=await i.text(),n=document.getElementById("card-sprite-sheet");n&&n.remove();const r=document.createElement("div");r.id="card-sprite-sheet",r.style.display="none",r.innerHTML=s,document.body.appendChild(r)}catch(t){}}M169(){return this.#yt}M170(){return this.#wt}M211(){return this.#bt}M144(){return!this.#yt&&!this.#wt}M212(){return this.COLOR===O}M171(){return this.COLOR===P}M196(){return this.RANK===$}M172(){return this.RANK===W}M197(){return this.RANK===Y}M198(){return this.RANK%2==0}M213(){return this.RANK%2!=0}M199(t){return this.SUIT===t}M90(){return this.#yt?tt.name:this.#bt?Q[q]:Q[this.RANK]||this.RANK.toString()}M91(){return this.#yt?tt.suit:U[this.SUIT]||"Unknown"}M54(){return this.#yt?tt.symbol:this.#bt?Z[q]:Z[this.RANK]||this.M90()}M65(){return K[this.COLOR]||"Unknown"}},it=1/0,st=!0,nt=!0,rt=class extends x{#mt=nt;#kt=st;constructor(t,e,i,s,n,r,a={}){const{max_cards:h=it,flip_after:o=st,face_up:l=nt,sorting:c=null,tuck:u=!1,uniform:d=!0,parent:_=null,reverse_z:p=!1}=a;super(t,e,i,s,n,r,{max_count:h,sorting:c,tuck:u,uniform:d,parent:_,reverse_z:p}),this.M42(et.K105),this.ELEMENT&&this.ELEMENT.classList.add("BoxOfCards"),this.M121(l),this.M66(o)}#Ct(t,e){t.M121(e)}M228(t,e=!0){return t instanceof et?(super.M228(t,e),this.#kt?t.M80(this.#Ct.bind(this,t,this.#mt)):t.M121(this.#mt),this):(this.Error("Add","Not a Card instance",t),this)}M191(t){return this.M228(t,!1)}M192(t){return this.M228(t,!0)}M139(t){return t instanceof et?super.M139(t):(this.Error("Includes","Not a Card instance",t),this)}M141(t,e=!0,i=0){const s=t.length;if(0===s)return this;for(let e=0;e<s;e++){const i=t[e];if(!(i instanceof et))return this.Error("BatchAdd","Not a Card instance",i),this}if(this.M140()+s>this.M84())return this.Error("BatchAdd","I am full"),this;super.M141(t,e,i);for(let e=0;e<s;e++){const i=t[e];this.#kt?i.M80(this.#Ct.bind(this,i,this.#mt)):i.M121(this.#mt)}return this}M193(t){return t instanceof et?(super.M193(t),this):(this.Error("Remove","Not a Card instance",t),this)}M87(t=null,e=0){const i=null===t?[...this.GetEntities()]:t,s=i.length;if(0===s)return this;for(let t=0;t<s;t++){const e=i[t];if(!(e instanceof et))return this.Error("Remove","Not a Card instance",e),this}return super.M87(t,e),this}M123(t){return super.M85(t)}M121(t=!0){return this.#mt=!!t,this}M66(t=!0){return this.#kt=!!t,this}};function at(t,e){return t.IDX-e.IDX}var ht=class{#It=[];#Tt=[];#Nt=[];#St=null;#At=0;#Dt=[];constructor(t={},e={}){const{jokers:i=0,exclude_ranks:s=[],exclude_cards:n=[],suits:r=j,seed:a=0}=t;this.#At=a,this.#Rt(r,s,n,i),this.#St={smooth:e.smooth??!0,touch_down_events:e.touch_down_events??!0,velocity_px_ms:e.velocity_px_ms??100,flip_time:e.flip_time??500,face_up:e.face_up??!0,visible:e.visible??!0,flip_axis:e.flip_axis??"y"},this.M210()}#Pt(t,e,i){return(t&A)===e&&(t&D<<I)===i}#Rt(t,e,i,s){for(const s of t){const t=s===B||s===z?O:P;for(let n=1;n<=13;n++){if(e.includes(n))continue;if(i.some(t=>this.#Pt(n|s,t.rank,t.suit)))continue;const r=n|s|t,a=new et(this.#It.length,r);this.#It.push(a)}}for(let t=0;t<s;t++){const e=G|(t%2==0?P:O),i=new et(this.#It.length,e);this.#It.push(i)}}M92(t){let e=0;for(const i of t)for(let t=0;t<this.#It.length;++t){const s=this.#It[t];if(this.#Pt(s.DNA,i.rank,i.suit)){e+=1,this.#It.splice(t,1),this.#Dt.push(s);break}}this.#Ot()}M67(t){}#Ot(){this.#Nt=[],this.#Tt=this.#It.map((t,e)=>e)}M210(t={}){this.#Ot();const e=new Set;this.#It.forEach(t=>{const i=t.M189();i&&e.add(i)}),e.forEach(t=>t.M209());const i=this.#St;for(const e in t)i.hasOwnProperty(e)&&(i[e]=t[e]);for(const t of this.#It)t.M210(i);return this}M222(t=null,e=0){if(null===t)return this;const i=this.M174(),s=e>0;return this.M165(t=>{t.M100(s),t.M116(s),t.M88(0),t.M121(!1)}),t.M141(i,!0,e>0?e:0),this.M165(t=>{t.M88(this.#St.flip_time),t.M116(this.#St.smooth)}),this}M163(t=0){let i=Math.random;0!==(t=t||this.#At)&&(t="string"==typeof t?M98(t):t,i=e.M36(t));const s=this.#Tt;for(let t=s.length-1;t>0;t--){const e=Math.floor(i()*(t+1));[s[t],s[e]]=[s[e],s[t]]}return this}M173(t=0){return this.#At="string"==typeof t?M98(t):0|t,this.#At}M223(){if(0===this.#Tt.length)return null;const t=this.#Tt.pop();return this.#Nt.push(t),this.#It[t]}M174(){const t=[];return this.#Tt.forEach(e=>{t.push(this.#It[e])}),this.#Nt=this.#Tt,this.#Tt=[],t}M145(){const t=this.#Tt[this.#Tt.length-1];return this.M175(t)}M175(t){return this.#It[t]}M55(t){if("function"!=typeof t)return[];const e=[];for(let i=this.#Tt.length-1;i>=0;i--){const s=this.#Tt[i],n=this.#It[s];t(n)&&(this.#Tt.splice(i,1),this.#Nt.push(s),e.push(n))}return e}M68(t,e){t|=0,e|=0,this.#It.forEach(i=>i.M155(t,e))}M176(){return this.#It.length}M32(){return this.#Tt.length}M165(t){return"function"!=typeof t||this.#It.forEach((e,i)=>t(e,i)),this}M33(t,e){const i=t.SUIT,s=e.SUIT;return i<s?-1:i>s?1:Math.sign(t.RANK-e.RANK)}},ot="off",lt=class extends rt{static K60=ot;static K61="top";static K34="right";static K29="bottom";static K47="left";#Kt=null;#Ft=!1;#Bt=0;#Vt=null;constructor(t,i,s={}){const{max_cards:n=1/0,counter_position:r=ot,pop_effect:a=!1,face_up:h=!0,parent:o=null}=s;super(t,i,x.K117,x.K112,x.K107,!0,{max_cards:n,parent:o}),this.#zt(),this.#jt(),this.M24(r),this.M69(a),this.M121(h),e.M10(this,"COUNTER",this.#Kt)}#zt(){const t=this.ELEMENT;t.classList.add("PileOfCards");const e=document.createElement("span");e.classList.add("PileCounter"),e.innerText="0",t.appendChild(e),this.#Kt=e}M228(t,e=!0){return super.M228(t,e),this.#Ut(t,e),this}#Ut(t,e=!0){t.M134()?(this.#Bt++,t.M80(()=>{this.#Bt--,this.#jt(),this.#Gt(e?t:null),e||this.#Vt===t||t.M100(!1)})):(this.#Gt(e?t:null),e||this.#Vt===t||t.M100(!1),this.#jt())}#Gt(t=null){const e=this.M140();if(0===e)return void(this.#Vt=null);const i=this.#Vt;if(null===t)for(let i=e-1-this.#Bt;i>=0;--i){const e=this.M85(i);if(!e.M132()){t=e;break}}i!==t&&(i&&i.M100(!1),this.#Vt=t,t.M100(!0))}M141(t,e=!0){super.M141(t,e);const i=t.length;let s;for(let e=0;e<i;e++)s=t[e],s.M100(!1);return this.#jt(),this.#Gt(e?s:null),this}M193(t){return super.M193(t),this.#Ht(t),this}#Ht(t,e=!0){t.M100(!0),t.M132()&&this.#Bt--,e&&(this.#Vt===t&&(this.#Vt=null,this.#Gt(null)),this.#jt())}M87(t=null,e=0){const i=this.#Vt,s=null===t?[...this.GetEntities()]:t,n=s.length;if(0===n)return this;super.M87(t,e);for(let t=0;t<n;t++){const e=s[t];this.#Ht(e,!1)}return s.includes(i)&&this.#Gt(),this.#jt(),this}M209(){return super.M209(),this.#Vt=null,this.#Bt=0,this.#jt(),this}M146(t){return this.M228(t,!0)}M93(t){return this.M228(t,!1)}M94(){const t=this.M167();return t&&this.M193(t),t}M45(){const t=this.M166();return t&&this.M193(t),t}M187(){return this.M167()}M124(){return this.M166()}M163(){const t=this.M140();if(t>0&&this.#qt(),t<=1)return;const e=this.#Vt;super.M163();const i=this.M85(t-1);return e!==i&&(e.M100(!1),i.M100(!0),this.#Vt=i),this}M24(t){return this.ELEMENT.dataset.counter=t,this}M69(t){return this.#Ft=!!t,this}#jt(){const t=this.M140()-this.#Bt;this.#Kt.innerText=t,this.#Ft&&this.#qt()}#qt(){const t=this.#Kt;t.classList.remove("PopEffect"),this.M78(),t.classList.add("PopEffect")}debug(){const t=this.M140();for(let e=0;e<t;++e)this.M85(e)}M177(){const t=this.M140();return 0===t?null:this.M85(t-1)}M107(){return 0===this.M140()?null:this.M85(0)}},ct=class{#$t;#Wt=[];#Yt;#Xt={};#Jt=null;#Qt="";constructor(t,e,i){this.#$t=t+"_",this.#Yt=e,this.#Qt=i??""}M125(t,e){this.#Wt.push({id:t,schema:e}),e.forEach(t=>{const e=localStorage.getItem(this.#$t+t.id);null!==e?this.#Xt[t.id]=this.#Zt(e):(this.#Xt[t.id]=t.default,this.M224(t.id,t.default))})}#Zt(t){return"true"===t||"false"!==t&&(isNaN(t)||""===t?t:Number(t))}M200(){for(const{id:e,schema:i}of this.#Wt)this.#te(t(e),i)}#te(t,e){if(!t)throw new Error("SettingsManager::RenderTo » No parent");this.#Jt=t;const i=e.map(t=>this.#ee(t));this.#Jt.innerHTML=i.join(""),this.#Jt.querySelectorAll("INPUT").forEach(t=>{this.#ie(t).classList.contains("AppSettingNotImplemented")||t.classList.add("Clickable")}),this.#Jt.querySelectorAll("LABEL").forEach(t=>{this.#ie(t).classList.contains("AppSettingNotImplemented")||t.classList.add("Clickable")}),this.#se()}#ie(t){let e=t.parentElement;do{if("DIV"===e.tagName&&e.classList.contains("AppSettingsRow"))return e;e=e.parentElement}while(null!==e);return e}#ee(t){const e=this.#Xt[t.id];let i="";"radio"===t.type?i=t.options.map((i,s)=>`\n                <label>\n                    <input type='radio' name='${t.id}' value='${s}' ${e===s?"checked":""}>\n                    ${i}\n                </label>\n            `).join(""):"range"===t.type?i=`\n                <input type='range' id='${t.id}' \n                    min='${t.min}' max='${t.max}' step='${t.step}' \n                    value='${e}'>\n            `:"checkbox"===t.type?i=`\n                <input type='checkbox' id='${t.id}' ${e?"checked":""}>\n            `:"text"===t.type&&(i=`\n                <input type='text' id='${t.id}' \n                    value='${e}'>\n            `);let s="AppSettingsRow";return t.not_implemented&&(s+=" AppSettingNotImplemented"),`\n            <div class='${s}' data-setting-id='${t.id}'>\n                <p class='AppSettingsMainLabel'>${t.label}</p>\n                <div class='AppSettingsInputWrapper'>${i}</div>\n            </div>\n        `}#se(){this.#Jt.addEventListener("input",t=>{t.stopPropagation(),t.preventDefault();const e=t.target,i=e.name||e.id;let s="checkbox"===e.type?e.checked:e.value;isNaN(s)||"range"!==e.type||(s=Number(s)),this.M56(i,s)}),this.#Jt.addEventListener(this.#Qt,t=>{"INPUT"===t.target.tagName&&(t.is_onesie_ui=!0),"LABEL"===t.target.tagName&&(t.is_onesie_ui=!0)})}M56(t,e){this.#Xt[t]=e,this.M224(t,e),this.#Yt&&this.#Yt(t,e)}M224(t,e){localStorage.setItem(this.#$t+t,e)}M229(t){return this.#Xt[t]}},ut="https://",dt="rqhvlh0vwdwv",_t=window.visualViewport,pt="AppRotate",Mt="AppError",ft="AppErrorInfo",mt="AppViewport",gt="PageHidden",yt="Hidden",wt=pt.toLowerCase(),bt=Mt.toLowerCase(),Et="Home".toLowerCase(),vt="Play".toLowerCase(),xt=class s{static K90=1;static K96=2;static K115=3;#ne=null;#re=null;#ae=new Map;#he=s.K90;#oe=null;#le=null;#ce=null;#ue=null;#de=null;#_e=null;#pe=null;#Me=null;#fe=null;#me=null;#ge=null;#Qt="";#ye=!0;#we=null;#be=null;constructor(t={}){this.#Qt=e.M129?"touchstart":"click",this.#Ee(t);const i=t.start_page||Et;requestAnimationFrame(()=>this.M148(i))}#Ee(t){if(this.#ne=document.getElementById(mt),null===this.#ne)throw new Error("App » Element not found: #"+mt);this.#ve();const e=this.#ae.get(wt);if(!e)throw new Error("App » Element not found: #"+pt);e.classList.add(pt);const i=this.#ae.get(bt);if(!i)throw new Error("App » Element not found: #"+Mt);if(i.classList.add(Mt),this.#le=document.getElementById(ft),!this.#le)throw new Error("App » Element not found: #"+ft);this.#xe(t),this.#Le(),this.#ke(),this.#Ce(),this.#Ie(t),this.#Te(t),this.#he=t.page_mode??1,this.#Ne(),this.#Me=t.on_resize||this.#Me||null,this.#fe=t.on_click||this.#fe||null,this.#me=t.on_page||this.#me||null}#xe(t){const e=new k("Onesie");e.M100(!0),e.M121(!1),e.M116(!1),this.#_e=e;const i=this.#ae.get(Et);if(i.appendChild(e.ELEMENT),i.classList.add("Clickable"),t.blank_card)return;const s=t.game_name||"Some Card Game",n=t.game_designer||"Some Great Designer",r=t.game_build||("undefined"!=typeof BUNDLE_ID?BUNDLE_ID:"0000-0000-0000"),a="p";if(!t.blank_back){const t=document.createElement(a);t.classList.add("h1"),t.innerHTML="ONESIE",e.BACK.appendChild(t);const i=document.createElement(a);i.classList.add("h2"),i.innerHTML="1p card games",e.BACK.appendChild(i);const s=document.createElement(a);s.classList.add("h3"),s.innerHTML="build:<br><span>"+r+"</span>",e.BACK.appendChild(s)}if(!t.blank_face){const t=document.createElement(a);t.classList.add("h1"),t.innerHTML=s;const i=document.createElement(a);i.classList.add("h2"),i.innerHTML="<small>designed by:</small><br>"+n;const h=document.createElement(a);h.classList.add("h2"),h.innerHTML="<small>coded by:</small><br>Pedro Fontoura";const o=document.createElement(a);o.classList.add("h3"),o.innerHTML="build:<br><span>"+r+"</span>";const l=document.createElement(a);l.classList.add("h3"),l.innerHTML="♦ a solitaire card game ♦";for(const s of[t,l,i,h])e.FACE.appendChild(s)}}#ve(){document.querySelectorAll("#"+mt+" > section").forEach(t=>{this.#ae.set(t.id.toLowerCase(),t),t.classList.add(gt)})}#Ce(){window.addEventListener("resize",()=>this.#Ne()),window.addEventListener("contextmenu",t=>{if(t.preventDefault(),t.stopPropagation(),"touchstart"===this.#Qt)return;const e=new MouseEvent(this.#Qt,{view:window,bubbles:!0,cancelable:!0,clientX:t.clientX,clientY:t.clientY});t.target.dispatchEvent(e)},{passive:!1}),window.addEventListener("unhandledrejection",t=>{if(t.preventDefault(),t.stopPropagation(),t.reason.stack){const e=[this.#Se(t.reason.stack)].join("<br>");this.#Ae("Rejected",e)}else this.#Ae("Rejected",t.reason.message)}),window.addEventListener("error",t=>{t.preventDefault(),t.stopPropagation();const e=[t.error.message,t.error.fileName,t.error.lineNumber,this.#Se(t.error.stack)].join("<br>");this.#Ae("Error",e)}),this.#ue.addEventListener(this.#Qt,t=>{this.#De(),t.stopPropagation(),this.#de.classList.toggle(yt)}),Array.from(this.#de.children).forEach(t=>{const e=this.#Re(t);this.#ae.get(e)?t.addEventListener(this.#Qt,t=>{this.#De(),t.stopPropagation(),this.#Pe(t)}):t.remove()}),this.#_e.M14().addEventListener(this.#Qt,t=>{this.#De(),t.stopPropagation(),this.#_e.M142()?this.M148(vt):this.#_e.M221()}),this.M178(Et).addEventListener(this.#Qt,t=>{this.#De(),t.stopPropagation(),this.#_e.M221()}),window.addEventListener(this.#Qt,t=>{t.stopPropagation(),this.#Oe(t)})}#De(){e.M60||e.M129&&e.M29()}#Pe(t){const e=this.#Re(t.target);this.#ae.get(e)&&this.M148(e)}#Oe(t){if(t.is_onesie_ui)return;let e=0,i=0;if("touchstart"===this.#Qt){const s=t.touches[0];e=s.clientX,i=s.clientY}else e=t.clientX,i=t.clientY;if(this.#fe){if(!this.#ye)return;this.#fe(t.target,0|e,0|i)}}#Le(){this.#ce=document.getElementById("AppSideMenu"),this.#ue=document.getElementById("AppSideMenuMain"),this.#de=document.getElementById("AppSideMenuGroup"),this.#de.classList.add(yt),e.M129&&this.#ce.classList.add("TopSpacing")}#Se(t){return"string"==typeof t?t.split("at ").join("<br>&bull; "):"Stack: "+t}#Ae(t,e){null!==this.#le&&(this.#le.innerHTML+="<h3>"+t+"</h3>"+e,this.M148(bt))}#Ne(){const t=_t.width,e=_t.height;if(this.#Ke(),this.#_e){const i=.75*Math.min(t,e)|0,s=.7*i|0;this.#_e.M155(s,i),this.#_e.M79(t-s>>1,e-i>>1)}this.#Me&&this.#Me(t,e,this.#ce.offsetWidth)}get M214(){return _t.width}get M201(){return _t.height}#Ke(){3!==this.#he&&((Math.sign(_t.width-_t.height)>=0?1:2)!==this.#he?this.#re!==wt&&(this.#oe=this.#re,this.M148(wt)):null!==this.#oe&&(this.M148(this.#oe),this.#oe=null))}async#ke(){await this.M126("./assets/app_icons.svg","icons-sprite-sheet")}async M126(t,e){try{const i=await fetch(t),s=await i.text(),n=document.getElementById(e);n&&n.remove();const r=(new DOMParser).parseFromString(s,"image/svg+xml").querySelector("svg");r&&(r.id=e,r.style.display="none",document.body.insertAdjacentElement("afterbegin",r))}catch(t){}}async M147(t){try{const e=await fetch(t);return e.ok?await e.json():null}catch(t){return null}}#Re(t){const e=t.querySelector("use");if(e)return(e.getAttribute("href")||e.getAttribute("xlink:href")).split("-").pop().toLowerCase()}get M108(){return this.#ce.offsetWidth}get M225(){return this.#_e}M148(t,e=!1){const i=this.#re===t;t=t.toLowerCase();const s=this.#ae.get(t);if(!s)throw new Error("App » No such page: "+t);t===vt&&this.#ye,this.#re&&this.#ae.get(this.#re).classList.add(gt),s.classList.remove(gt),this.#re=t,t===Et?this.#ce.classList.add(yt):this.#ce.classList.remove(yt);const n=this.#_e;n&&n.M121(!1),this.#me&&!e&&this.#me(t,i)}M127(t){return this.#re===t}M178(t){const e=this.#ae.get(t);if(!e)throw new Error("App » No such page: "+t);return e}M70(){const t=window.matchMedia("(display-mode: standalone)").matches,e=!0===window.navigator.standalone;return t||e}M149(t=!0){(t=!!t)&&this.#ye?this.#de.classList.remove(yt):this.#de.classList.add(yt)}M43(t,e){t.classList.add("Clickable"),t.addEventListener(this.#Qt,i=>{i.preventDefault(),i.stopPropagation(),e(t)})}get M230(){const t=new Date,i=`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}-${String(t.getHours()).padStart(2,"0")}-${String(t.getMinutes()).padStart(2,"0")}`;return e.M98("Onesie"+i)}async M95(t=!0){const i=await this.#Fe();if("Wrpq}Qjt7qxvn"===e.M61(i,9))return this.#ye=!0,!0;let s=!1;return window.top===window.self&&"ynm{x6oxw}x~{j7pr}q~k7rx"===e.M61(window.location.hostname,9)&&(s=e.M28("key",0,!0)===this.M230),this.#ye=s,!s&&t&&this.#Be(),s}#Be(){const t=ut+e.M61("ynm{x6oxw}x~{j7pr}q~k7rx8xwn|rn8HyjpnFyuj",-9);self.location.replace(t)}#Fe=async()=>(await fetch(window.location.href,{method:"HEAD"})).headers.get("server");async M57(t,i=!0){const s=ut+e.M61("etm2gsyrxivetm2hiz3z6",-4)+"/"+e.M61(dt,-3)+"/"+e.M61(t,-5)+"/"+(i?"up":"down");if(!e.M60)try{const t=await fetch(s),e=await t.json();e.data&&e.data}catch(t){}}#Ie(e={}){const i=e.settings||{};"function"==typeof i.on_change&&(this.#ge=i.on_change),this.#pe=new ct(i.prefix??"GAME",this.#Ve.bind(this),this.#Qt),t("GameSettings")&&this.#pe.M125("GameSettings",i.schema||[]),t("GeneralSettings")&&this.#pe.M125("GeneralSettings",[{id:"deck_seed",label:"Deck seed",type:"text",default:"",not_implemented:!0},{id:"cards_theme",label:"Cards theme",type:"radio",options:["Normal","Vintage","Modern"],default:0,not_implemented:!0},{id:"cards_axis",label:"Cards flip axis",type:"radio",options:["Random","X","Y"],default:0,not_implemented:!0},{id:"cards_speed",label:"Cards speed",type:"range",min:1,max:5,step:1,default:3},{id:"cards_flip",label:"Cards flip time",type:"range",min:1,max:5,step:1,default:3}]),this.#pe.M200()}#Te(i){const s=t("Stats");if(!s)return;const n=document.createElement("dl"),r=document.createElement("dt");r.innerHTML="Global stats";const a=document.createElement("dd");a.innerHTML="Wins: <span id='stats_wins'>#</span>";const h=document.createElement("dd");h.innerHTML="Losses: <span id='stats_losses'>#</span>",n.appendChild(r),n.appendChild(a),n.appendChild(h),s.appendChild(n),"function"==typeof Counter&&(this.#we=new Counter({debug:!0,timeout:8e3,workspace:e.M61(dt,-3)}),"string"==typeof i.counter&&this.M109(i.counter,"get"))}async M109(t,i="get"){if(!["get","up","down"].includes(i))return;const s=e.M61(t,-5);if(!e.M60&&null!==this.#we)try{const t=await this.#we[i](s);"200"===t.code&&s.endsWith("-play")&&this.#ze(t)}catch(t){}}#ze(e){t("stats_wins")&&(t("stats_wins").innerHTML=e.data.up_count),t("stats_losses")&&(t("stats_losses").innerHTML=e.data.down_count)}M110(t,e=!1){const i=this.#pe.M229(t);return e?"cards_speed"===t?this.#je(i):"cards_flip"===t?this.#Ue(i):i:i}#Ve(t,e){switch(t){case"cards_theme":return void this.#Ge(e);case"cards_flip":if(null!==this.#be)return void this.#He(e);break;case"cards_speed":if(null!==this.#be)return void this.#qe(e)}null!==this.#ge&&this.#ge(t,e)}#Ge(t){const e="./assets/"+"theme-#.svg".replace("#",t);this.M126(e,"card-sprite-sheet")}#je(t){return i.M207(t||3,1,5,.25,2)}#qe(t){if(null===this.#be)return;const e=this.#je(t);this.#be.M165(t=>t.M40(e))}#Ue(t){return i.M207(t||3,1,5,100,1100)}#He(t){if(null===this.#be)return;const e=this.#Ue(t);this.#be.M165(t=>t.M88(e))}M179(t){this.#be=t??null,this.#qe(this.#pe.M229("cards_speed")),this.#He(this.#pe.M229("cards_flip")),this.#Ge(this.#pe.M229("cards_theme"))}},Lt="fsm_data_changed",kt=class{#$e=()=>{};V45=!0;V42=new Map;V23=null;V32={};V28=[];V29=[];constructor(t,e=[]){if(this.#$e=t,e.length>0)for(const t of e)this.V28.push(t)}M46(t){this.#We(t)}M58(t){if(null!==t&&!this.V42.has(t))throw new Error("FSM::AssertStateId » Unknown id: "+t)}M59(t){if(!this.V32.hasOwnProperty(t))throw new Error("FSM::AssertDataKey » Unknown key: "+t)}M71(t,e,i=null){this.M58(t),this.M58(e),null!==t&&t!==this.V23.ID||this.#We(e,i)}#We(t,e=null){if(this.V23&&this.V23.M226(),this.V23=this.V42.get(t),!this.V23)throw new Error("FSM::#TransitionTo » No state! Key:",t);return this.V23.M215(e),!0}M47(t){if(null!==t)return this.M58(t),this.V23.ID===t}M72(t,e={}){this.M58(t);for(const[t,i]of Object.entries(e))this.M59(t),i!==this.V32[t]&&(this.V32[t]=i,this.#Ye(t,i));return this.M47(t)}#Ye(t,e){this.V28.includes(t)&&this.#Xe(Lt,{key:t,value:e})}M73(t,e){if(this.M58(t),"string"==typeof e)return this.M59(e),this.V32[e];const i={};for(const t of e)this.M59(t),this.V32[t],i[t]=this.V32[t];return i}M150(){const t=this.V32;for(const[e,i]of Object.entries(t));}M202(t=null,e,i){t&&this.M58(t),this.#Xe(e,i)}#Xe(t,e){this.#$e(t,e)}M128(t){this.M58(t),this.V23&&(this.V23.Sleep(),this.V29.push(this.V23)),this.V23=this.V42.get(t),this.V23.M215()}M151(){const t=this.V29;if(0===t.length)throw new Error("FSM::PopState » Stack is empty");this.V23.M226(),this.V23=t.pop(),this.V23.WakeUp()}},Ct=class{constructor(t,i){e.M10(this,"ID",t),e.M10(this,"CONTROLLER",i)}M215(t){}M226(){}M180(t,e){return!1}M96(t,e){return!1}M111(t,e){return!1}M202(...t){return this.CONTROLLER.M202(this.ID,...t)}M181(...t){return this.CONTROLLER.M73(this.ID,...t)}M182(...t){return this.CONTROLLER.M72(this.ID,...t)}M71(...t){return this.CONTROLLER.M71(this.ID,...t)}},It=class extends Ct{constructor(t){super(t)}},Tt=class extends Ct{constructor(t,e){super(t,e)}M215(){this.M202(f,!0);const t=this.CONTROLLER.M27(this.ID);this.M202(p,{key:"game_over",value:!0,center:t})}},Nt=class extends Ct{constructor(t,e){super(t,e)}M215(){this.M202(f,!1)}},St=class extends Ct{constructor(t,e){super(t,e)}async M215(){const t=this.CONTROLLER.M25(this.ID);if(0===t)return void(0===this.CONTROLLER.M35(this.ID)?this.M71(n):this.M71(h));const e=this.CONTROLLER.M35(this.ID);let i=Math.min(t,4-e);for(;i-- >0;)await this.CONTROLLER.M48(this.ID);this.M71(h)}},At=class extends Ct{constructor(t,e){super(t,e)}M215(){if(0===this.CONTROLLER.M26(this.ID))return void this.M71(o);const t=this.CONTROLLER.M8(this.ID);this.M202(p,{key:"player_discard",value:!0,center:t})}M96(t,e){return e===y?(t.M44(),!0):e===g&&(this.#Je(),!0)}M180(t,e){return e===g?(this.#Je(),!0):e===y&&(this.CONTROLLER.M6(this.ID),!0)}async#Je(){const t=this.CONTROLLER.M1(this.ID);t>0&&await this.CONTROLLER.M2(this.ID),this.M71(o,t)}},Dt=class extends Ct{constructor(t,e){super(t,e)}async M215(t){this.M202(p,{key:"player_discard",value:!1,center:null});const e=4-this.CONTROLLER.M26(this.ID);e>0&&(this.CONTROLLER.M15(this.ID)<e&&await this.CONTROLLER.M34(this.ID),await this.CONTROLLER.M37(this.ID,e)),this.M71(l)}},Rt=class extends Ct{constructor(t,e){super(t,e)}M215(){const t=this.CONTROLLER.M27(this.ID);this.M202(p,{key:"enemy_row",value:!0,center:t})}M96(t,e){if(e===y)return t.M44(),!0;if(e===w){const e=this.#Qe(t);if(null!==e)return this.M202(p,{key:"enemy_row",value:!1}),this.M71(e,t),!0}return!1}#Qe(t){const e=this.CONTROLLER.M16(this.ID),[i,s]=this.#Ze(e),n=t.SUIT,r=t.RANK;return i===n&&s>=r?c:1===e.length?(this.CONTROLLER.M9(this.ID,t),d):2===e.length?u:null}#Ze(t){if(0===t.length)return[null,0];let e=null,i=0,s=0,n=0,r=!0;for(const a of t)if(a.M169())n+=1;else if(null===e&&(e=a.SUIT),a.SUIT===e){const t=a.M211()?14:a.RANK;i+=t,t>s&&(s=t)}else r=!1;return r?(n>0&&(i+=n*s),[e,i]):[null,0]}},Pt=class extends Ct{constructor(t,e){super(t,e)}async M215(t){const e=this.CONTROLLER.M16(this.ID);e.push(t);for(const t of e)t.M81(!1),t.M121(!1),this.CONTROLLER.M11(this.ID,t);await t.M117(),this.M71(a)}},Ot=class extends Ct{constructor(t,e){super(t,e)}async M215(t){const e=this.CONTROLLER.M16(this.ID);for(const t of e)if(t.M81(!1),t.M121(!1),await this.CONTROLLER.M17(this.ID,t),this.#ti(t))return this.#ei(t);t.M121(!1),await this.CONTROLLER.M38(this.ID,t),this.M71(a)}#ti(t){return t.M170()||t.M211()}#ei(t){t.M121(!0),this.M71(r)}},Kt=class extends Ct{constructor(t,e){super(t,e)}async M215(t){const e=this.CONTROLLER.M16(this.ID).pop();return e.M81(!1),await this.CONTROLLER.M17(this.ID,t),this.#ti(t)?this.#ei(t):(e.M121(!1),await this.CONTROLLER.M17(this.ID,e),this.#ti(e)?this.#ei(e):void this.M71(a))}#ti(t){return t.M170()||t.M211()}#ei(t){t.M121(!0),this.M71(r)}},Ft=class extends kt{static K48=Lt;#be=null;#ii=0;#si=null;#ni=null;#ri=null;#ai=null;#hi=null;#oi=null;#li=null;#ci={position:new Array(2),status:0};#ui=null;constructor(t={}){const{on_message_request:e,V28:i=[],parent_node:n=window.document.body}=t;super(e,i),this.#ui=n,this.#di();for(const t of i)this.V32.hasOwnProperty(t);this.#_i(),this.M46(s),E.K32=!1,et.K95=14,this.#pi()}#di(){}#_i(){const t=[[s,It],[n,Tt],[r,Nt],[a,St],[h,At],[o,Dt],[l,Rt],[c,Pt],[u,Ot],[d,Kt]];for(const[e,i]of t)this.V42.set(e,new i(e,this))}M72(t,e){return super.M72(t,e),this.#Mi(),this.V23.ID===t}#Mi(){}async M180(t,e,i){let s=!1;this.V45||(s=await this.#fi(t)),this.#ci.position[0]=e,this.#ci.position[1]=i,this.#ci.status=s,this.M202(null,M,this.#ci)}async#fi(t){if(!t.classList.contains("Clickable"))return!1;if(t.classList.contains("CardBody")){const e=parseInt(t.dataset.idx),i=this.#be.M175(e),s=this.#mi(i);return this.V23.M96(i,s)}const e=this.#gi(t);return await this.V23.M180(t,e)}#mi(t){const e=t.M189();return e===this.#ai?y:e===this.#ri?w:e===this.#oi?g:m}#gi(t){return t===this.#oi.ELEMENT?g:t===this.#ai.ELEMENT?y:m}M216(s={}){const n=e.M28("seed",Date.now()%1e6,!0);this.M202(null,_,n),this.#be.M210(s).M163(n).M222(this.#si),this.V45||(this.#yi(),this.#wi());const r=i.M63()?"x":"y";this.#be.M165(t=>{const e=t.BODY.style;e.transition="none",t.M89(r),t.M78(),e.transition=""});const h=t("AppErrorHistory");h&&(h.innerHTML=""),this.#bi(()=>{this.V45=!1,this.M46(a)})}async#bi(t){const i=this.#si,s=i.M86(t=>t.M169()||2<=t.RANK&&t.RANK<=4);s.forEach(t=>{t.M116(!1),t.M78()}),i.M87(s),this.#hi.M141(s);const n=[];for(let t=1;t<=4;++t){const t=this.#si.M94();n.push(t),this.#ri.M228(t)}await Promise.all(n.map(t=>t.M117())),await e.M206(500),n.filter(t=>t.M170()||t.M211()).forEach(t=>{t.M121(!1),this.#si.M93(t)}),await e.M206(64),s.forEach(t=>{t.M116(!0),t.M78()});const r=[];for(let t=1;t<=4;++t){const t=this.#hi.M94();r.push(t),this.#ai.M228(t)}t()}#Ei(t,e,i,s,n){let r=(i-s-n)/4|0,a=r/.7|0;return 4*a+2*s>e&&(a=(e-2*s)/4|0,r=.7*a|0),[r,a]}M152(t,e,i=0){const s=Math.min(t,e),n=.05*s,r=i||.1*s,[a,h]=this.#Ei(t,e,s,n,r),o=4*a,l=4*h,c=(Math.min(18,Math.round(.1*a)),t-o-r>>1),u=t<e?.25*(e-l>>1):0,d=e-l-3*u>>1,_=.8*h|0,p=.66*_|0;this.#be.M68(p,_);const M=.9*h|0;let f=d;return this.#si.M41(p,_),this.#si.M113(a,M,c,f),this.#ni.M41(p,_),this.#ni.M113(a,M,c+3*a,f),f+=h+u,this.#ri.M41(p,_),this.#ri.M113(o,M,c,f),f+=h+u,this.#ai.M41(p,_),this.#ai.M113(o,M,c,f),f+=h+u,this.#hi.M41(p,_),this.#hi.M113(a,M,c,f),this.#oi.M41(p,_),this.#oi.M113(a,M,c+3*a,f),this}M183(){return this.#be}M25(t){return this.M58(t),this.#si.M140()}M15(t){return this.M58(t),this.#hi.M140()}M26(t){return this.M58(t),this.#ai.M140()}M8(t){this.M58(t);const e=this.#oi;return[e.M51(),e.M64()]}M27(t){this.M58(t);const e=this.#ri;return[e.M51(),e.M64()]}M16(t){return this.M58(t),this.#ai.M86(t=>t.M101())}M9(t,e){return this.M58(t),e===this.#ri.M167()}M34(t){this.M58(t);const i=this.#oi.M195();return this.#oi.M209(),e.M20(i),this.#hi.M141(i,!1),i[0].M117()}M35(t){return this.M58(t),this.#ri.M140()}M48(t){this.M58(t);const e=this.#si.M94();return this.#ri.M228(e,!1),e.M117()}M1(t){return this.M58(t),this.#ai.M195().filter(t=>t.M101()).length}M2(t){this.M58(t);const e=this.#ai.M195().filter(t=>t.M101());return 0===e.length?Promise.resolve():(this.#ai.M87(e),e.forEach(t=>{t.M81(!1),t.M121(!1),this.#oi.M228(t)}),e[0].M117())}M37(t,e){this.M58(t);const i=[];for(;e-- >0;){const t=this.#hi.M94();i.push(t)}return this.#ai.M141(i),i[0].M117()}M6(t,e){this.M58(t),this.#ai.M165(t=>t.M44())}M17(t,e){return this.M58(t),this.#ni.M146(e),e.M117()}M38(t,e){return this.M58(t),this.#si.M93(e),e.M117()}M11(t,e){return this.M58(t),this.#oi.M146(e),e.M117()}#yi(){}#wi(){super.M72(null,{})}#vi(t,e,i=200){const s=t.length;if(0===s)return null;const n=t[0];if(i<=0)return e===this.#ni?e.M141(t,!0):e===this.#ri?e.M141(t,!1):e.M141(t),n;for(let n=0;n<s;++n)setTimeout(()=>{const i=t.pop();e===this.#ni?e.M146(i):e===this.#ri?e.M93(i):e.M228(i)},n*i);return n}#pi(){this.#xi(),this.#Li()}#xi(){this.#be=new ht({jokers:2},{visible:!1,touch_down_events:!0,smooth:!0,flip_axis:i.M63(.5)?"x":"y"}),this.#be.M165(t=>{this.#ui.appendChild(t.ELEMENT),t.M169()?t.FACE.innerHTML="&#9733;":t.M211()&&t.M53(14)}),this.#ii=this.#be.M176()}#Li(){const e=this.#be.M176(),i=this.#ui;let s=0;this.#si=new lt(s++,"EnemyDrawPile",{max_cards:e,flip_after:!1,face_up:!1,parent:i,counter_position:lt.K34,pop_effect:!0}),this.#si.ELEMENT.classList.add("DrawPile"),this.#hi=new lt(s++,"EnemyDrawPile",{max_cards:e,flip_after:!1,face_up:!1,parent:i,counter_position:lt.K34,pop_effect:!0}),this.#hi.ELEMENT.classList.add("DrawPile"),this.#ni=new lt(s++,"EnemyDiscardPile",{max_cards:e,flip_after:!1,face_up:!1,parent:i,counter_position:lt.K47,pop_effect:!0}),this.#ni.ELEMENT.classList.add("DiscardPile"),this.#oi=new lt(s++,"PlayerDiscardPile",{max_cards:e,flip_after:!1,face_up:!1,parent:i,counter_position:lt.K47,pop_effect:!0}),this.#oi.ELEMENT.classList.add("DiscardPile"),this.#oi.ELEMENT.classList.add("Clickable"),this.#ri=new rt(s++,"EnemyRow",rt.K117,rt.K107,rt.K107,!0,{max_cards:4,flip_after:!0,face_up:!0,parent:i}),this.#ri.ELEMENT.classList.add("EnemyRow"),this.#ai=new rt(s++,"PlayerRow",rt.K117,rt.K107,rt.K107,!0,{max_cards:4,flip_after:!0,face_up:!0,sorting:at,parent:i}),this.#ai.ELEMENT.classList.add("PlayerRow"),this.#ai.ELEMENT.classList.add("Clickable"),this.#li=t("InGameInfo")}};import Bt from"stampit";import stampit from"stampit";var Vt=stampit({props:{M112:!1,M227:null,M18:NaN},methods:{setImage(t){this.resetImage(),this.M112=!0;let e=null;"string"==typeof t?(e=new Image,e.onload=()=>{this.M227=e,this.M18=e.width/e.height},e.onerror=()=>{this.resetImage()},e.src=t):(t instanceof HTMLImageElement||t instanceof Image)&&(this.M227=t,this.M18=t.width/t.height)},getImage(){return this.M227&&this.M227.complete?this.M227:null},getImageAspectRatio(){return this.M227&&this.M227.complete?this.M18:NaN},resetImage(){this.M227=null,this.M18=NaN,this.M112=!1}}});import zt from"stampit";import{ARRAY_TYPE as jt}from"glMatrix";import{fromValues as Ut,create as Gt}from"vec2";var vec2={fromValues:Ut,create:Gt},Ht=zt({methods:{validateVector(t,e=null){const i=t||e;if(!i)return vec2.create();if(!(Array.isArray(i)||i instanceof jt))throw new Error("Vector input must be an Array or glMatrix ARRAY_TYPE.");if(2!==i.length)throw new Error("Vector input must have exactly 2 elements.");if(!Number.isFinite(i[0])||!Number.isFinite(i[1]))throw new Error("Vector array must contain only numeric values.");return vec2.fromValues(i[0],i[1])}}});import{add as qt,create as $t,scaleAndAdd as Wt,zero as Yt,copy as Xt}from"vec2";import Jt from"stampit";import Qt from"stampit";var Zt=Qt({methods:{makeReadOnly:function(t){if("object"!=typeof t||null===t||Array.isArray(t))return;const e={};Object.entries(t).forEach(([t,i])=>{Object.prototype.hasOwnProperty.call(this,t),e[t]={configurable:!1,writable:!1,value:i,enumerable:!0}}),Object.defineProperties(this,e)}}}),te={add:qt,create:$t,scaleAndAdd:Wt,zero:Yt,copy:Xt},ee="#FFFFFF",ie=!0,se=2*Math.PI,ne=Bt({props:{M203:null},init({radius:t=3,color:e=ee,opacity:i=1,fill:s=ie,user_data:n=null}){if(!Number.isFinite(t)||t<=0)throw new Error("'radius' must be a positive number.");if(!Number.isFinite(i)||i<0||i>1)throw new Error("'opacity' must be a number between 0.0 and 1.0.");if("string"!=typeof e||e.length<3)throw new Error("'color' must be a valid string format ( e.g., '#FFF' or 'red' ).");this.radius=t,this.color=e,this.opacity=i,this.fill=s,this.user_data=n},methods:{render(t){if(t.save(),t.globalAlpha=this.opacity,this.M112){const e=this.getImageAspectRatio();if(Number.isFinite(e)){const i=this.getImage(),s=this.position[0],n=this.position[1],r=(i.width,i.height,this.M18,2*this.radius),a=r*e;t.drawImage(i,s-a/2,n-r/2,a,r)}}else t.beginPath(),t.arc(...this.position,this.radius,0,se),this.fill?(t.fillStyle=this.color,t.fill()):(t.strokeStyle=this.color,t.stroke());t.restore()},resetRender(){this.resetImage(),this.fill=ie}}}),re=Bt({init({position:t,velocity:e}){this.position=this.validateVector(t),this.velocity=this.validateVector(e),this.acceleration=te.create()},methods:{applyForce(t){te.add(this.acceleration,this.acceleration,t)},updatePhysics(t=1){te.scaleAndAdd(this.velocity,this.velocity,this.acceleration,t),te.scaleAndAdd(this.position,this.position,this.velocity,t),te.zero(this.acceleration)},resetPhysics(){te.zero(this.position),te.zero(this.velocity),te.zero(this.acceleration)}}}),ae=Bt({props:{age:0,alive:!1},init({life:t=120}){if(!Number.isFinite(t)||t<=0)throw new Error("'life' must be a positive number.");this.life=t},methods:{updateLife(t=1){return this.age+=t,this.alive=this.age<this.life,this.alive},resetLife(){this.age=0,this.alive=!1}}}),he=Bt({methods:{config(t={}){if(this.opacity=(t.opacity??this.opacity)||1,this.radius=(t.radius??this.radius)||3,this.color=(t.color??this.color)||ee,this.life=(t.life??this.life)||120,this.fill=t.fill??ie,t.position&&te.copy(this.position,this.validateVector(t.position)),t.velocity&&te.copy(this.velocity,this.validateVector(t.velocity)),!Number.isFinite(this.radius)||this.radius<=0)throw new Error("'radius' must be a positive number.");if(!Number.isFinite(this.opacity)||this.opacity<0||this.opacity>1)throw new Error("'opacity' must be a number between 0.0 and 1.0.");if(!Number.isFinite(this.life)||this.life<=0)throw new Error("'life' must be a positive number.")}}}),oe=Bt().compose(Ht,Vt,ne,re,ae,he,Bt({methods:{reset(){this.resetRender(),this.resetPhysics(),this.resetLife()}}})),le=Jt({init({object_stamp:t,pool_size:e=1e3}){if("function"!=typeof t)throw new Error("'object_stamp' must be a constructor function ( a stamp or factory ).");if(!Number.isInteger(e)||e<=0)throw new Error("'pool_size' must be a positive integer.");this.makeReadOnly({pool_size:e,object_stamp:t})}}),ce=Jt({init(t,{instance:e}){const i=new Array(this.pool_size);let s=0;const n=new WeakMap;for(let t=0;t<this.pool_size;t++){const e=this.object_stamp();e.reset(),i[t]=e}e._setIndex=function(t,e){n.set(t,e)},e.get=function(){if(s>=this.pool_size)return null;const t=i[s];return n.set(t,s),s++,t},e.free=function(t){const e=n.get(t);if(void 0===e||e>=s)return!1;s--;const r=i[s];return i[s]=t,i[e]=r,t!==r&&n.set(r,e),t.reset(),n.delete(t),!0},e.getActiveCount=function(){return s},e._getPoolArray=function(){return i}}}),ue=Jt({methods:{M165:function(t){const e=this._getPoolArray();let i=0;for(;i<this.getActiveCount();){const s=e[i];this._setIndex(s,i),!1!==t(s)?i++:this.free(s)}},M204:function(t){this._getPoolArray().forEach(e=>t(e))}}}),de=Jt().compose(Zt,le,ce,ue);import{fromValues as _e,copy as pe,random as Me,create as fe}from"vec2";var me={fromValues:_e,copy:pe,random:Me,create:fe},ge=me.create(),ye="hfwi2hfuyzwj2uqf",we="hfwi2hfuyzwj2{nxnyx",CardCapture=class{#ki=null;#Ci=!1;#Ii=null;#ui=null;#ye=!1;#Ti=me.create();#Ni=null;#Si=0;#Ai=null;#Di=null;#Ri=null;#Pi=null;#Oi=0;#Ki=0;#Fi={count:0,center:null,status:!1,particle:null};#Bi={count:0,center:null,status:!1,particle:null};#Vi={count:0,center:null,status:!1,particle:null};constructor(t){this.#ki=new xt({game_name:"CARD CAPTURE",game_designer:"Lucas Gentry",game_build:t,start_page:e.M28("page",Et),page_mode:xt.K115,on_resize:this.M152.bind(this),on_click:this.M180.bind(this),on_page:this.M205.bind(this),counter:ye,settings:{prefix:"capture",schema:[]}}),this.#ki.M109(we,"up"),this.#ui=this.#ki.M178(vt),this.#Si=this.#ki.M108,this.#ye=this.#ki.M95(),this.#zi(),this.#ji(),this.#Ui(),this.#ki.M179(this.#Ii.M183())}M152(t,e,i){this.#Ii.M152(t,e,i),this.#Ai.width=t,this.#Ai.height=e,this.#Di.width=t,this.#Di.height=e,this.#Si=i}M180(t,i,s){this.#Ci&&(e.M60||this.#ye)&&this.#Ii.M180(t,i,s)}M205(t,e){const i=this.#Ci;this.#Ci=t===vt,this.#Ci&&(this.#ki.M149(),i||window.requestAnimationFrame(this.#Gi.bind(this)),e&&this.#Hi())}M153(e,i){if("string"!=typeof e)throw new Error("! "+e+" = "+typeof e);switch(e){default:return;case Ft.K48:let e=i.value;Number.isFinite(e)&&!Number.isInteger(e)&&(e=Math.round(e)),this.#qi(i.key,e);break;case p:let s=i.value;Number.isFinite(s)&&!Number.isInteger(s)&&(s=Math.round(s)),this.#qi(i.key,s,i.center);break;case _:const n=t("deck_seed");n&&(n.value=i);const r=t("error_seed");r&&(r.innerHTML=i);break;case"msg#user:error":break;case M:this.#$i(i.position,i.status);break;case f:this.#ki.M109(ye,i?"up":"down"),this.#Oi=i?1:-1}}#Hi(){this.#ki.M149(!1),this.#Oi=0,this.#Fi.status=!1,this.#Bi.status=!1,this.#Vi.status=!1;const t={velocity_px_ms:this.#ki.M110("cards_speed",!0),flip_time:this.#ki.M110("cards_flip",!0)};this.#Ii.M216(t),this.#ki.M109(we,"down")}#ji(){this.#Ii=new Ft({on_message_request:(t,e)=>this.M153(t,e),V28:[],parent_node:this.#ki.M178(vt)}),this.#Ii.M152(this.#ki.M214,this.#ki.M201)}#Ui(){const t=document.createElement("canvas");t.id="canvas_clicks",t.width=window.innerWidth,t.height=window.innerHeight,t.style.zIndex=200,this.#ui.appendChild(t);const e=document.createElement("canvas");e.id="canvas_particles",e.width=window.innerWidth,e.height=window.innerHeight,e.style.zIndex=100,this.#ui.appendChild(e),this.#Pi=t.getContext("2d"),this.#Ri=e.getContext("2d"),this.#Di=t,this.#Ai=e,this.#Ni=de({object_stamp:oe,pool_size:1e4}),this.#Ni.M204(t=>{t.user_data={click:!0}})}#Gi(t){if(this.#Ci){if(this.#Ki,this.#Ki=t,this.#Fi.status)if(0===this.#Fi.count){this.#Fi.count=70;const t=this.#Wi(this.#Fi.center,0);this.#Fi.particle=t}else this.#Fi.count-=1;if(this.#Bi.status)if(0===this.#Bi.count){this.#Bi.count=70;const t=this.#Wi(this.#Bi.center,1);this.#Bi.particle=t}else this.#Bi.count-=1;if(this.#Vi.status)if(0===this.#Vi.count){this.#Vi.count=10;const t=this.#Wi(this.#Vi.center,2);this.#Vi.particle=t}else this.#Vi.count-=1;this.#Ni.M165(t=>{if(!t.updateLife())return t.user_data.click=!0,!1}),this.#Pi.clearRect(0,0,window.innerWidth,window.innerHeight),this.#Ri.clearRect(0,0,window.innerWidth,window.innerHeight),this.#Ni.M165(t=>{t.opacity=i.M159(t.age,t.life,5),t.updatePhysics();const e=t.user_data.click;e?t.radius*=1.05:t.radius+=1,t.render(e?this.#Pi:this.#Ri)}),0!==this.#Oi&&this.M154(this.#Ri,1===this.#Oi?"SUCCESS":"YOU LOST",this.#Si),window.requestAnimationFrame(this.#Gi.bind(this))}}#Yi(){const t=window.visualViewport.width,e=window.visualViewport.height,i=Math.min(t,e),s=.03*i;let n=Math.floor((i-s-this.#Si-s)/4),r=Math.floor(n/.7);4*r>e&&(r=.9*Math.floor(e/4),n=Math.floor(.7*r));const a=(t-4*n-this.#Si)/2,h=Math.floor((e-4*r)/2);be(this.#Ri,a,h,n,r,4,4)}#$i(t,e){if(e)return;const i=this.#Ni.get();i&&(i.config({position:t,velocity:ge,color:e?"lime":"darkorange",life:e?60:30,radius:10,opacity:1,fill:!e}),i.user_data.click=!0)}#Wi(t,e){const s=this.#Ni.get();if(!s)return;const n=2===e?"hsl("+i.M114(40,60)+", 100%, 50%)":"white";return s.config({position:t,velocity:2===e?me.random(this.#Ti,i.M77(1,3)):ge,color:n,life:60*(1!==e?2.2:3.3),radius:1,opacity:1,fill:2===e}),s.user_data.click=!1,s}#zi(){}#qi(e,i,s=null){if("player_discard"===e)return this.#Fi.status=i,void(i?(this.#Fi.center=s,this.#Fi.count=0):this.#Fi.particle.life=0);if("enemy_row"===e)return this.#Bi.status=i,void(i?(this.#Bi.center=s,this.#Bi.count=0):this.#Bi.particle.life=0);if("game_over"===e)return this.#Vi.status=i,void(i?(this.#Vi.center=s,this.#Vi.count=0):this.#Vi.particle.life=0);const n=t(e);n&&(n.innerHTML=i)}M154(t,e="",i=0){const s=t.canvas.width-i,n=t.canvas.height,r=Math.floor(.18*s);t.font="bold "+r+"px card-game",t.fillStyle="rgba( 100, 149, 237, 0.50 )",t.textAlign="center",t.textBaseline="middle",t.fillText(e,s/2,n/2)}},be=(t,e,i,s,n,r,a)=>{const h=r*s,o=a*n;t.strokeStyle="orange",t.beginPath();for(let n=0;n<=r;n++){const r=e+n*s;t.moveTo(r,i),t.lineTo(r,i+o)}for(let s=0;s<=a;s++){const r=i+s*n;t.moveTo(e,r),t.lineTo(e+h,r)}t.stroke()};export{CardCapture};
//# sourceMappingURL=bundle.min.js.map