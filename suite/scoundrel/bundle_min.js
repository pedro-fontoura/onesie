// Build: January 31 2026 23:42

export const BUNDLE_URL = import.meta.url.split( '/' ).pop();

export const BUNDLE_ID = "2026-0131-2342";

function t(t){return document.getElementById(t)}class i{static get M48(){return window.location.href.includes("nighthawk.home")}static get M66(){return screen.orientation&&screen.orientation.type?screen.orientation.type.includes("landscape"):window.innerWidth>window.innerHeight}static get M120(){return navigator.maxTouchPoints>0}static get M91(){return navigator.userAgentData&&"Android"===navigator.userAgentData.platform||/android/i.test(navigator.userAgent)}static get M37(){const t=window.matchMedia("(display-mode: standalone)").matches,i=!0===window.navigator.standalone;return t||i}static get M175(){return/iPad|iPhone|iPod/.test(navigator.userAgent)||/Mac/.test(navigator.userAgent)&&navigator.maxTouchPoints>1}static M5(t,i,e){Object.defineProperty(t,i,{value:e,writable:!1,enumerable:!0,configurable:!1})}static M11(t,i){if(!Array.isArray(t))return;const e=t.indexOf(i);-1!==e&&t.splice(e,1)}static M12(t){if(!Array.isArray(t))return t;for(let i=t.length-1;i>0;i--){const e=Math.floor(Math.random()*(i+1));[t[i],t[e]]=[t[e],t[i]]}return t}static M24(t){return function(){let i=t+=1831565813;return i=Math.imul(i^i>>>15,1|i),i^=i+Math.imul(i^i>>>7,61|i),((i^i>>>14)>>>0)/4294967296}}static M92(t){let i=0;for(let e=0;e<t.length;e++)i=(i<<5)-i+t.charCodeAt(e),i|=0;return i}static M17(t,i=null,e=!1){let s=new URLSearchParams(window.location.search).get(t);if(null===s)return i;if(e){const t=parseInt(s,10);return isNaN(t)?i:t}return s}static M67(t,i=document.documentElement,e=null){t.startsWith("--")||(t="--"+t);const s=window.getComputedStyle(i).getPropertyValue(t).trim();return""===s?e:s.replace(/^['"]|['"]$/g,"")}static M18(){if(i.M175)return;const t=document.documentElement,e=t.requestFullscreen||t.webkitRequestFullscreen;if(!e)return;const s=i.M91?{navigationUI:"hide"}:{};e.call(t,s).catch(t=>{})}static M19(t){const i=document.querySelector('script[type="importmap"]');if(!i)throw new Error('GetImportMapValue » <script type="importmap"> not found in DOM.');const e=JSON.parse(i.textContent),s=e.imports?.[t];if(void 0===s)throw new Error("GetImportMapValue » Key not found in imports: "+t);return s}static M49(t,i=0){if("string"!=typeof t)return t;let e="";for(let s=0;s<t.length;s++){const n=t.charCodeAt(s);e+=String.fromCharCode(n+i)}return e}static M147(t,i,e){const s=t.style;s.width=i+"px",s.height=e+"px"}static M105(t,i,e,s,n){const r=t.style;r.width=i+"px",r.height=e+"px",r.left=s+"px",r.top=n+"px"}}class e{static get M176(){return(1+Math.sqrt(5))/2}static get M177(){return 2*Math.PI}static get M148(){return Math.PI/2}static get M68(){return Math.PI/180}static get M50(){return 180/Math.PI}static M149(t){return t*e.M68}static M150(t){return t*e.M50}static M106(t,i){return Math.floor(Math.random()*(i-t+1))+t}static M69(t,i){return t+Math.random()*(i-t)}static M51(t=.5){return Math.random()<t}static M25(t){return function(){let i=t+=1831565813;return i=Math.imul(i^i>>>15,1|i),i^=i+Math.imul(i^i>>>7,61|i),((i^i>>>14)>>>0)/4294967296}}static M207(t,i,e){return t+(i-t)*e}static M197(t,i,e,s,n){return s+(t-i)*(n-s)/(e-i)}static M198(t,i,e){return Math.max(i,Math.min(t,e))}static M121(t,i,e,s){return Math.hypot(e-t,s-i)}static M151(t,i,e=2){if(i<=0)return 0;const s=t/i;return 1-Math.pow(s,e)}}var s="busy",n="success",r="fail",h="mk-room",o="room-decision",a="face-room",l="turn_ended",c="msg#deck:seed",u="user_error",d="ui:update",_="ui_click",M="game_over",p="location:unknown",f="location:draw",m="location:discard",g="location:room",w="location:hand",y=Object.defineProperty,v=class t{static K106=100;static K111=199;static K18=100;#t=0;#i=0;#e=100;#s=-1;#n=0;#r=0;#h=null;#o=null;#a=!1;#l=0;#c=0;#u=0;#d=0;#_=0;#M=0;#p=!1;#f=[];#m=!0;#g=!1;constructor(e,s,n=!1,r=0,h={}){i.M5(this,"IDX",e),i.M5(this,"ID",s);const{parent:o=null,is_box:a=!1}=h;i.M5(this,"IS_BOX",a),this.#l=r||t.K18,!0===n?this.#h=document.createElement("div"):n instanceof Node&&(this.#h=n),this.#h&&(this.#w(),o instanceof Node&&o.appendChild(this.#h))}#w(){i.M5(this,"ELEMENT",this.#h),this.#h.id=this.ID,this.#h.style.position="absolute",this.#h.style.top="0px",this.#h.style.left="0px",this.#h.style.zIndex=this.#e,this.#h.classList.add("FlexBoxEntity"),this.#h.dataset.smooth=this.#a?"yes":"no",this.#h.addEventListener("transitionend",this.#y.bind(this))}M152(){return this.#h&&(this.#h.remove(),this.#h=null,this.#f=null),this}M70(){return this.#h.offsetWidth,this}M93(){return this.#h}M122(){return this.#n}M107(){return this.#r}M178(){return this.#t}M153(){return this.#i}M105(t,i,e,s){this.#n=0|t,this.#r=0|i,s|=0,e|=0;const n=this.#t!==s||this.#i!==e;return n&&(this.#t=s,this.#i=e),this.#v(n),this}#b(){const t=window.getComputedStyle(this.#h).translate;t&&"none"!==t||(this.#u=0,this.#c=0);const i=t.split(" ");this.#u=parseFloat(i[0])||0,this.#c=parseFloat(i[1])||0}M71(t,i){if(t|=0,i|=0,this.#t===i&&this.#i===t)return this;if(this.#a){const e=this.M1(t,i);this.#E(e)}return this.#t=i,this.#i=t,this.#v(!0),this}M1(t,i){this.#b();const e=t-this.#u,s=i-this.#c;return Math.sqrt(e*e+s*s)/this.#l}M147(t,i){return t|=0,i|=0,this.#n===t&&this.#r===i||(this.#n=t,this.#r=i,this.#v(!1)),this}#v(t=!0){this.#x();const i=this.#h.style;i.width=this.#n+"px",i.height=this.#r+"px",t?(i.translate=this.#i+"px "+this.#t+"px 0px",this.#a&&(i.zIndex=199+this.#s)):i.zIndex=this.#e}#y(t){"translate"===t.propertyName&&(this.#b(),Math.abs(this.#u-this.#i)<1&&Math.abs(this.#c-this.#t)<1&&(this.#h.style.zIndex=this.#e,this.#p&&this.#k()))}M38(){return this.#M>0}M123(){return this.#M>0}M124(){return this.#M>0}#k(){const t=this.#f.length;for(let i=0;i<t;i++)this.#f[i](this);this.#f.length=0}M108(t=!0){return this.#a=!!t,this.#h.dataset.smooth=this.#a?"yes":"no",this}M125(){return this.#a}M72(t){return"function"!=typeof t?this:this.#p?(this.#f.push(t),this):void 0}M7(){this.#f.length=0}M13(t=!0){return this.#p=!!t,this}Error(t,i,...e){this.constructor.name,e.length>0&&e.forEach((t,i)=>{})}M109(){return this.#s}M110(t=-1){return this.#s=t,this}M179(t,i=-1){return null!==this.#o?(this.Error("SetBox","Already set",this.#o,t),this):(this.#o=t,i>=0&&(this.#s=i),this)}M126(){return this.#o=null,this.#s=-1,this}M180(){return this.#o}M208(t){return this.#o===t}M181(){return null!==this.#o}#E(t){return!Number.isFinite(t)||t<0?(this.Error("SetTranslationTime","Bad number",t),this):this.#h?(this.#h.style.transitionDuration=t+"ms",this):this}M26(i=0){return this.#l=i||t.K18,this}M209(t){return t|=0,this.#e===t||(this.#e=t,this.#h.style.zIndex=t),this}M127(t){return!Number.isFinite(t)||t<0?(this.Error("SetBaseZ","Bad number",t),this):(t|=0,this.#e<t&&(this.#e=t),this.#h.style.zIndex=t,this)}#x(){this.#d=this.#t+(this.#r>>1),this.#_=this.#i+(this.#n>>1)}M52(){return this.#d}M39(){return this.#_}M4(t,i){const e=t-this.#i,s=i-this.#t;return Math.sqrt(e*e+s*s)/this.#l}M111(){return this.#m}M128(){return!this.#m}M94(t=!0){return t=!!t,this.#m===t||(this.#m=t,this.M15(t)),this}M40(){return this.#m=!this.#m,this.M15(this.#m),this}M95(){return this.#g}M73(t=!0){return t=!!t,this.#g===t||(this.#g=t,this.M20(t)),this}M31(){return this.#g=!this.#g,this.M20(this.#g),this}},b=1/0,E=class extends v{static K118=11;static K107=12;static K108=3;static K112=1;static K119=2;static K109=4;static K102=5;static K110=6;static K113=7;#L=11;#C=!0;#I=[];#A=null;#N=null;#T=null;#D=b;#R=0;#K=0;#S=0;#P=0;#O=!1;#B=0;#V=0;#F=!1;#z=0;#H=0;#U=v.K106;#j=null;#G=null;#q=null;#W=null;#Y=!1;#X=0;#$=!1;constructor(t,i,e,s,n,r=!1,h={}){const{max_count:o=b,sorting:a=null,tuck:l=!1,uniform:c=!1,parent:u=null,velocity_px_ms:d=0,reverse_z:_=!1}=h;super(t,i,r,d,{is_box:!0,parent:u}),this.#D=o,this.M74(_),this.#L=e,11!==e&&12!==e&&this.Error("FlexBox","Bad orientation",e),this.#C=11===this.#L,"function"==typeof a&&(this.#A=a);const M=Number.isFinite(this.#D)?this.#D:64;this.#j=new Int32Array(M),this.#G=new Int32Array(M),s=s||4,this.#T=this.#J(s),3!==(n=n||3)&&1!==n&&2!==n&&this.Error("FlexBox","Bad align",n),this.#N=this.#J(n),this.#F=c,l>0&&this.M154(l),this.ELEMENT&&this.ELEMENT.classList.add("FlexBox")}M152(){super.M152(),this.#I=null,this.#N=null,this.#T=null,this.#A=null}#Q(t,i){if(t.length<i){const e=t.length<<1;t=new Int32Array(e>i?e:i)}return t}M218(t,i=!0){if(!(t instanceof v))return this.Error("Add","Not a FlexBoxEntity",t),this;if(this.#I.includes(t))return this.Error("Add","Already here",t),this;if(this.M185())return this.Error("Add","I am full",t),this;t.M181()&&t.M180().M184(t),i?this.#I.push(t):this.#I.unshift(t);const e=this.#I.length;let s=!i&&e>1;return t.M179(this,i?this.#I.length-1:0),this.#Q(this.#j,e),this.#Q(this.#G,e),null!==this.#A&&(this.#I.sort(this.#A),s=!0),s&&this.#Z(),this.#F?(0!==this.#z&&0!=this.#H||(this.#z=t.M122(),this.#H=t.M107(),this.#Y>0&&this.#tt()),this.#B+=this.#z,this.#V+=this.#H):(this.#B+=t.M122(),this.#V+=t.M107()),this.#O=!0,this.M8(),this}M182(t){return this.M218(t,!1)}M183(t){return this.M218(t,!0)}M184(t){return t instanceof v?this.#I.includes(t)?(t.M126(),t.M7(),i.M11(this.#I,t),this.#Z(),this.#F?(this.#B-=this.#z,this.#V-=this.#H):(this.#B-=t.M122(),this.#V-=t.M107()),this.#O=!0,this.M8(),this):(this.Error("Remove","Not here",t.ID),this):(this.Error("Remove","Not a FlexBoxEntity",t),this)}M147(t,i){t|=0,i|=0,super.M147(t,i),this.#R=t,this.#K=i}M105(t,i,e,s,n=!0){return t|=0,i|=0,e|=0,s|=0,super.M105(t,i,e,s),this.#R=t,this.#K=i,this.#P=e,this.#S=s,n&&this.M8(),this}M27(t,i,e=-1){return this.#z=0|t,this.#H=0|i,this.#Y>0&&this.#tt(),this.#F=!0,this.#O=!1,e>=0&&(this.#U=e),this.M14(),this}M74(t=!0){this.#$=!!t,this.M8()}M28(t=-1){t>=0&&(this.#U=0|t)}M14(){let t=0,i=0;const e=this.#I.length;if(e>0){if(this.#F){if(0===this.#z||0===this.#H){const t=this.#I[0];this.#z=t.M122(),this.#H=t.M107(),this.#Y>0&&this.#tt()}t=e*this.#z,i=e*this.#H}else for(let s,n=0;n<e;n++)s=this.#I[n],t+=s.M122(),i+=s.M107();(isNaN(t)||isNaN(i))&&this.Error("UpdateEntitiesSize","total width/height is NaN"),(t<0||i<0)&&this.Error("UpdateEntitiesSize","total width/height is negative",t,i)}return this.#B=t,this.#V=i,this.#O=!0,this}#it(t=-1){if(-1===t&&(t=this.#I.length),0===t)return this;this.#O||this.M14();const i=this.#C;let e=i?this.#B:this.#V,s=this.#Y&&t>1;if(s){const n=i?this.#R:this.#K;s=e>n,s&&(this.#et(t,n,e),e-=(t-1)*this.#X)}return i?(this.#q=this.#T(!0,!0,e,t),this.#W=this.#N(!1,!1,this.#V,t)):(this.#W=this.#T(!0,!1,e,t),this.#q=this.#N(!1,!0,this.#B,t)),s&&this.#st(i,t),t}#et(t,i,e){this.#C?this.#z:this.#H;const s=(e-i)/(t-1);this.#X=s}#st(t,i){const e=t?this.#q:this.#W;for(let t=1;t<i;t++)e[t]-=t*this.#X}M154(t=!0){this.#Y=!!t,this.#Y&&this.M8()}M129(t){return this.#F||0===t?t<0||t>1?(this.Error("SetTuck","Tuck must be [ 0 .. 1 ]",t),this):(this.#Y=t,this.#tt(),void(this.#I.length>1&&this.M8())):(this.Error("SetTuck","Cannot tuck non-uniform entities"),this)}#tt(){if(!this.#F)return void(this.#X=0);const t=this.#C?this.#z:this.#H;this.#X=t*this.#Y|0}M71(t,i){super.M71(t,i),this.#P=t,this.#S=i}M8(t=!0){const i=this.#I.length;if(0===i)return this;t&&this.#it(i);const e=this.#U;for(let t=0;t<i;t++){const s=this.#I[t];this.#$?s.M209(e+(i-t)):s.M209(e+t),s.M71(this.#q[t],this.#W[t]),s.IS_BOX&&s.M8(!0)}return this}#nt(t,i=-1){if(i<0&&(i=t.M109()),this.#$){const e=this.#I.length;t.M209(this.#U+(e-i))}else t.M209(this.#U+i);return t.M71(this.#q[i],this.#W[i]),this}#J(t){switch(t){case 3:return this.#rt.bind(this);case 1:return this.#ht.bind(this);case 2:return this.#ot.bind(this);case 4:return this.#at.bind(this);case 5:return this.#lt.bind(this);case 6:return this.#ct.bind(this);case 7:return this.#ut.bind(this)}}#dt(t,i,e){const s=(t?this.#j:this.#G).subarray(0,e),n=i?this.#P:this.#S;var r=i?this.#z:this.#H;if(t&&this.#F)for(var h=0;h<e;++h)s[h]=n+h*r;else{var o=n;for(h=0;h<e;++h){if(t&&h>0){if(!this.#F){const t=this.#I[h-1];r=i?t.M122():t.M107()}o+=r}s[h]=o}}return s}#ht(t,i,e,s){return this.#dt(t,i,s)}#rt(t,i,e,s){const n=this.#dt(t,i,s),r=i?this.#R:this.#K,h=r-e>>1;var o=i?this.#z:this.#H;if(!t&&this.#F){const t=r-o>>1;for(var a=0;a<s;++a)n[a]+=t}else for(a=0;a<s;++a)if(t)n[a]+=h;else{if(!this.#F){const t=this.#I[a];o=i?t.M122():t.M107()}n[a]+=r-o>>1}return n}#ot(t,i,e,s){const n=this.#dt(t,i,s),r=i?this.#R:this.#K,h=Math.round(r-e);var o=i?this.#z:this.#H;if(!t&&this.#F){const t=r-o;for(var a=0;a<s;++a)n[a]+=t}else for(a=0;a<s;++a)if(t)n[a]+=h;else{if(!this.#F){const t=this.#I[a];o=i?t.M122():t.M107()}n[a]+=r-o}return n}#ut(t,i,e,s){const n=this.#dt(t,i,s),r=(i?this.#R:this.#K)>>1;var h=i?this.#z:this.#H;const o=n[0];for(var a=0;a<s;++a){if(!this.#F){const t=this.#I[a];h=i?t.M122():t.M107()}n[a]=o+r-(h>>1)}return n}#lt(t,i,e,s){if(s<2)return this.#ht(t,i,e,s);const n=this.#dt(t,i,s),r=i?this.#R:this.#K,h=Math.round((r-e)/(s-1));for(var o=1;o<s;++o)n[o]+=o*h;return n}#at(t,i,e,s){const n=this.#dt(t,i,s),r=i?this.#R:this.#K,h=Math.round((r-e)/(s+1));for(let t=0;t<s;++t)n[t]+=(t+1)*h;return n}#ct(t,i,e,s){if(s<2)return this.#rt(t,i,e,s);const n=this.#dt(t,i,s),r=((i?this.#R:this.#K)-e)/s,h=r>>1;for(let t=0;t<s;++t)n[t]+=h+t*r|0;return n}M75(t){return!Number.isFinite(t)||t<=0?(this.Error("SetMaxCount","Bad number",t),this):(this.#D=0|t,this)}M76(){return this.#D}M185(){return this.#I.length>=this.#D}M96(t){return"function"!=typeof t||(this.#A=t),this}M97(t){return this.#T=this.#J(t||4),this}M210(t){return"function"!=typeof t&&(t=this.#A),"function"!=typeof t||(this.#I.sort(t),this.#Z(),this.M8()),this}#Z(t=-1){if(t<0&&(t=this.#I.length),!(t<0))for(let i=0;i<t;++i)this.#I[i].M110(i)}M155(){const t=this.#I.length;return t<=1||(M12(this.#I),this.#Z(t),this.M8()),this}M156(){return 0===this.#I.length}M130(t){return this.#I.includes(t)}M131(){return this.#I.length}M157(t){if("function"!=typeof t)return this;const i=this.#I.length;for(let e,s=0;s<i;s++)e=this.#I[s],t(e);return this}M158(){return this.#I.length>0?this.#I[0]:null}M98(){if(this.#I.length<=0)return null;const t=this.#I[0];return this.M184(t),t}M159(){const t=this.#I.length;return t>0?this.#I[t-1]:null}M99(){const t=this.#I.length;if(t<=0)return null;const i=this.#I[t-1];return this.M184(i),i}M77(t){return t<0||t>=this.#I.length?(this.Error("GetEntityAt","Bad idx",t),null):this.#I[t]}M186(){return[...this.#I]}M78(t){return"function"!=typeof t?null:this.#I.filter(t)}M199(){const t=this.#I.length;if(0===t)return this;for(let i=0;i<t;i++){const t=this.#I[i];t.M126(),t.M7()}return this.#I.length=0,this.#B=0,this.#V=0,this.#O=!0,this}#_t(t=0){const i=this.#I.length+t;return i>this.#D?(this.Error("#PrepareBatchAdd","Total exceeds max_count",i),this):(i>0&&(this.#j=this.#Q(this.#j,i),this.#G=this.#Q(this.#G,i)),this)}M132(t,i=!0,e=0){const s=t.length;if(0===s)return this;if(this.M185())return this.Error("BatchAdd","I am full"),this;const n=this.M131()+s;if(n>this.M76())return this.Error("BatchAdd","Not enough space"),this;for(let i=0;i<s;i++){const e=t[i];if(!(e instanceof v))return this.Error("BatchAdd","Not a FlexBoxEntity",e),this;if(this.#I.includes(e))return this.Error("BatchAdd","Already here",e),this}const r=[...this.#I],h=r.length;this.#_t(s);for(let e=0;e<s;e++){const s=t[e];s.M181()&&s.M180().M184(s),s.M179(this),i?this.#I.push(s):this.#I.unshift(s);const n=this.#F?this.#z:s.M122(),r=this.#F?this.#H:s.M107();this.#B+=n,this.#V+=r}this.#O=!0,null!==this.#A&&this.#I.sort(this.#A),this.#Z(n),this.#it(n);for(let t=0;t<h;t++){const i=r[t];this.#nt(i)}if(0===e)for(let i=0;i<s;i++){const e=t[i];this.#nt(e)}else{let i=e;e<=1&&(i=this.M2(t[0])*e);let n=0;for(let e=0;e<s;e++){const s=t[e];setTimeout(()=>{this.#nt(s)},n),n+=i}}return this}M79(t=null,e=0){const s=null===t?[...this.#I]:t,n=s.length;if(0===n)return this;for(let t=0;t<n;t++){const i=s[t];if(!(i instanceof v))return this.Error("BatchRemove","Not a FlexBoxEntity",i),this;if(!this.#I.includes(i))return this.Error("BatchRemove","Not here",i),this}for(let t=n-1;t>=0;t--){const e=s[t];i.M11(this.#I,e),e.M126(),e.M7();const n=this.#F?this.#z:e.M122(),r=this.#F?this.#H:e.M107();this.#B-=n,this.#V-=r}this.#O=!0;const r=this.#I,h=r.length;if(this.#Z(h),this.#it(h),0===e)this.M8(!1);else{let t=e;e<=1&&(t=this.M2(r[0])*e);let i=t;for(let e=0;e<h;e++){const s=r[e];setTimeout(()=>this.#nt(s),i),i+=t}}return this}M2(t){if(!t.M208(this))return this.Error("GetEntityTranslationTime","Not here",t),0;const i=t.M109();return i<0||i>=this.#I.length?(this.Error("GetEntityTranslationTime","Bad index",t),0):t.M1(this.#q[i],this.#W[i])}M3(t){return t.EstimateTravelTime(this.M39(),this.M52())}M160(t=""){for(let t=0;t<this.#I.length;++t)this.#I[t];return!0}},x={smooth:!0,touch_down_events:!1,velocity_px_ms:.5,visible:!1,selected:!1,flip_time:500,face_up:!0,flip_axis:"y"},k=class t extends v{static K106=110;#Mt=null;#pt=null;#ft=null;#mt=x.face_up;constructor(t){super(t,"Card_"+t,!0),this.#gt(t),i.M5(this,"BODY",this.#Mt),i.M5(this,"FACE",this.#pt),i.M5(this,"BACK",this.#ft),this.M200()}M152(){super.M152()}M200(i={}){for(const t in x){const e=i[t]??x[t];i[t]=e}this.M181()&&this.M180().M184(this),this.M7(),this.M108(i.smooth),this.M13(i.touch_down_events),this.M26(i.velocity_px_ms),this.M94(i.visible),this.M73(i.selected),this.M209(t.K106),this.M80(i.flip_time),this.M112(i.face_up),this.M81(i.flip_axis)}#gt(i){this.ELEMENT.classList.add("Card"),this.#Mt=document.createElement("div"),this.#Mt.classList.add("CardBody"),this.#Mt.classList.add("Clickable"),this.#Mt.dataset.idx=i,this.#Mt.card=this,this.#Mt.dataset.face=this.#mt?"up":"no",this.#Mt.dataset.visible=this.M111()?"yes":"no",this.#pt=document.createElement("div"),this.#pt.classList.add("CardFace"),this.#ft=document.createElement("div"),this.#ft.classList.add("CardBack"),this.#Mt.appendChild(this.#pt),this.#Mt.appendChild(this.#ft),this.ELEMENT.appendChild(this.#Mt),this.M127(t.K106)}M9(){return this.#Mt}M112(t=!0){return this.#mt=!!t,this.#Mt.dataset.face=this.#mt?"up":"down",this.OnFlip&&this.OnFlip(t),this}M133(){return this.#mt}M100(){return!this.#mt}M15(t){return this.#Mt.dataset.visible=t?"yes":"no",this}M20(t){return this.#Mt.dataset.selected=t?"yes":"no",this}M80(t){return!Number.isFinite(t)||t<0?(this.Error("SetFlipTime","Bad number",t),this):(this.#Mt.style.transitionDuration=t+"ms",this)}M81(t="x"){if("string"!=typeof t||1!==t.length)return this.Error("SetFlipAxis","Bad axis",t),this;if("x"!==(t=t.toLowerCase())&&"y"!==t)return this.Error("SetFlipAxis","Bad axis",t),this;const i="x"===t?"1":"0",e="y"===t?"1":"0";return this.#Mt.style.setProperty("--ROT_X",i),this.#Mt.style.setProperty("--ROT_Y",e),this}M211(){return this.#mt=!this.#mt,this.#Mt.dataset.face=this.#mt?"up":"down",this.OnFlip&&this.OnFlip(this),this}},L={};((t,i)=>{for(var e in i)y(t,e,{get:i[e],enumerable:!0})})(L,{K50:()=>S,K51:()=>O,K86:()=>P,K68:()=>j,K69:()=>tt,K70:()=>K,K87:()=>D,K88:()=>R,K19:()=>J,K20:()=>$,K98:()=>q,K89:()=>W,K71:()=>G,K90:()=>X,K72:()=>Q,K73:()=>Y,K42:()=>Z,K52:()=>A,K53:()=>N,K74:()=>C,K21:()=>T,K75:()=>I,K114:()=>H,K76:()=>B,K25:()=>V,K54:()=>z,K77:()=>U,K55:()=>F});var C=0,I=6,A=10,N=14,T=15,D=63,R=15,K=15,S=1<<A,P=2<<A,O={[S]:"Black",[P]:"Red"},B=1<<I,V=2<<I,F=3<<I,z=4<<I,H=[B,V,F,z].sort(),U={[B]:"Clubs",[V]:"Diamonds",[z]:"Hearts",[F]:"Spades"},j=1<<N,G=0,q=1,W=11,Y=12,X=13,$=Math.min(W,Y,X),J=Math.max(W,Y,X),Q={[q]:"Ace",[W]:"Jack",[Y]:"Queen",[X]:"King"},Z={[q]:"A",[W]:"J",[Y]:"Q",[X]:"K"},tt={name:"Joker",suit:"joker",symbol:"JKR",rank:G,flag:j},it=class extends k{#wt=!1;#yt=!1;#vt=null;constructor(t,e){super(t),i.M5(this,"DNA",e);const s=e&D,n=e&R<<I,r=e&K<<A;i.M5(this,"RANK",s),i.M5(this,"SUIT",n),i.M5(this,"COLOR",r),this.#wt=0!==(e&j),this.#yt=!this.#wt&&this.RANK>=$&&this.RANK<=J,this.#bt(),this.#Et()}M134(){return"("+this.IDX+") "+this.M82()+" of "+this.M83()}#bt(){const t=this.M82().toLowerCase(),i=this.M83().toLowerCase(),e=this.M201()?"red":"black",s=this.BODY;s.dataset.rank=t,s.dataset.suit=i,s.dataset.color=e,this.#wt?s.dataset.joker="yes":this.#yt&&(s.dataset.royal="yes")}#Et(){const t=this.M42().toUpperCase(),i=this.M83();this.FACE.innerHTML="";const e=document.createElement("p");e.innerText=t,this.#vt=e,this.#yt&&this.M41(this.RANK),this.FACE.appendChild(this.#vt);{const t=this.#xt(i.toLowerCase());this.FACE.appendChild(t)}}M41(t){const i=document.createElement("span");i.innerText=t,this.#vt.appendChild(i)}#xt(t){this.M201();const i=document.createElementNS("http://www.w3.org/2000/svg","svg");return i.setAttribute("class","SuitIcon"),i.innerHTML=`<use href="#suit-${t}"/>`,i}M147(t,i){super.M147(t,i),this.FACE.style.fontSize=Math.round(.4*t)+"px"}static async M113(t){try{const i=M19("flex-box/"),e=await fetch(i+t),s=await e.text(),n=document.getElementById("card-sprite-sheet");n&&n.remove();const r=document.createElement("div");r.id="card-sprite-sheet",r.style.display="none",r.innerHTML=s,document.body.appendChild(r)}catch(t){}}M201(){return this.COLOR===P}M161(){return this.COLOR===S}M162(){return this.#wt}M163(){return this.#yt}M135(){return!this.#wt&&!this.#yt}M202(){return this.RANK===q}M187(){return this.RANK===W}M164(){return this.RANK===Y}M188(){return this.RANK===X}M189(){return this.RANK%2==0}M203(){return this.RANK%2!=0}M190(t){return this.SUIT===t}M82(){return this.#wt?tt.name:Q[this.RANK]||this.RANK.toString()}M83(){return this.#wt?tt.suit:U[this.SUIT]||"Unknown"}M42(){return this.#wt?tt.symbol:Z[this.RANK]||this.M82()}M53(){return O[this.COLOR]||"Unknown"}},et=1/0,st=!0,nt=!0,rt=class extends E{#mt=nt;#kt=st;constructor(t,i,e,s,n,r,h={}){const{max_cards:o=et,flip_after:a=st,face_up:l=nt,sorting:c=null,tuck:u=!1,uniform:d=!0,parent:_=null,reverse_z:M=!1}=h;super(t,i,e,s,n,r,{max_count:o,sorting:c,tuck:u,uniform:d,parent:_,reverse_z:M}),this.M28(it.K106),this.ELEMENT&&this.ELEMENT.classList.add("BoxOfCards"),this.M112(l),this.M54(a)}#Lt(t,i){t.M112(i)}M218(t,i=!0){return t instanceof it?(super.M218(t,i),this.#kt?t.M72(this.#Lt.bind(this,t,this.#mt)):t.M112(this.#mt),this):(this.Error("Add","Not a Card instance",t),this)}M182(t){return this.M218(t,!1)}M183(t){return this.M218(t,!0)}M130(t){return t instanceof it?super.M130(t):(this.Error("Includes","Not a Card instance",t),this)}M132(t,i=!0,e=0){const s=t.length;if(0===s)return this;for(let i=0;i<s;i++){const e=t[i];if(!(e instanceof it))return this.Error("BatchAdd","Not a Card instance",e),this}if(this.M131()+s>this.M76())return this.Error("BatchAdd","I am full"),this;super.M132(t,i,e);for(let i=0;i<s;i++){const e=t[i];this.#kt?e.M72(this.#Lt.bind(this,e,this.#mt)):e.M112(this.#mt)}return this}M184(t){return t instanceof it?(super.M184(t),this):(this.Error("Remove","Not a Card instance",t),this)}M79(t=null,i=0){const e=null===t?[...this.GetEntities()]:t,s=e.length;if(0===s)return this;for(let t=0;t<s;t++){const i=e[t];if(!(i instanceof it))return this.Error("Remove","Not a Card instance",i),this}return super.M79(t,i),this}M114(t){return super.M77(t)}M112(t=!0){return this.#mt=!!t,this}M54(t=!0){return this.#kt=!!t,this}},ht=class{#Ct=[];#It=[];#At=[];#Nt=null;#Tt=0;#Dt=[];constructor(t={},i={}){const{jokers:e=0,exclude_ranks:s=[],exclude_cards:n=[],suits:r=H,seed:h=0}=t;this.#Tt=h,this.#Rt(r,s,n,e),this.#Nt={smooth:i.smooth??!0,touch_down_events:i.touch_down_events??!0,velocity_px_ms:i.velocity_px_ms??100,flip_time:i.flip_time??500,face_up:i.face_up??!0,visible:i.visible??!0,flip_axis:i.flip_axis??"y"},this.M200()}#Kt(t,i,e){return(t&D)===i&&(t&R<<I)===e}#Rt(t,i,e,s){for(const s of t){const t=s===V||s===z?P:S;for(let n=1;n<=13;n++){if(i.includes(n))continue;if(e.some(t=>this.#Kt(n|s,t.rank,t.suit)))continue;const r=n|s|t,h=new it(this.#Ct.length,r);this.#Ct.push(h)}}for(let t=0;t<s;t++){const i=j|(t%2==0?S:P),e=new it(this.#Ct.length,i);this.#Ct.push(e)}}M84(t){let i=0;for(const e of t)for(let t=0;t<this.#Ct.length;++t){const s=this.#Ct[t];if(this.#Kt(s.DNA,e.rank,e.suit)){i+=1,this.#Ct.splice(t,1),this.#Dt.push(s);break}}this.#St()}M55(t){}#St(){this.#At=[],this.#It=this.#Ct.map((t,i)=>i)}M200(){this.#St();const t=new Set;this.#Ct.forEach(i=>{const e=i.M180();e&&t.add(e)}),t.forEach(t=>t.M199());const i=this.#Nt;for(const t of this.#Ct)t.M200(i);return this}M212(t=null,i=0){if(null===t)return this;const e=this.M166(),s=i>0;return this.M157(t=>{t.M94(s),t.M108(s),t.M80(0),t.M112(!1)}),t.M132(e,!0,i>0?i:0),this.M157(t=>{t.M80(this.#Nt.flip_time),t.M108(this.#Nt.smooth)}),this}M155(t=0){let e=Math.random;0!==(t=t||this.#Tt)&&(t="string"==typeof t?M92(t):t,e=i.M24(t));const s=this.#It;for(let t=s.length-1;t>0;t--){const i=Math.floor(e()*(t+1));[s[t],s[i]]=[s[i],s[t]]}return this}M165(t=0){return this.#Tt="string"==typeof t?M92(t):0|t,this.#Tt}M213(){if(0===this.#It.length)return null;const t=this.#It.pop();return this.#At.push(t),this.#Ct[t]}M166(){const t=[];return this.#It.forEach(i=>{t.push(this.#Ct[i])}),this.#At=this.#It,this.#It=[],t}M136(){const t=this.#It[this.#It.length-1];return this.M167(t)}M167(t){return this.#Ct[t]}M43(t){if("function"!=typeof t)return[];const i=[];for(let e=this.#It.length-1;e>=0;e--){const s=this.#It[e],n=this.#Ct[s];t(n)&&(this.#It.splice(e,1),this.#At.push(s),i.push(n))}return i}M56(t,i){t|=0,i|=0,this.#Ct.forEach(e=>e.M147(t,i))}M168(){return this.#Ct.length}M21(){return this.#It.length}M157(t){return"function"!=typeof t||this.#Ct.forEach((i,e)=>t(i,e)),this}M22(t,i){const e=t.SUIT,s=i.SUIT;return e<s?-1:e>s?1:Math.sign(t.RANK-i.RANK)}},ot="off",at=class extends rt{static K56=ot;static K57="top";static K26="right";static K22="bottom";static K43="left";#Pt=null;#Ot=!1;#Bt=0;#Vt=null;constructor(t,e,s={}){const{max_cards:n=1/0,counter_position:r=ot,pop_effect:h=!1,face_up:o=!0,parent:a=null}=s;super(t,e,E.K118,E.K113,E.K108,!0,{max_cards:n,parent:a}),this.#Ft(),this.#zt(),this.M16(r),this.M57(h),this.M112(o),i.M5(this,"COUNTER",this.#Pt)}#Ft(){const t=this.ELEMENT;t.classList.add("PileOfCards");const i=document.createElement("span");i.classList.add("PileCounter"),i.innerText="0",t.appendChild(i),this.#Pt=i}M218(t,i=!0){return super.M218(t,i),this.#Ht(t,i),this}#Ht(t,i=!0){t.M125()?(this.#Bt++,t.M72(()=>{this.#Bt--,this.#zt(),this.#Ut(i?t:null),i||this.#Vt===t||t.M94(!1)})):(this.#Ut(i?t:null),i||this.#Vt===t||t.M94(!1),this.#zt())}#Ut(t=null){const i=this.M131();if(0===i)return;const e=this.#Vt;if(null===t)for(let e=i-1-this.#Bt;e>=0;--e){const i=this.M77(e);if(!i.M123()){t=i;break}}e!==t&&(e&&e.M94(!1),this.#Vt=t,t.M94(!0))}M132(t,i=!0){super.M132(t,i);const e=t.length;let s;for(let i=0;i<e;i++)s=t[i],s.M94(!1);return this.#zt(),this.#Ut(i?s:null),this}M184(t){return super.M184(t),this.#jt(t),this}#jt(t,i=!0){t.M94(!0),t.M123()&&this.#Bt--,i&&(this.#Vt===t&&(this.#Vt=null,this.#Ut(null)),this.#zt())}M79(t=null,i=0){const e=this.#Vt,s=null===t?[...this.GetEntities()]:t,n=s.length;if(0===n)return this;super.M79(t,i);for(let t=0;t<n;t++){const i=s[t];this.#jt(i,!1)}return s.includes(e)&&this.#Ut(),this.#zt(),this}M199(){return super.M199(),this.#Vt=null,this.#Bt=0,this.#zt(),this}M137(t){return this.M218(t,!0)}M85(t){return this.M218(t,!1)}M86(){const t=this.M159();return t&&this.M184(t),t}M32(){const t=this.M158();return t&&this.M184(t),t}M178(){return this.M159()}M115(){return this.M158()}M155(){const t=this.M131();if(t>0&&this.#Gt(),t<=1)return;const i=this.#Vt;super.M155();const e=this.M77(t-1);return i!==e&&(i.M94(!1),e.M94(!0),this.#Vt=e),this}M16(t){return this.ELEMENT.dataset.counter=t,this}M57(t){return this.#Ot=!!t,this}#zt(){const t=this.M131()-this.#Bt;this.#Pt.innerText=t,this.#Ot&&this.#Gt()}#Gt(){const t=this.#Pt;t.classList.remove("PopEffect"),this.M70(),t.classList.add("PopEffect")}debug(){const t=this.M131();for(let i=0;i<t;++i)this.M77(i)}M169(){const t=this.M131();return 0===t?null:this.M77(t-1)}M101(){return 0===this.M131()?null:this.M77(0)}},lt="https://",ct=window.visualViewport,ut="AppRotate",dt="AppError",_t="AppErrorInfo",Mt="AppViewport",pt="PageHidden",ft="Hidden",mt=ut.toLowerCase(),gt=dt.toLowerCase(),wt="Home".toLowerCase(),yt="Play".toLowerCase(),vt=class t{static K91=1;static K99=2;static K116=3;#qt=null;#Wt=null;#Yt=new Map;#Xt=t.K91;#$t=null;#Jt=null;#Qt=null;#Zt=null;#ti=null;#ii=null;#ei=null;#si=null;#ni=null;#ri="";#hi=!0;constructor(t={}){this.#ri=i.M120?"touchstart":"click",this.#oi(t);const e=t.start_page||wt;requestAnimationFrame(()=>this.M139(e))}#oi(t){if(this.#qt=document.getElementById(Mt),null===this.#qt)throw new Error("App » Element not found: #"+Mt);this.#ai();const i=this.#Yt.get(mt);if(!i)throw new Error("App » Element not found: #"+ut);i.classList.add(ut);const e=this.#Yt.get(gt);if(!e)throw new Error("App » Element not found: #"+dt);if(e.classList.add(dt),this.#Jt=document.getElementById(_t),!this.#Jt)throw new Error("App » Element not found: #"+_t);this.#li(t),this.#ci(),this.#ui(),this.#di(),this.#Xt=t.page_mode??1,this.#_i(),this.#ei=t.on_resize||this.#ei||null,this.#si=t.on_click||this.#si||null,this.#ni=t.on_page||this.#ni||null}#li(t){const i=new k("Onesie");i.M94(!0),i.M112(!1),i.M108(!1),this.#ii=i;const e=this.#Yt.get(wt);if(e.appendChild(i.ELEMENT),e.classList.add("Clickable"),t.blank_card)return;const s=t.game_name||"Some Card Game",n=t.game_designer||"Some Great Designer",r=t.game_build||("undefined"!=typeof BUNDLE_ID?BUNDLE_ID:"0000-0000-0000"),h="p";if(!t.blank_back){const t=document.createElement(h);t.classList.add("h1"),t.innerHTML="ONESIE",i.BACK.appendChild(t);const e=document.createElement(h);e.classList.add("h2"),e.innerHTML="1p card games",i.BACK.appendChild(e);const s=document.createElement(h);s.classList.add("h3"),s.innerHTML="build:<br><span>"+r+"</span>",i.BACK.appendChild(s)}if(!t.blank_face){const t=document.createElement(h);t.classList.add("h1"),t.innerHTML=s;const e=document.createElement(h);e.classList.add("h2"),e.innerHTML="<small>designed by:</small><br>"+n;const o=document.createElement(h);o.classList.add("h2"),o.innerHTML="<small>coded by:</small><br>Pedro Fontoura";const a=document.createElement(h);a.classList.add("h3"),a.innerHTML="build:<br><span>"+r+"</span>";const l=document.createElement(h);l.classList.add("h3"),l.innerHTML="♦ a solitaire card game ♦";for(const s of[t,l,e,o])i.FACE.appendChild(s)}}#ai(){document.querySelectorAll("#"+Mt+" > section").forEach(t=>{this.#Yt.set(t.id.toLowerCase(),t),t.classList.add(pt)})}#di(){window.addEventListener("resize",()=>this.#_i()),window.addEventListener("contextmenu",t=>{if(t.preventDefault(),t.stopPropagation(),"touchstart"===this.#ri)return;const i=new MouseEvent(this.#ri,{view:window,bubbles:!0,cancelable:!0,clientX:t.clientX,clientY:t.clientY});t.target.dispatchEvent(i)},{passive:!1}),window.addEventListener("unhandledrejection",t=>{t.preventDefault(),t.stopPropagation();const i=[this.#Mi(t.reason.stack)].join("<br>");this.#pi("Error",i)}),window.addEventListener("error",t=>{t.preventDefault(),t.stopPropagation();const i=[t.error.message,t.error.fileName,t.error.lineNumber,this.#Mi(t.error.stack)].join("<br>");this.#pi("Error",i)}),this.#Zt.addEventListener(this.#ri,t=>{this.#fi(),t.stopPropagation(),this.#ti.classList.toggle(ft)}),Array.from(this.#ti.children).forEach(t=>{const i=this.#mi(t);this.#Yt.get(i)?t.addEventListener(this.#ri,t=>{this.#fi(),t.stopPropagation(),this.#gi(t)}):t.remove()}),this.#ii.M9().addEventListener(this.#ri,t=>{this.#fi(),t.stopPropagation(),this.#ii.M133()?this.M139(yt):this.#ii.M211()}),this.M170(wt).addEventListener(this.#ri,t=>{this.#fi(),t.stopPropagation(),this.#ii.M211()}),window.addEventListener(this.#ri,t=>{t.stopPropagation(),this.#wi(t)})}#fi(){i.M48||i.M120&&i.M18()}#gi(t){const i=this.#mi(t.target);this.#Yt.get(i)&&this.M139(i)}#wi(t){let i=0,e=0;if("touchstart"===this.#ri){const s=t.touches[0];i=s.clientX,e=s.clientY}else i=t.clientX,e=t.clientY;if(this.#si){if(!this.#hi)return;this.#si(t.target,0|i,0|e)}}#ci(){this.#Qt=document.getElementById("AppSideMenu"),this.#Zt=document.getElementById("AppSideMenuMain"),this.#ti=document.getElementById("AppSideMenuGroup"),this.#ti.classList.add(ft),i.M120&&this.#Qt.classList.add("TopSpacing")}#Mi(t){return t.split("at ").join("<br>&bull; ")}#pi(t,i){null!==this.#Jt&&(this.#Jt.innerHTML+="<h3>"+t+"</h3>"+i,this.M139(gt))}#_i(){const t=ct.width,i=ct.height;if(this.#yi(),this.#ii){const e=.75*Math.min(t,i)|0,s=.7*e|0;this.#ii.M147(s,e),this.#ii.M71(t-s>>1,i-e>>1)}this.#ei&&this.#ei(t,i,this.#Qt.offsetWidth)}get M204(){return ct.width}get M191(){return ct.height}#yi(){3!==this.#Xt&&((Math.sign(ct.width-ct.height)>=0?1:2)!==this.#Xt?this.#Wt!==mt&&(this.#$t=this.#Wt,this.M139(mt)):null!==this.#$t&&(this.M139(this.#$t),this.#$t=null))}async#ui(){await this.M116("./assets/app_icons.svg","icons-sprite-sheet")}async M116(t,i){try{const e=await fetch(t),s=await e.text(),n=document.getElementById(i);n&&n.remove();const r=(new DOMParser).parseFromString(s,"image/svg+xml").querySelector("svg");r&&(r.id=i,r.style.display="none",document.body.insertAdjacentElement("afterbegin",r))}catch(t){}}async M138(t){try{const i=await fetch(t);return i.ok?await i.json():null}catch(t){return null}}#mi(t){const i=t.querySelector("use");if(i)return(i.getAttribute("href")||i.getAttribute("xlink:href")).split("-").pop().toLowerCase()}get M102(){return this.#Qt.offsetWidth}get M214(){return this.#ii}M139(t,i=!1){const e=this.#Wt===t;t=t.toLowerCase();const s=this.#Yt.get(t);if(!s)throw new Error("App » No such page: "+t);t===yt&&this.#hi,this.#Wt&&this.#Yt.get(this.#Wt).classList.add(pt),s.classList.remove(pt),this.#Wt=t,t===wt?this.#Qt.classList.add(ft):this.#Qt.classList.remove(ft);const n=this.#ii;n&&n.M112(!1),this.#ni&&!i&&this.#ni(t,e)}M117(t){return this.#Wt===t}M170(t){const i=this.#Yt.get(t);if(!i)throw new Error("App » No such page: "+t);return i}M58(){const t=window.matchMedia("(display-mode: standalone)").matches,i=!0===window.navigator.standalone;return t||i}M140(t=!0){(t=!!t)&&this.#hi?this.#ti.classList.remove(ft):this.#ti.classList.add(ft)}M29(t,i){t.classList.add("Clickable"),t.addEventListener(this.#ri,e=>{e.preventDefault(),e.stopPropagation(),i(t)})}get M219(){const t=new Date,e=`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}-${String(t.getHours()).padStart(2,"0")}-${String(t.getMinutes()).padStart(2,"0")}`;return i.M92("Onesie"+e)}async M87(t=!0){const e=await this.#vi();if("Wrpq}Qjt7qxvn"===i.M49(e,9))return this.#hi=!0,!0;let s=!1;return window.top===window.self&&"ynm{x6oxw}x~{j7pr}q~k7rx"===i.M49(window.location.hostname,9)&&(s=i.M17("key",0,!0)===this.M219),this.#hi=s,!s&&t&&this.#bi(),s}#bi(){const t=lt+i.M49("ynm{x6oxw}x~{j7pr}q~k7rx8xwn|rn8HyjpnFyuj",-9);self.location.replace(t)}#vi=async()=>(await fetch(window.location.href,{method:"HEAD"})).headers.get("server");async M44(t,e=!0){const s=lt+i.M49("etm2gsyrxivetm2hiz3z6",-4)+"/"+i.M49("rqhvlh0vwdwv",-3)+"/"+i.M49(t,-5)+"/"+(e?"up":"down");try{const t=await fetch(s),i=await t.json();i.data&&i.data}catch(t){}}},bt="fsm_data_changed",Et=class{#Ei=()=>{};V42=!0;V39=new Map;V18=null;V28={};V24=[];V25=[];constructor(t,i=[]){if(this.#Ei=t,i.length>0)for(const t of i)this.V24.push(t)}M33(t){this.#xi(t)}M45(t){if(null!==t&&!this.V39.has(t))throw new Error("FSM::AssertStateId » Unknown id: "+t)}M46(t){if(!this.V28.hasOwnProperty(t))throw new Error("FSM::AssertDataKey » Unknown key: "+t)}M59(t,i,e=null){this.M45(t),this.M45(i),null!==t&&t!==this.V18.ID||this.#xi(i,e)}#xi(t,i=null){if(this.V18&&this.V18.M215(),this.V18=this.V39.get(t),!this.V18)throw new Error("FSM::#TransitionTo » No state! Key:",t);return this.V18.M205(i),!0}M34(t){if(null!==t)return this.M45(t),this.V18.ID===t}M60(t,i={}){this.M45(t);for(const[t,e]of Object.entries(i))this.M46(t),e!==this.V28[t]&&(this.V28[t]=e,this.#ki(t,e));return this.M34(t)}#ki(t,i){this.V24.includes(t)&&this.#Li(bt,{key:t,value:i})}M61(t,i){if(this.M45(t),"string"==typeof i)return this.M46(i),this.V28[i];const e={};for(const t of i)this.M46(t),this.V28[t],e[t]=this.V28[t];return e}M141(){const t=this.V28;for(const[i,e]of Object.entries(t));}M192(t=null,i,e){t&&this.M45(t),this.#Li(i,e)}#Li(t,i){this.#Ei(t,i)}M118(t){this.M45(t),this.V18&&(this.V18.Sleep(),this.V25.push(this.V18)),this.V18=this.V39.get(t),this.V18.M205()}M142(){const t=this.V25;if(0===t.length)throw new Error("FSM::PopState » Stack is empty");this.V18.M215(),this.V18=t.pop(),this.V18.WakeUp()}},xt=class{constructor(t,e){i.M5(this,"ID",t),i.M5(this,"CONTROLLER",e)}M205(t){}M215(){}M171(t,i){return!1}M88(t,i){return!1}M103(t,i){return!1}M192(...t){return this.CONTROLLER.M192(this.ID,...t)}M172(...t){return this.CONTROLLER.M61(this.ID,...t)}M173(...t){return this.CONTROLLER.M60(this.ID,...t)}M59(...t){return this.CONTROLLER.M59(this.ID,...t)}},kt=class extends xt{constructor(t){super(t)}},Lt=class extends xt{constructor(t,i){super(t,i)}M205(){this.M192(M,!0);const{health:t,played_card:i}=this.M172(["health","played_card"]);let e=t;20===e&&i.M190(z)&&(e+=i.RANK),this.M192(d,{key:"score",value:e})}},Ct=class extends xt{constructor(t,i){super(t,i)}M205(){this.M192(M,!1);const t=this.CONTROLLER.M6(this.ID);let i=0;t.forEach(t=>{t.M202()?i+=14:i+=t.RANK}),this.M192(d,{key:"score",value:-i})}},It=class extends xt{constructor(t,i){super(t,i)}M205(){const t=1+this.M172("turn");this.M173({turn:t});const i=this.CONTROLLER.M64(this.ID),e=this.CONTROLLER.M63(this.ID),s=Math.min(4-e,i);this.CONTROLLER.M30(this.ID,s),setTimeout(()=>this.M59(o),200)}},At=class extends xt{#Ci=!1;constructor(t,i){super(t,i)}M205(){this.#Ci=this.CONTROLLER.M193(this.ID),this.M192(d,{key:"CanRun",value:this.#Ci}),this.M192(d,{key:"CanHeal",value:!0})}M88(t,i){return i===f?this.#Ci?(this.M59("run"),!0):(this.M192(u,"cannot:run"),!1):i===g&&(this.M59(a,t),!0)}},Nt=class extends xt{constructor(t,i){super(t,i)}M205(){this.M192(d,{key:"CanRun",value:!1});const t=this.M172("turn");this.M173({last_run:t}),this.CONTROLLER.M35(this.ID).M72(()=>{this.M59(l)})}},Tt=class extends xt{constructor(t,i){super(t,i)}M205(){this.CONTROLLER.M47(this.ID);const t=this.CONTROLLER.M63(this.ID),i=this.CONTROLLER.M64(this.ID);0===t&&0===i?this.M59(n):this.M59(h)}},Dt=class extends xt{#Ii=!0;#Ai=0;#Ni=0;#Ti=null;#Di=!1;#Ri={monster_value:0,sword_value:0,sword_used:!1};constructor(t,i){super(t,i)}M205(t){this.#Ii=!0,this.#Di=!1,this.#Ki(t)}M88(t,i){if(!this.#Di)return i===g&&(this.#Ki(t),!0);if(i===w){if(t.M190(V))return this.#Di=!1,this.#Si(),!0}else{if(i===m)return this.#Di=!1,this.#Pi(),!0;if(i===g&&t.M161()&&t.M95())return t.M73(!1),this.#Ti=null,this.#Di=!1,!0}return!1}M171(t,i){return!!this.#Di&&(i===m?(this.#Di=!1,this.#Pi(),!0):i===w&&(this.#Di=!1,this.#Si(),!0))}#Ki(t){return this.#Ai=-1,this.#Ti=null,this.M173({played_card:t}),t.M161()?this.#Oi(t):t.M190(V)?this.#Bi(t):this.#Vi(t),!0}#Fi(){this.#Ai<0&&this.M192(d,{key:"damage",value:this.#Ai}),null!==this.#Ti&&this.#Ni<=0?this.M59(r):this.CONTROLLER.M65(this.ID)?0===this.CONTROLLER.M64(this.ID)&&this.M59(l):this.M59(l)}#Oi(t){this.#Ti=t;const{sword_value:i,sword_level:e,health:s}=this.M172(["sword_value","sword_level","health"]);this.#Ni=s;const n=t.M202()?14:t.RANK,r=0===i||e<=n;this.#Ai=n,r?this.#Pi():(this.#Di=!0,this.#Ti=t,t.M73(!0),this.#Ri.monster_value=n,this.#Ri.sword_value=i,this.#Ri.sword_level=e)}#Pi(){this.#Ni=Math.max(0,this.#Ni-this.#Ai),this.M173({health:this.#Ni});const t=[this.#Ti.M39(),this.#Ti.M52()];this.M192(d,{key:"damage",value:this.#Ai,center:t}),this.CONTROLLER.M174(this.ID,this.#Ti),this.#Ti.M73(!1),this.#Ti.M72(()=>this.#Fi())}#Si(){const t=this.#Ri;if(this.M173({sword_level:t.monster_value}),this.#Ai=t.monster_value-t.sword_value,this.#Ai>0){this.#Ni=Math.max(0,this.#Ni-this.#Ai),this.M173({health:this.#Ni});const t=[this.#Ti.M39(),this.#Ti.M52()];this.M192(d,{key:"damage",value:this.#Ai,center:t})}else 0===this.#Ai&&this.M192(d,{key:"damage",value:0});this.#Ti.M73(!1),this.CONTROLLER.M36(this.ID,this.#Ti),this.#Ti.M72(()=>this.#Fi())}#Bi(t){const i=this.M172("sword_card");if(null!==i){const e=this.CONTROLLER.M23(this.ID);return void(null!==e?e.M72(()=>this.#zi(i,t)):this.#zi(i,t))}this.#Hi(t)}#zi(t,i){const e=this.CONTROLLER.M90(this.ID);null!==e?e.M72(()=>this.#Hi(i)):this.#Hi(i)}#Hi(t){this.CONTROLLER.M119(this.ID,t),this.#Fi()}#Vi(t){this.#Ii&&(this.#Ii=!1,this.M192(d,{key:"CanHeal",value:!1}),this.CONTROLLER.M216(this.ID,t.RANK)),this.CONTROLLER.M174(this.ID,t),t.M72(()=>this.#Fi())}},Rt=class extends Et{static K44=bt;#Ui=null;#ji=0;#Gi=null;#qi=null;#Wi=null;#Yi=null;#Xi=null;#$i=null;#Ji=null;#Qi=null;#Zi={position:new Array(2),status:0};#te=null;constructor(t={}){const{on_message_request:i,V24:e=[],parent_node:n=window.document.body}=t;super(i,e),this.#te=n,this.#ie();for(const t of e)this.V28.hasOwnProperty(t);this.#ee(),this.M33(s),this.#se()}#ie(){this.V28.health=0,this.V28.played_card=null,this.V28.sword_card=null,this.V28.sword_level=0,this.V28.sword_value=0,this.V28.turn=0,this.V28.last_run=0}#ee(){const t=[[s,kt],[n,Lt],[r,Ct],[h,It],[o,At],["run",Nt],[l,Tt],[a,Dt]];for(const[i,e]of t)this.V39.set(i,new e(i,this))}M60(t,i){return super.M60(t,i),this.#ne(),this.V18.ID===t}#ne(){this.V28}M171(t,i,e){let s=!1;this.V42||(s=this.#re(t)),this.#Zi.position[0]=i,this.#Zi.position[1]=e,this.#Zi.status=s,this.M192(null,_,this.#Zi)}#re(t){if(!t.classList.contains("Clickable"))return!1;if(t.classList.contains("CardBody")){const i=parseInt(t.dataset.idx),e=this.#Ui.M167(i),s=this.#he(e);return this.V18.M88(e,s)}const i=this.#oe(t);return this.V18.M171(t,i)}#he(t){const i=t.M180();return i===this.#Gi?f:i===this.#qi?m:i===this.#Wi?g:i===this.#Yi?w:p}#oe(t){return t===this.#Gi.ELEMENT?f:t===this.#qi.ELEMENT?m:t===this.#Wi.ELEMENT?g:t===this.#Yi.ELEMENT?w:p}M62(t){return!Number.isInteger(t)||t<=0?(this.M192(null,MSG_APP_ERROR,"Invalid game_level: "+t),this):(this.V28.level=t,this)}M206(){const t=i.M17("seed",Date.now()%1e6,!0);this.M192(null,c,t),this.#Ui.M200().M155(t).M212(this.#Gi),this.V42||(this.#ae(),this.#le()),this.V42=!1,this.M60(null,{health:20}),this.M33(h)}M143(t,e,s=0){const n=Math.min(t,e),r=.03*n,h=(s||.1*n)+r,o=Math.floor((n-r-h)/5),a=Math.round(o/.7),l=5*o,c=4*a,u=Math.min(18,Math.round(.1*o))+"px",d=t-l-h>>1,_=t<e?.25*(e-c>>1):0,M=e-c-3*_>>1,p=.8*a|0,f=.66*p|0;this.#Ui.M56(f,p);const m=.9*a|0,g=o;this.#Gi.M27(f,p),this.#Gi.M105(g,m,d+o,M),this.#Gi.COUNTER.style.fontSize=u,this.#qi.M27(f,p),this.#qi.M105(g,m,d+3*o,M),this.#qi.COUNTER.style.fontSize=u;let w=M+a+_;this.#Wi.M27(f,p),this.#Wi.M105(l,m,d,w),w+=a+_,this.#Yi.M27(f,p),this.#Yi.M105(l,m,d,w),w+=a+_,i.M105(this.#Xi,l,a,d,w);const y=.4*l|0,v=.025*c|0,b=l-2*y;return i.M147(this.#$i,y,v),i.M147(this.#Ji,y,v),i.M147(this.#Qi,b,a),this}M144(t){return this.M45(t),this.#Gi.M86()}M89(t){return this.M45(t),0===this.#Gi.M131()}M47(t){this.M45(t),this.#ae()}#ae(){}#le(){super.M60(null,{played_card:null,sword_card:null,sword_level:0,sword_value:0,turn:0,last_run:0,health:0})}M63(t){return this.M45(t),this.#Wi.M131()}M64(t){return this.M45(t),this.#Gi.M131()}M30(t,i){this.M45(t);const e=[];for(let t=1;t<=i;++t){const t=this.#Gi.M86();e.push(t)}return this.#Wi.M132(e),e[0]}M193(t){this.M45(t);const i=this.V28.last_run;return 0===i||i<this.V28.turn-1}M35(t){this.M45(t);const i=this.#Wi.M186();return this.#Wi.M199(),i.forEach(t=>t.M112(!1)),this.#ce(i,this.#Gi)}#ce(t,i,e=200){const s=t.length;if(0===s)return null;const n=t[0];if(e<=0)return i===this.#qi?i.M132(t,!0):i===this.#Gi?i.M132(t,!1):i.M132(t),n;for(let n=0;n<s;++n)setTimeout(()=>{const e=t.pop();i===this.#qi?i.M137(e):i===this.#Gi?i.M85(e):i.M218(e)},n*e);return n}M216(t,i){this.M45(t);const e=Math.min(20,this.V28.health+i);return this.M60(null,{health:e}),e}M65(t){return this.M45(t),this.#Wi.M131()>1||0===this.#Gi.M131()}M174(t,i){return this.M45(t),this.#qi.M218(i),i}M23(t){this.M45(t);const i=this.#Yi.M78(t=>!0);return 0===i.length?null:(this.#Yi.M79(i),i.forEach(t=>t.M112(!1)),this.#ce(i,this.#qi))}M90(t){this.M45(t);const i=this.V28.sword_card,e=this.#qi.M130(i);return e||this.#qi.M137(i),this.M60(null,{sword_card:null,sword_level:0,sword_value:0}),e?null:i}M119(t,i){this.M45(t),this.#Yi.M218(i),this.M60(null,{sword_card:i,sword_level:1/0,sword_value:i.RANK})}M36(t,i){return this.M45(t),this.#Yi.M218(i),i}M6(t,i){return this.M45(t),this.#Gi.M78(t=>t.M161())}#ue(t){if(t<0||t>this.#ji-1)throw new Error("GC::AssertCardIdx » Bad idx: "+t)}#se(){this.#de(),this.#_e()}#de(){this.#Ui=new ht({jokers:0,exclude_cards:[{rank:L.K98,suit:L.K54},{rank:L.K98,suit:L.K25},{rank:L.K89,suit:L.K54},{rank:L.K73,suit:L.K54},{rank:L.K90,suit:L.K54},{rank:L.K89,suit:L.K25},{rank:L.K73,suit:L.K25},{rank:L.K90,suit:L.K25}]},{velocity_px_ms:1.25,flip_time:300,visible:!1,touch_down_events:!0,smooth:!0,flip_axis:e.M51(.5)?"x":"y"}),this.#Ui.M157(t=>{this.#te.appendChild(t.ELEMENT),t.M202()&&t.M41(14)}),this.#ji=this.#Ui.M168()}#_e(){const i=this.#Ui.M168(),e=this.#te;let s=0;this.#Gi=new at(s++,"DrawPile",{max_cards:i,flip_after:!1,face_up:!1,parent:e,counter_position:at.K26,pop_effect:!0}),this.#Gi.ELEMENT.classList.add("DrawPile"),this.#Gi.ELEMENT.classList.add("Clickable"),this.#qi=new at(s++,"DiscardPile",{max_cards:i,flip_after:!1,face_up:!1,parent:e,counter_position:at.K26,pop_effect:!0}),this.#qi.ELEMENT.classList.add("DiscardPile"),this.#qi.ELEMENT.classList.add("Clickable"),this.#Wi=new rt(s++,"Room",rt.K118,rt.K108,rt.K108,!0,{max_cards:4,flip_after:!0,face_up:!0,parent:e}),this.#Wi.ELEMENT.classList.add("Room"),this.#Wi.ELEMENT.classList.add("Clickable"),this.#Yi=new rt(s++,"Hand",rt.K118,rt.K108,rt.K108,!0,{max_cards:i,flip_after:!0,face_up:!0,parent:e}),this.#Yi.ELEMENT.classList.add("Hand"),this.#Yi.ELEMENT.classList.add("Clickable"),this.#Xi=t("InGameInfo"),this.#$i=t("IGI_HealthLeft"),this.#Ji=t("IGI_HealthRight"),this.#Qi=t("IGI_Stats")}};import Kt from"stampit";import stampit from"stampit";var St=stampit({props:{M104:!1,M217:null,M10:NaN},methods:{setImage(t){this.resetImage(),this.M104=!0;let i=null;"string"==typeof t?(i=new Image,i.onload=()=>{this.M217=i,this.M10=i.width/i.height},i.onerror=()=>{this.resetImage()},i.src=t):(t instanceof HTMLImageElement||t instanceof Image)&&(this.M217=t,this.M10=t.width/t.height)},getImage(){return this.M217&&this.M217.complete?this.M217:null},getImageAspectRatio(){return this.M217&&this.M217.complete?this.M10:NaN},resetImage(){this.M217=null,this.M10=NaN,this.M104=!1}}});import Pt from"stampit";import{ARRAY_TYPE as Ot}from"glMatrix";import{fromValues as Bt,create as Vt}from"vec2";var vec2={fromValues:Bt,create:Vt},Ft=Pt({methods:{validateVector(t,i=null){const e=t||i;if(!e)return vec2.create();if(!(Array.isArray(e)||e instanceof Ot))throw new Error("Vector input must be an Array or glMatrix ARRAY_TYPE.");if(2!==e.length)throw new Error("Vector input must have exactly 2 elements.");if(!Number.isFinite(e[0])||!Number.isFinite(e[1]))throw new Error("Vector array must contain only numeric values.");return vec2.fromValues(e[0],e[1])}}});import{add as zt,create as Ht,scaleAndAdd as Ut,zero as jt,copy as Gt}from"vec2";import qt from"stampit";import Wt from"stampit";var Yt=Wt({methods:{makeReadOnly:function(t){if("object"!=typeof t||null===t||Array.isArray(t))return;const i={};Object.entries(t).forEach(([t,e])=>{Object.prototype.hasOwnProperty.call(this,t),i[t]={configurable:!1,writable:!1,value:e,enumerable:!0}}),Object.defineProperties(this,i)}}}),Xt={add:zt,create:Ht,scaleAndAdd:Ut,zero:jt,copy:Gt},$t="#FFFFFF",Jt=!0,Qt=2*Math.PI,Zt=Kt({props:{M194:null},init({radius:t=3,color:i=$t,opacity:e=1,fill:s=Jt,user_data:n=null}){if(!Number.isFinite(t)||t<=0)throw new Error("'radius' must be a positive number.");if(!Number.isFinite(e)||e<0||e>1)throw new Error("'opacity' must be a number between 0.0 and 1.0.");if("string"!=typeof i||i.length<3)throw new Error("'color' must be a valid string format ( e.g., '#FFF' or 'red' ).");this.radius=t,this.color=i,this.opacity=e,this.fill=s,this.user_data=n},methods:{render(t){if(t.save(),t.globalAlpha=this.opacity,this.M104){const i=this.getImageAspectRatio();if(Number.isFinite(i)){const e=this.getImage(),s=this.position[0],n=this.position[1],r=(e.width,e.height,this.M10,2*this.radius),h=r*i;t.drawImage(e,s-h/2,n-r/2,h,r)}}else t.beginPath(),t.arc(...this.position,this.radius,0,Qt),this.fill?(t.fillStyle=this.color,t.fill()):(t.strokeStyle=this.color,t.stroke());t.restore()},resetRender(){this.resetImage(),this.fill=Jt}}}),ti=Kt({init({position:t,velocity:i}){this.position=this.validateVector(t),this.velocity=this.validateVector(i),this.acceleration=Xt.create()},methods:{applyForce(t){Xt.add(this.acceleration,this.acceleration,t)},updatePhysics(t=1){Xt.scaleAndAdd(this.velocity,this.velocity,this.acceleration,t),Xt.scaleAndAdd(this.position,this.position,this.velocity,t),Xt.zero(this.acceleration)},resetPhysics(){Xt.zero(this.position),Xt.zero(this.velocity),Xt.zero(this.acceleration)}}}),ii=Kt({props:{age:0,alive:!1},init({life:t=120}){if(!Number.isFinite(t)||t<=0)throw new Error("'life' must be a positive number.");this.life=t},methods:{updateLife(t=1){return this.age+=t,this.alive=this.age<this.life,this.alive},resetLife(){this.age=0,this.alive=!1}}}),ei=Kt({methods:{config(t={}){if(this.opacity=(t.opacity??this.opacity)||1,this.radius=(t.radius??this.radius)||3,this.color=(t.color??this.color)||$t,this.life=(t.life??this.life)||120,this.fill=t.fill??Jt,t.position&&Xt.copy(this.position,this.validateVector(t.position)),t.velocity&&Xt.copy(this.velocity,this.validateVector(t.velocity)),!Number.isFinite(this.radius)||this.radius<=0)throw new Error("'radius' must be a positive number.");if(!Number.isFinite(this.opacity)||this.opacity<0||this.opacity>1)throw new Error("'opacity' must be a number between 0.0 and 1.0.");if(!Number.isFinite(this.life)||this.life<=0)throw new Error("'life' must be a positive number.")}}}),si=Kt().compose(Ft,St,Zt,ti,ii,ei,Kt({methods:{reset(){this.resetRender(),this.resetPhysics(),this.resetLife()}}})),ni=qt({init({object_stamp:t,pool_size:i=1e3}){if("function"!=typeof t)throw new Error("'object_stamp' must be a constructor function ( a stamp or factory ).");if(!Number.isInteger(i)||i<=0)throw new Error("'pool_size' must be a positive integer.");this.makeReadOnly({pool_size:i,object_stamp:t})}}),ri=qt({init(t,{instance:i}){const e=new Array(this.pool_size);let s=0;const n=new WeakMap;for(let t=0;t<this.pool_size;t++){const i=this.object_stamp();i.reset(),e[t]=i}i._setIndex=function(t,i){n.set(t,i)},i.get=function(){if(s>=this.pool_size)return null;const t=e[s];return n.set(t,s),s++,t},i.free=function(t){const i=n.get(t);if(void 0===i||i>=s)return!1;s--;const r=e[s];return e[s]=t,e[i]=r,t!==r&&n.set(r,i),t.reset(),n.delete(t),!0},i.getActiveCount=function(){return s},i._getPoolArray=function(){return e}}}),hi=qt({methods:{M157:function(t){const i=this._getPoolArray();let e=0;for(;e<this.getActiveCount();){const s=i[e];this._setIndex(s,e),!1!==t(s)?e++:this.free(s)}},M195:function(t){this._getPoolArray().forEach(i=>t(i))}}}),oi=qt().compose(Yt,ni,ri,hi);import{fromValues as ai,copy as li,random as ci,create as ui}from"vec2";var di={fromValues:ai,copy:li,random:ci,create:ui},_i=di.create(),Scoundrel=class{#Me=null;#pe=!1;#fe=null;#me=-1;#te=null;#hi=!1;#ge=di.create();#we=null;#ye=0;#ve=null;#be=null;#Ee=null;#xe=null;#ke=0;#Le=0;#Ce=t("IGI_HealthLeft").childNodes[0];#Ie=t("IGI_HealthRight").childNodes[0];constructor(t){this.#me=this.#Ae(),this.#Me=new vt({game_name:"SCOUNDREL",game_designer:"Zach Gage and Kurt Bieg",game_build:t,start_page:i.M17("page",wt),page_mode:vt.K116,on_resize:this.M143.bind(this),on_click:this.M171.bind(this),on_page:this.M196.bind(this)}),this.#te=this.#Me.M170(yt),this.#ye=this.#Me.M102,this.#hi=this.#Me.M87(),this.#Ne(),this.#Te(),this.#De(),this.#Re(),this.#hi||(this.#Me.M170(yt).style.visibility="hidden")}M143(t,i,e){this.#fe.M143(t,i,e),this.#ve.width=t,this.#ve.height=i,this.#be.width=t,this.#be.height=i,this.#ye=e}M171(t,e,s){this.#pe&&(i.M48||this.#hi)&&this.#fe.M171(t,e,s)}M196(t,i){const e=this.#pe;this.#pe=t===yt,this.#pe&&(this.#Me.M140(),e||window.requestAnimationFrame(this.#Ke.bind(this)),i&&this.#Se())}M145(i,e){if("string"!=typeof i)throw new Error("! "+i+" = "+typeof i);switch(i){default:return;case Rt.K44:let i=e.value;Number.isFinite(i)&&!Number.isInteger(i)&&(i=Math.round(i)),this.#Pe(e.key,i);break;case d:let s=e.value;Number.isFinite(s)&&!Number.isInteger(s)&&(s=Math.round(s)),this.#Pe(e.key,s,e.center);break;case c:const n=t("deck_seed");n&&(n.innerText=e);break;case u:break;case _:this.#Oe(e.position,e.status);break;case M:this.#ke=e?1:-1}}async#Re(){await this.#Me.M116("./assets/theme-2.svg","card-sprite-sheet")}#Se(){this.#Me.M140(!1),this.#ke=0,this.#fe.M206(),t("damage").classList.remove("Score"),t("damage").innerHTML="&nbsp;",i.M48||this.#Me.M44("xhtzsiwjq2uqf~")}#Te(){this.#fe=new Rt({on_message_request:(t,i)=>this.M145(t,i),V24:["health"],parent_node:this.#Me.M170(yt)}),this.#fe.M143(this.#Me.M204,this.#Me.M191).M62(this.#me)}#De(){const t=document.createElement("canvas");t.id="canvas_clicks",t.width=window.innerWidth,t.height=window.innerHeight,t.style.zIndex=200,this.#te.appendChild(t);const i=document.createElement("canvas");i.id="canvas_particles",i.width=window.innerWidth,i.height=window.innerHeight,i.style.zIndex=100,this.#te.appendChild(i),this.#xe=t.getContext("2d"),this.#Ee=i.getContext("2d"),this.#be=t,this.#ve=i,this.#we=oi({object_stamp:si,pool_size:1e4}),this.#we.M195(t=>{t.user_data={click:!0}})}#Ke(t){this.#pe&&(this.#Le,this.#Le=t,this.#we.M157(t=>{if(!t.updateLife())return t.user_data.click=!0,!1}),this.#xe.clearRect(0,0,window.innerWidth,window.innerHeight),this.#Ee.clearRect(0,0,window.innerWidth,window.innerHeight),this.#we.M157(t=>{t.opacity=e.M151(t.age,t.life,5),t.updatePhysics();const i=t.user_data.click;i&&(t.radius*=1.05),t.render(i?this.#xe:this.#Ee)}),0!==this.#ke&&this.M146(this.#Ee,1===this.#ke?"SUCCESS":"YOU LOST",this.#ye),window.requestAnimationFrame(this.#Ke.bind(this)))}#Be(){const t=window.visualViewport.width,i=window.visualViewport.height,e=Math.min(t,i),s=.03*e,n=Math.floor((e-s-this.#ye-s)/5),r=(t-5*n-this.#ye-s)/2,h=Math.floor(n/.7),o=Math.floor((i-4*h)/2);Mi(this.#Ee,r,o,n,h,5,4)}#Oe(t,i){if(i)return;const e=this.#we.get();e&&(e.config({position:t,velocity:_i,color:i?"lime":"darkorange",life:i?60:30,radius:10,opacity:1,fill:!i}),e.user_data.click=!0)}#Ve(t,i=!0,s=0){const n=this.#we.get();if(!n)return;let r=i?"crimson":"white";n.config({position:t,velocity:di.random(this.#ge,e.M69(1,3)),color:r,life:60*e.M69(1,3),radius:e.M106(s,s+3)||e.M69(1,3),opacity:1,fill:!0}),n.user_data.click=!1}#Ae(){let t=i.M17("level",2,!0);return[1,2,3].includes(t)||(t=2),t}#Ne(){}#Pe(i,e,s=null){if("health"===i){const t=Math.round(e/20*100);this.#Ce.style.width=t+"%",this.#Ie.style.width=t+"%"}else if("damage"===i)if(e<0)e="&nbsp;";else{const t=10*e;for(let i=0;i<t;++i)this.#Ve(s,!0,e);e=-e}else{if("CanRun"===i||"CanHeal"===i)return void(e?t(i).classList.add("Active"):t(i).classList.remove("Active"));if("score"===i){const i=t("damage");return i.innerHTML=e,void i.classList.add("Score")}}const n=t(i);n&&(n.innerHTML=e)}M146(t,i="",e=0){const s=t.canvas.width-e,n=t.canvas.height,r=Math.floor(.18*s);t.font="bold "+r+"px card-game",t.fillStyle="rgba( 100, 149, 237, 0.50 )",t.textAlign="center",t.textBaseline="middle",t.fillText(i,s/2,n/2)}},Mi=(t,i,e,s,n,r,h)=>{const o=r*s,a=h*n;t.strokeStyle="orange",t.beginPath();for(let n=0;n<=r;n++){const r=i+n*s;t.moveTo(r,e),t.lineTo(r,e+a)}for(let s=0;s<=h;s++){const r=e+s*n;t.moveTo(i,r),t.lineTo(i+o,r)}t.stroke()};export{Scoundrel};